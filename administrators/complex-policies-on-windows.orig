<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/administrators","deleted":false,"title":"Documentation for Administrators","dir":"ltr"},{"path":"/administrators/complex-policies-on-windows","deleted":false,"title":"Complex policies on Windows","dir":"ltr"}];
  var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttp://sites.google.com/a/chromium.org/dev/administrators/complex-policies-on-windows\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"http://csi.gstatic.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["http://www.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["http://www.gstatic.com/sites/p/56e332/system/js/codemirror.js","http://www.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","http://www.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","http://www.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","http://www.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/administrators","parentWuid":"wuid:gx:6c7bc6ab28ba6c28","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Complex policies on Windows","locale":"en","wuid":"wuid:gx:5dc20f697706cdd7","revision":4,"path":"/administrators/complex-policies-on-windows","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"complex-policies-on-windows","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Complex policies on Windows - The Chromium Projects" />
<meta itemprop="name" content="Complex policies on Windows - The Chromium Projects" />
<meta property="og:title" content="Complex policies on Windows - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Complex policies on Windows - The Chromium Projects</title>
<meta itemprop="image" content="http://www.chromium.org/_/rsrc/1409227455744/administrators/complex-policies-on-windows/bookmarks4.png" />
<meta property="og:image" content="http://www.chromium.org/_/rsrc/1409227455744/administrators/complex-policies-on-windows/bookmarks4.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="http://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="http://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/administrators" dir="ltr">Documentation for Administrators</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Complex policies on Windows</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed sites-embed-full-width" style="width:100%;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Background"><strong>1 </strong>Background</a></li><li class="goog-toc"><a href="#TOC-New-in-Chrome-37:-complex-policies"><strong>2 </strong>New in Chrome 37: complex policies</a></li><li class="goog-toc"><a href="#TOC-JSON-values-as-strings"><strong>3 </strong>JSON values as strings</a></li><li class="goog-toc"><a href="#TOC-Option-1:-JSON-strings-in-the-GPO-editor"><strong>4 </strong>Option 1: JSON strings in the GPO editor</a></li><li class="goog-toc"><a href="#TOC-Option-2:-JSON-strings-in-the-registry-editor"><strong>5 </strong>Option 2: JSON strings in the registry editor</a></li><li class="goog-toc"><a href="#TOC-Option-3:-expanded-JSON-in-the-registry"><strong>6 </strong>Option 3: expanded JSON in the registry</a></li><li class="goog-toc"><a href="#TOC-Troubleshooting"><strong>7 </strong>Troubleshooting</a></li></ol></div></div></div></div></div><h2><a name="TOC-Background"></a>Background</h2><div>Chrome represents policies as JSON values internally. Up until version 37 all Chrome policies were of simple types:</div><div><ul><li><b>Booleans</b> (example: <a href="http://www.chromium.org/administrators/policy-list-3#SafeBrowsingEnabled">SafeBrowsingEnabled</a>)</li><li><b>Integers</b> (example: <a href="http://www.chromium.org/administrators/policy-list-3#DefaultCookiesSetting">DefaultCookiesSetting</a>)</li><li><b>Strings</b> (example: <a href="http://www.chromium.org/administrators/policy-list-3#ProxyPacUrl">ProxyPacUrl</a>)</li></ul></div><div>Additionally, Chrome has supported some policies as <b>Lists of Strings</b> (example: <a href="http://www.chromium.org/administrators/policy-list-3#URLBlacklist">URLBlacklist</a>).</div><div><br /></div><div>These policy types match what GPO can represent natively on Windows using Administrative Template files (ADM or ADMX).</div><div><br /></div><div>Some policies need more complex values that don't fit well in any of these types. For example, <a href="http://www.chromium.org/administrators/policy-list-3#ExtensionInstallForcelist">ExtensionInstallForcelist</a> defines a list of extensions to install automatically. Each extension is defined by its extension ID and a remote update URL (to support extensions from private stores). This can be easily represented in JSON as a list of objects, where each object has two strings:</div><div><br /></div><div><table border="1" bordercolor="#888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px"><tbody><tr><td style="width:551px;height:58px"><font face="courier new, monospace">[<br />  {<br />    "id": "public-ext-id-1",<br />    "update_url": "https://clients2.google.com/service/update2/crx"<br />  },<br />  {<br />    "id": "private-ext-id-2",<br />    "update_url": "http://www.local/chrome/updates.xml"<br />  }<br />]<br /></font></td></tr></tbody></table><br /></div><div>Unfortunately there is no native GPO type to represent this and the policy needs to be configured as a List of Strings, where each string contains both the ID and the update URL separated by a semicolon:</div><div><br /></div><div><table border="1" bordercolor="#888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px"><tbody><tr><td style="width:547px;height:64px"><font face="courier new, monospace">[<br />  "public-ext-id-1;</font><span style="font-family:courier new,monospace">https://clients2.google.com/service/update2/crx",<br /></span><font face="courier new, monospace">  "private-ext-id-2;</font><span style="font-family:courier new,monospace">http://www.local/chrome/updates.xml"<br /></span><font face="courier new, monospace">]</font></td></tr></tbody></table></div><div><br /></div><h2><a name="TOC-New-in-Chrome-37:-complex-policies"></a>New in Chrome 37: complex policies</h2><div>Chrome 37 introduced new policies with complex values that don't fit in any of the native GPO or Registry types: <a href="http://www.chromium.org/administrators/policy-list-3#RegisteredProtocolHandlers">RegisteredProtocolHandlers</a> and <a href="http://www.chromium.org/administrators/policy-list-3#ManagedBookmarks">Managed Bookmarks</a>.</div><div><br /></div><div>There are 3 ways to configure the values for these policies: as a JSON string in the GPO editor, as a JSON string in the registry, or as an expanded JSON object in the registry.</div><div><br /></div><h2><a name="TOC-JSON-values-as-strings"></a>JSON values as strings</h2><div>All of these policies can be configured as strings that contain a JSON value. Any JSON editor should able to edit and validate the JSON string, including some <a href="http://google.com/search?q=json%20editor">online editors</a>.</div><div><br /></div><div>JSON can contain simple values:</div><div><ul><li>Strings are wrapped in quotes: <font face="courier new, monospace">"example string value"</font></li><li>Integers are just spelled out: <font face="courier new, monospace">123</font></li><li>Boolean values can be specified as <font face="courier new, monospace">true</font> or <font face="courier new, monospace">false</font></li></ul><div><font face="arial, sans-serif">JSON supports lists of values. The values should be enclosed between </font><font face="courier new, monospace">[</font><font face="arial, sans-serif"> and </font><font face="courier new, monospace">]</font><font face="arial, sans-serif"> and separated by commas:</font><font face="courier new, monospace"> [ "this", "is", "a", "list", "of", "strings" ]</font><font face="arial, sans-serif">.</font></div></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">JSON also supports objects (sometimes called dictionaries), which contain a string key mapped to any other valid JSON value (which may be a list or another object/dictionary): </font><font face="courier new, monospace">{ "key": "string value", "key that maps to integer": 123, "key that maps to list": [ 1, 2, 3 ] }</font></div><div><font face="courier new, monospace"><br /></font></div><div><font face="arial, sans-serif">The examples below will configure the <a href="http://www.chromium.org/administrators/policy-list-3#ManagedBookmarks">Managed Bookmarks</a> policy to build this bookmark structure:</font></div><div><ul><li><font face="arial, sans-serif">Google (google.com)</font></li><li><font face="arial, sans-serif">YouTube (youtube.com)</font></li><li><font face="arial, sans-serif">Chrome links</font></li><ul><li><font face="arial, sans-serif">Chromium (chromium.org)</font></li><li><font face="arial, sans-serif">List of Policies (http://www.chromium.org/administrators/policy-list-3)</font></li></ul></ul><div><font face="arial, sans-serif">Each bookmark is a JSON object with a "name" key indicating its name, and a "url" key indicating the URL or a "children" key that maps to another list of bookmarks, to create folders.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">The JSON string for the structure listed above is:</font></div></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="courier new, monospace">[ { "name": "Google", "url": "google.com" }, { "name": "YouTube", "url": "youtube.com" }, { "name": "Chrome links", "children": [ { "name": "Chromium", "url": "chromium.org" }, { "name": "List of Policies", "url": "<span style="background-color:transparent">http://www.chromium.org/administrators/policy-list-3" } ] } ]</span></font></div><div><font face="courier new, monospace"><span style="background-color:transparent"><br /></span></font></div><div><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/bookmarks4.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409227455744/administrators/complex-policies-on-windows/bookmarks4.png" /></a></div><br /></div><h2><a name="TOC-Option-1:-JSON-strings-in-the-GPO-editor"></a>Option 1: JSON strings in the GPO editor</h2><div>If you use the ADM or ADMX templates you can just locate the policy to configure (in this case, "Managed Bookmarks"), enable it, and set the JSON string in the string field for that policy:</div><div><br /></div><div><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/bookmarks5.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409227745026/administrators/complex-policies-on-windows/bookmarks5.png" /></a></div></div><h2><a name="TOC-1"></a><br /></h2><h2><a name="TOC-Option-2:-JSON-strings-in-the-registry-editor"></a>Option 2: JSON strings in the registry editor</h2><div><b>Note</b>: Chrome only loads policies directly from the registry on AD enrolled machines.</div><div><br /></div><div>Chrome policies can be configured under Software\Policies\Google\Chrome (or Software\Policies\Chromium for Chromium) in HKCU or HKLM. For complex policies, just create a new String value with the policy name and set the JSON string in the Value field.</div><div><br /></div><div><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/bookmarks6.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409227969763/administrators/complex-policies-on-windows/bookmarks6.png" /></a></div><br /></div><h2><a name="TOC-Option-3:-expanded-JSON-in-the-registry"></a>Option 3: expanded JSON in the registry</h2><div><b>Note</b>: Chrome only loads policies directly from the registry on AD enrolled machines.</div><div><br /></div><div>Chrome will try to load JSON lists and JSON objects/dictionaries directly from the registry too, for the new complex policies. This format makes it easier to directly edit the policy values in the registry but requires understanding how a JSON list and a JSON dictionary can be represented in the registry.</div><div><br /></div><div>The basic rules are:</div><div><ul><li>Strings are stored as String Values (right-click on the right side, choose New -&gt; String Value)</li><li>Integers are stored as Dword Values (New -&gt; DWORD (32-bits))</li><li>Booleans are also stored as Dword Values. Use 0 for false and 1 for true.</li></ul><div>Objects/dictionaries can contain any of these simple types. Just add the value as described above, and use the "Value Name" field to set the name of the entry in the dictionary.</div></div><div><br /></div><div>If the entry in the dictionary is a list or another dictionary then you can create a new Key on the left side of the registry editor. Its name will be used for the dictionary key name, and its contents will be interpreted as another dictionary.</div><div><br /></div><div>Lists are represented just like dictionaries, but they key names must be "1", "2", "3" and so on. Note that counting starts at 1 and not at 0 (this is what the GPO editor does for lists too). Chrome knows the expected policy format internally, and will load each entry as a list or object as appropriate.</div><div><br /></div><div>Here's an example for the Managed Bookmarks configuration listed above. Start by creating a new registry Key (these are shown as folders on the left side) named "ManagedBookmarks":</div><div><br /></div><div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/reg1.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409228921754/administrators/complex-policies-on-windows/reg1.png" /></a></div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left">The value of this policy is a list of objects, so this folder will contain other subfolders named "1", "2", etc. Start by creating a subfolder named "1":</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/reg2.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409228925748/administrators/complex-policies-on-windows/reg2.png" /></a></div><br /></div>The contents of this folder are the keys for the first object inside the list of bookmarks. You can now add the 2 strings that declare a bookmark, the "name" and the "url". This configuration should be enough to show one bookmark in Chrome.</div></div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left">To add bookmark folders, start by adding a new entry in the main list (see folder "3" below) and give the folder a "name" too. But instead of specifying a "url", add a new subfolder named "children" that contains the bookmarks for that folder. The "children" folder is a list of bookmarks, so it should contain subfolders named "1", "2", etc again.</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/reg3.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409228928995/administrators/complex-policies-on-windows/reg3.png" /></a></div><br /></div><div style="display:block;text-align:left">Each child bookmark of the folder needs to have its "name" and "url" defined again:</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><a href="http://www.chromium.org/administrators/complex-policies-on-windows/reg4.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1409228930928/administrators/complex-policies-on-windows/reg4.png" /></a></div><br /></div><h2 style="display:block;text-align:left"><a name="TOC-Troubleshooting"></a>Troubleshooting</h2><div>The first step to diagnose problems is the internal chrome://policy page. You should see your policies listed in that page and their corresponding values.</div><div><ul><li>If the policy is present and its value is shown too but it doesn't seem to work then this might be a new bug. Please file a new report at <a href="http://crbug.com">crbug.com</a> with the Enterprise template.</li><li>If the policy is present but the value is invalid then there is a problem in the JSON configuration.</li><li>If the policy is not present then it wasn't found by Chrome.</li></ul><div>Policies configured via GPO have some delay until they are applied; run the <font face="courier new, monospace">gpupdate</font> command to flush them. If you use the registry then note that Chrome only loads those policies on machines that are enrolled to an AD domain.</div></div><div><br /></div><div>It's generally a good idea to validate your JSON string to make sure it doesn't have any invalid constructs; a common source of errors is trailing commas at the end of a list or a dictionary, which is not supported in JSON. Use an <a href="http://google.com/search?q=json%20validator">online JSON validator</a> (like <a href="http://jsonlint.com/">JSONLint</a>) to make sure your JSON string is valid.</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/chromium.org/dev/administrators/complex-policies-on-windows">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9oU4Nig8YGBee1F0GsMz-hqhty_R9i7ncFB_Q1zeUH84B9VjsrTr1x3ZmrY_FNYUuf-uHQ2auq662f-oGY7AIl_lhO2pVBB59if2yJX1mBkRAV0cc/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
