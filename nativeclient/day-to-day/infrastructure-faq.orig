<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/nativeclient","deleted":false,"title":"Native Client","dir":"ltr"},{"path":"/nativeclient/day-to-day","deleted":false,"title":"6: Day-to-Day Engineering","dir":"ltr"},{"path":"/nativeclient/day-to-day/infrastructure-faq","deleted":false,"title":"Infrastructure FAQ","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/nativeclient/day-to-day/infrastructure-faq\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/nativeclient/day-to-day","parentWuid":"wuid:gx:3d49f915a89367da","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Infrastructure FAQ","locale":"en","wuid":"wuid:gx:71c2eece8f30f0be","revision":21,"path":"/nativeclient/day-to-day/infrastructure-faq","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"infrastructure-faq","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Infrastructure FAQ - The Chromium Projects" />
<meta itemprop="name" content="Infrastructure FAQ - The Chromium Projects" />
<meta property="og:title" content="Infrastructure FAQ - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Infrastructure FAQ - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:73f3badba0b37956" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/nativeclient" dir="ltr">Native Client</A>‎ &gt; ‎<A href="/nativeclient/day-to-day" dir="ltr">6: Day-to-Day Engineering</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Infrastructure FAQ</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><span style="font-size:medium"><div style="font-weight:bold"><b><span style="font-size:medium"><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:500px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Why-do-some-DEPS-.gclient-URLs-use-http:-https:-svn:-"><strong>1 </strong>Why do some DEPS / .gclient URLs use http://, https://, svn:// ?</a></li><li class="goog-toc"><a href="#TOC-How-do-I-make-changes-outside-src-native_client-"><strong>2 </strong>How do I make changes outside src/native_client?</a></li><li class="goog-toc"><a href="#TOC-How-can-I-make-gclient-not-check-everything-out-"><strong>3 </strong>How can I make gclient not check everything out?</a></li><li class="goog-toc"><a href="#TOC-Where-does-the-source-code-to-the-buildbot-live-"><strong>4 </strong>Where does the source code to the buildbot live?</a></li><li class="goog-toc"><a href="#TOC-I-keep-getting-patch-failure-on-the-trybots-what-do-I-do-"><strong>5 </strong>I keep getting patch failure on the trybots, what do I do?</a></li><li class="goog-toc"><a href="#TOC-I-get-strange-error-messages-when-compiling-on-Windows-what-do-I-do-"><strong>6 </strong>I get strange error messages when compiling on Windows, what do I do?</a></li><li class="goog-toc"><a href="#TOC-The-toolchain-in-native_client-appears-to-be-out-of-date.-How-do-I-safely-update-it-"><strong>7 </strong>The toolchain in native_client appears to be out of date.  How do I safely update it?</a></li></ol></div></div></div></div></span></b></div><span style="font-weight:800"><br /></span></span><h3><a name="TOC-Why-do-some-DEPS-.gclient-URLs-use-http:-https:-svn:-"></a><b><span style="font-size:medium">Why do some DEPS / .gclient URLs use http://, https://, svn:// ?</span></b></h3><div>We would like .gclient files to function correctly for users both inside and outside Google.</div><div>In order to facilitate this, whenever a DEPS file lists repositories, read-only publicly accessible URLs are preferred.</div><div>These typically being with http://</div><div>For example:</div><div>   <font face="courier new, monospace">http://src.chromium.org/chrome/trunk/base</font> - <i>read-only URL for base from chromium.</i></div><div>   <font face="courier new, monospace">http://nativeclient.googlecode.com/svn/trunk/src/native_client</font> - read-only nacl main repo</div><div>Sometimes svn:// and https:// URLs are used.</div><div>There are two main reasons:</div><div><ul><li>To specify checking out a writable svn client <u>inside a .gclient file</u></li><li>To pull in an internal only writable repository inside a DEPS file (since it's internal you can assume it can always be checked out writable).</li></ul><div>Google Code (nativeclient, naclport, etc) only supports http:// and https://.</div><div>Chromium's primary svn mirror (src.chromium.org) does http:// only.</div><div>Chromium's svn servers (svn.chromium.org, chrome-svn) support only svn://.</div><div><br /></div><h3><a name="TOC-How-do-I-make-changes-outside-src-native_client-"></a><b><span style="font-size:medium">How do I make changes outside src/native_client?</span></b></h3></div><div>If the repository is internal only, make changes as usual, use gcl in each repository.</div><div>You can use <u>svn info</u> to get information about the repository you're currently in.</div><div>For public repositories, you may need to make sure you've got a writable client.</div><div>(gclient can use svn switch to switch from read-only to writable in most cases preserving patches).</div><div>To make a particular repository checkout writable, add a section like the following to you .gclient file:</div><div><div>  <font face="'courier new', monospace">  "custom_deps" : {</font></div><div><font face="'courier new', monospace">      "native_client/third_party/foo": "https://nativeclient.googlecode.com/svn/trunk/deps/third_party/foo",</font></div></div><div><font face="'courier new', monospace">    },</font></div><div>This overrides the URL specified for foo in native_client/DEPS</div><div><br /></div><h3><a name="TOC-How-can-I-make-gclient-not-check-everything-out-"></a><b><span style="font-size:medium">How can I make gclient not check everything out?</span></b></h3><div>Modify your .gclient file to add a custom_deps section, listing None for the paths to exclude:</div><div><div> <font face="'courier new', monospace">   "custom_deps" : {</font></div><div><font face="'courier new', monospace">      "src/data/esctf": None,</font></div><div><font face="'courier new', monospace">      "src/data/mozilla_js_tests": None,</font></div><div><font face="'courier new', monospace">      "src/data/page_cycler": None,</font></div><div><font face="'courier new', monospace">      "src/data/tab_switching": None,</font></div><div><font face="'courier new', monospace">      "src/data/saved_caches": None,</font></div><div><font face="'courier new', monospace">      "src/data/selenium_core": None,</font></div><div><font face="'courier new', monospace">      "src/tools/grit/grit/test/data": None,</font></div><div><font face="'courier new', monospace">    }</font></div></div><div><br /></div><div><b>Note:</b> the above instruction is not useful because most of the checkout time is consumed by downloading all the necessary toolchains and unpacking them. To manually disable one of the toolchains from downloading, first download all of them in the initial checkout. </div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>shell$ ls native_client/toolchain</code></div><div><div><code>linux_arm-trusted</code></div><div><code>linux_x86</code></div><div><code>linux_x86_newlib</code></div><div><code>pnacl_linux_x86_64</code></div><div><code>pnacl_linux_x86_64_glibc</code></div><div><code>pnacl_linux_x86_64_newlib</code></div><div><code>pnacl_translator</code></div></div></div><div><br /></div><div>To disable updating one of them, for example, <font face="courier new, monospace">pnacl_linux_x86_64</font>, change the test in file:</div><div><div class="sites-codeblock sites-codesnippet-block"><code>shell$ echo manual &gt; native_client/toolchain/pnacl_linux_x86_64/SOURCE_URL</code></div></div><div>All subsequent gclient syncs would (hopefully) assume that this toolchain is up-to-date.</div><div><br /></div><h3><a name="TOC-Where-does-the-source-code-to-the-buildbot-live-"></a><b><span style="font-size:medium">Where does the source code to the buildbot live?</span></b></h3><div>It is located in <font face="courier new, monospace">http://src.chromium.org/chrome/trunk/tools/build</font></div><div>NativeClient and other projects are mixed together. The files you mainly care about for nacl are:</div><div><font face="courier new, monospace">  master.client.nacl*</font></div><div><span style="font-family:courier new,monospace">  scripts/master/factory/nacl_*.py</span></div><div><div>There are also some internal files, which are located in the corresponding internal location under scripts/master-internal.</div></div><div>Note: you usually do not need to change the buildbot scripts</div><div><br /></div><h3><a name="TOC-I-keep-getting-patch-failure-on-the-trybots-what-do-I-do-"></a><span style="font-size:medium"><b>I keep getting patch failure on the trybots, what do I do?</b></span></h3><div>Patches typically fail on the trybots because of version mismatch between what is in the patch and the revision that the trybot wants to patch against.</div><div>If your client is really old, do a gclient update before submitting try jobs to bring it in sync.</div><div>The trybot uses http://nativeclient-status.appspot.com/lkgr (last known good revision), to decide what to patch against.</div><div>This is intended to allow you to submit try jobs, even when the tree is red.</div><div>If you ever need to apply a patch which does not work against the default on the try bot, you can add various flags to gcl try:</div><div><ul><li>-r REV#  -- patch against a specific revision</li><li>-r HEAD -- patch against tip of trunk</li><li>-c -- clobber the build before applying the patch (of limited use for nacl, but useful for chromium)</li></ul></div><h3><a name="TOC-I-get-strange-error-messages-when-compiling-on-Windows-what-do-I-do-"></a><b><span style="font-size:medium">I get strange error messages when compiling on Windows, what do I do?</span></b></h3><div>Be sure to install all the service packs listed for chromium:</div><div>http://dev.chromium.org/developers/how-tos/build-instructions-windows</div><div><br /></div><h3><a name="TOC-The-toolchain-in-native_client-appears-to-be-out-of-date.-How-do-I-safely-update-it-"></a><b><span style="font-size:medium">The toolchain in native_client appears to be out of date.  How do I safely update it?</span></b></h3><div><p><font face="arial, sans-serif" size="2">If you make changes to the untrusted or shared code, you need to update the toolchain revision(s) after your change is committed and the toolchain build is green. (If the toolchain build is red, you will need to check in a fix right away or simply rollback your change).<br /><br />
For example, we updated the ppapi revision in DEPS, which required updates to the code under src/shared. This needs a toolchain revision update. So we have:<br />PPAPI DEPS revision: <a href="http://src.chromium.org/viewvc/native_client?view=rev&amp;revision=3418">http://src.chromium.org/viewvc/native_client?view=rev&amp;revision=3418</a><br />Follow-up fix revision: <a href="http://src.chromium.org/viewvc/native_client?view=rev&amp;revision=3421">http://src.chromium.org/viewvc/native_client?view=rev&amp;revision=3421</a><br />
<br />There are two families of toolchains that generally need to be updated in nactive_client/DEPS: <code>arm_toolchain_version</code> and <code>x86_toolchain_version</code>.  It is recommended to update them both to the same revision at a time.<br /><br />
To perform this straightforward toolchain revision update:<br /></font></p><ul><li><font face="arial, sans-serif" size="2">go to <a href="http://build.chromium.org/p/client.nacl.toolchain/console">http://build.chromium.org/p/client.nacl.toolchain/console</a> (linked under "Toolchain" header on <a href="http://build.chromium.org/p/client.nacl/console">http://build.chromium.org/p/client.nacl/console</a>):</font></li><li><font face="arial, sans-serif" size="2">find the latest green row and let <code>$REV</code> to be the corresponding SVN revision to that row</font></li><li><font face="arial, sans-serif" size="2">check for toolchain tarballs availability:<br /><div class="sites-codeblock sites-codesnippet-block"><code>shell&gt; cd native_client/</code><br /><code>shell&gt; python build/find_toolchain_revisions.py -s $REV</code></div></font></li><li><font face="arial, sans-serif" size="2">if all tarballs are available, you will get the output:<br /><div class="sites-codeblock sites-codesnippet-block"><code>Searching for available toolchains...</code><br /><code>checking r$REV: x86: OK, arm: OK</code></div></font></li><li><font face="arial, sans-serif" size="2">The script will go and check the older revisions, interrupt it as soon as you do not need more results</font></li><li><font face="arial, sans-serif" size="2">This revision <code>$REV</code> can now be used in <code>native_client/DEPS</code> for both toolchain versions.</font></li><li><font face="arial, sans-serif" size="2">If some tarballs are not available, the output would be something like:<br /><div class="sites-codeblock sites-codesnippet-block"><code>checking r$REV: x86: missing win_x86, arm: missing pnacl_linux_x86_64_newlib</code></div></font></li><li><font face="arial, sans-serif" size="2">When found a revision with all toolchains available, do not forget to check that all builds in the "Toolchain" buildbot console are green for that row.  Sometimes they can be red for reasons irrelevant to toolchain correctness, you may try those if you are brave.</font></li></ul><font face="arial, sans-serif" size="2">
<br />To perform toolchain revision update for only one family (i.e. <code>arm_toolchain_version</code> or <code>x86_toolchain_version</code>) you will need only the 'OK' for that family in toolchain tarballs availability and buildbot green status only of a subset of the rows (subject to frequent change):<br /></font><ul><li><font face="arial, sans-serif" size="2">arm_toolchain_version</font></li><ul><li><font face="arial, sans-serif" size="2">linux-pnacl-x86_64</font></li><li><font face="arial, sans-serif" size="2">linux-armtools-x86_32</font></li><li><font face="arial, sans-serif" size="2">linux-pnacl-x86_32</font></li><li><font face="arial, sans-serif" size="2">mac-pnacl-x86_32</font></li></ul><li><font face="arial, sans-serif" size="2">x86_toolchain_version</font></li><ul><li><font face="arial, sans-serif" size="2">win7-toolchain_x86</font></li><li><font face="arial, sans-serif" size="2">mac-toolchain_x86</font></li><li><font face="arial, sans-serif" size="2">lucid64-toolchain_x86</font></li><li><font face="arial, sans-serif" size="2">win7-glibc</font></li><li><font face="arial, sans-serif" size="2">mac-glibc</font></li><li><font face="arial, sans-serif" size="2">lucid64-glibc</font></li></ul></ul><font face="arial, sans-serif" size="2">TODO: describe the update procedure for NaCl SDK (requires updating toolchain DEPS in the Chrome tree, pushing the new manifest).<br /></font></div><div><font face="arial, sans-serif" size="2"><br /></font></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/nativeclient/day-to-day/infrastructure-faq">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq92aKM-0RDcFdid2Ydci9aVgnv-o_hhhe2YooLgAtAXB73yeK0c5yFqf8fJ04BEVnF3-laE9uUGtCOfKZRAlzswoyTEzfC0Xi-sMf-iDzQIZJ6SrOo/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
