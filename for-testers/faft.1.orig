<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/for-testers","deleted":false,"title":"For Testers","dir":"ltr"},{"path":"/for-testers/faft","deleted":false,"title":"FAFT","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/for-testers/faft\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/for-testers","parentWuid":"wuid:gx:2ad851395cafd499","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"FAFT","locale":"en","wuid":"wuid:gx:1ec0e4c13f9bdf2b","revision":15,"path":"/for-testers/faft","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"faft","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="FAFT - The Chromium Projects" />
<meta itemprop="name" content="FAFT - The Chromium Projects" />
<meta property="og:title" content="FAFT - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>FAFT - The Chromium Projects</title>
<meta itemprop="image" content="https://www.chromium.org/_/rsrc/1398703589148/for-testers/faft/FAFT%20Hardware%20Setup%20Layout.png" />
<meta property="og:image" content="https://www.chromium.org/_/rsrc/1398703589148/for-testers/faft/FAFT%20Hardware%20Setup%20Layout.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/for-testers" dir="ltr">For Testers</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">FAFT</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div></div>
<div><span style="background-color:transparent"><font size="3"><b>
<div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Overview"><strong>1 </strong>Overview</a></li><li class="goog-toc"><a href="#TOC-Setting-up-the-Hardware"><strong>2 </strong>Setting up the Hardware</a></li><li class="goog-toc"><a href="#TOC-Preliminary-Tasks"><strong>3 </strong>Preliminary Tasks</a></li><li class="goog-toc"><a href="#TOC-Running-Test-Suites"><strong>4 </strong>Running Test Suites</a></li><li class="goog-toc"><a href="#TOC-FAQ"><strong>5 </strong>FAQ</a></li></ol></div></div></div></div></div>
</b></font></span>
<h2><a name="TOC-Overview"></a><span style="background-color:transparent"><b><font size="4">Overview</font></b></span></h2>
</div>
<div>
<p style="line-height:20px"><font face="arial, sans-serif">FAFT (Fully Automated Firmware Tests) is a collection of tests and related infrastructure that exercise and verify capabilities of Chrome OS. The features tested by FAFT are implemented through low-level software (firmware/BIOS) and hardware. FAFT evolved from SAFT (Semi-Automated Firmware Tests) and you can locate <a href="https://chromium.googlesource.com/chromiumos/third_party/autotest/+/master/server/site_tests/">tests in the FAFT suite in the Autotest tree</a> as directories with the prefix </font><font face="courier new, monospace">firmware_.</font><font face="arial, sans-serif"> The founding principles of FAFT are:</font></p>
<ul><li><span style="background-color:transparent;font-family:arial,sans-serif;font-size:10pt">Fully automated, no human intervention required</span></li>
<li><span style="background-color:transparent;font-family:arial,sans-serif;font-size:10pt">Real test of physical hardware, like USB plug-in, Ctrl-D key press</span></li>
<li><span style="background-color:transparent;font-family:arial,sans-serif;font-size:10pt">High test coverage of complicated verified boot flows</span></li>
<li><span style="background-color:transparent;font-family:arial,sans-serif;font-size:10pt">Easy to integrate with existing test infrastructure, i.e. deploy to test lab, run remotely, continuous testing, etc.</span></li></ul>
<font face="arial, sans-serif">To access some of these low-level capabilities, the tests require a <a href="https://www.chromium.org/chromium-os/servo">servo board</a>. You connect the servo board directly to the test device to enable access to low-level system hardware interfaces, as well as staging areas for backup software (on a USB drive). During testing the tests may corrupt various states in the EC, firmware, and kernel to verify recovery processes. In these cases you can almost always use FAFT to restore the system to its original state.</font>
<p><font face="arial, sans-serif"><span style="line-height:20px">The FAFT suite of tests can be invoked locally or remotely. This document describes how to set up the local configuration only. In remote configurations for automated test labs, a beagleboard device is required to enable communication between the device and servo board, and the test server.</span></font></p>
<p style="line-height:20px"><font face="arial, sans-serif">The </font><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt">Chrome OS </span><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt">firmware/BIOS control (among other things) initial setup of the system hardware during the boot process. They are necessarily complicated, providing reliability against various corruption scenarios and security to ensure trusted software is controlling the system. Currently, the purpose of FAFT is to exercise EC firmware and BIOS firmware (such as U-Boot).</span></p>
</div>
<h2><a name="TOC-Setting-up-the-Hardware"></a><b><font size="4">Setting up the Hardware</font></b></h2>
<div><font face="arial, sans-serif"><span style="line-height:20px"><font size="2">The most common hardware configuration for running FAFT includes:</font></span></font></div>
<div>
<ul><li><span style="font-size:small;line-height:20px;font-family:arial,sans-serif;background-color:transparent">a test controller (your host workstation with a working chroot environment)</span></li>
<li><span style="font-size:small;line-height:20px;font-family:arial,sans-serif;background-color:transparent">the test device (a device that can boot Chrome OS)</span></li>
<li><span style="font-size:small;line-height:20px;font-family:arial,sans-serif;background-color:transparent">a servo board</span></li>
<li><span style="font-size:small;line-height:20px;font-family:arial,sans-serif;background-color:transparent">related connectors</span></li></ul>
</div>
<div><br />
</div>
<div><span style="font-family:Droid Sans,serif;line-height:20px"><font size="2">
<div style="display:block;text-align:left"><a href="https://www.chromium.org/for-testers/faft/FAFT%20Hardware%20Setup%20Layout.png?attredirects=0" imageanchor="1"><img border="0" src="https://www.chromium.org/_/rsrc/1398703589148/for-testers/faft/FAFT%20Hardware%20Setup%20Layout.png" /></a></div>
<br />
</font></span></div>
<div></div>
<div>The following photo shows the details of how to connect the servo board to the test controller, test device, and network:</div>
<div>
<div style="display:block;text-align:left;margin-right:auto"><a href="https://www.chromium.org/for-testers/faft/Servo2_with_labels.jpg?attredirects=0" imageanchor="1"><img border="0" height="300" src="https://www.chromium.org/_/rsrc/1398703667337/for-testers/faft/Servo2_with_labels.jpg?height=300&amp;width=400" width="400" /></a></div>
<h2 style="display:block;text-align:left"><a name="TOC-Preliminary-Tasks"></a>
<div style="font-size:13px;font-weight:normal"><b style="background-color:transparent;font-size:10pt"><font size="4">Preliminary Tasks</font></b></div>
</h2>
</div>
<p><font face="arial, sans-serif" size="2">After the hardware components are correctly configured, prepare and install a test Chromium OS image:</font></p>
<div style="display:block;text-align:left">
<ol><li>Build the binary (<font face="courier new, monospace">chromiumos_test_image.bin</font>) with <font face="courier new, monospace">build_image test,</font> or fetch the file from a buildbot.</li>
<li>Load the test image onto a USB drive.</li>
<li>Insert the USB drive into the servo board, as shown in the photo. </li>
<li>Install the test image onto the internal disk by booting from the USB drive and running <font face="courier new, monospace">chromeos-install</font>.</li>
</ol>
</div>
<div style="display:block;text-align:left">
<div style="line-height:20px"><font face="arial, sans-serif" size="2">To run FAFT you use the <a href="http://www.chromium.org/chromium-os/testing/test_that-basic-usage">test_that</a> tool, which does not automatically start a servod process for communicating with the servo board. Before running any tests:</font></div>
<div>
<ol style="line-height:20px"><li><span style="font-family:arial,sans-serif;font-size:small;background-color:transparent">Run </span><span style="color:rgb(0,96,0);font-size:small;background-color:transparent"><font face="courier new, monospace">$ sudo servod --board=$BOARD</font></span><span style="color:rgb(0,96,0);font-family:arial,sans-serif;font-size:small;background-color:transparent"> </span><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt">where </span><span style="background-color:transparent;font-size:10pt"><font face="courier new, monospace">$BOARD</font></span><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt"> is the code name of the board you are testing. For example: </span><span style="font-size:small;background-color:transparent;color:rgb(0,96,0)"><font face="courier new, monospace">$ sudo servod --board=lumpy</font></span><span style="font-size:small;background-color:transparent;color:rgb(0,96,0);font-family:arial,sans-serif"> </span></li>
<li><span style="background-color:transparent;font-size:10pt;font-family:arial,sans-serif">Run the </span><span style="background-color:transparent;font-size:10pt"><font face="courier new, monospace">firmware_FAFTSetup</font><font face="arial, sans-serif"> test to</font></span><span style="background-color:transparent;font-size:10pt;font-family:arial,sans-serif"> verify basic functionality and ensure that your setup is correct. If test_that is in</span><span style="background-color:transparent;font-size:10pt"><font face="arial, sans-serif"> </font><font face="courier new, monospace">/usr/bin</font></span><span style="background-color:transparent;font-size:10pt;font-family:arial,sans-serif">, the syntax is </span><font face="courier new, monospace"><span style="background-color:transparent;font-size:10pt"><font size="2"><code>$ /usr/bin/test_that --board=$BOARD $REMOTE_IP </code></font></span><span style="background-color:transparent;font-size:10pt;white-space:pre-wrap;line-height:normal"><font size="2"><code>firmware_FAFTSetup</code></font></span></font></li>
</ol>
</div>
</div>
<div style="display:block;text-align:left">
<div style="line-height:20px"></div>
<div style="line-height:20px">
<h2 style="line-height:normal"><a name="TOC-Running-Test-Suites"></a><font size="4">Running Test Suites</font></h2>
<p><font size="2">To run FAFT on a Chromebook:</font></p>
</div>
<div>
<ol><li style="line-height:20px"><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt">Run the entire </span><span style="background-color:transparent;font-size:10pt"><font face="courier new, monospace">faft_bios</font></span><span style="font-family:arial,sans-serif;background-color:transparent;font-size:10pt"> suite:</span></li>
</ol>
</div>
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px">
<div style="display:block;text-align:left">
<div><span style="color:rgb(0,96,0);font-family:monospace;line-height:20px">$ /usr/bin/test_that --board=$BOARD $REMOTE_IP suite:faft_bios</span></div>
</div>
</blockquote>
<div style="display:block;text-align:left">
<div>
<ol start="2"><li style="line-height:20px"><span style="background-color:transparent;font-size:10pt;font-family:arial,sans-serif">Run the entire<b> </b></span><span style="background-color:transparent;font-size:10pt"><font face="courier new, monospace">faft_ec</font></span><span style="background-color:transparent;font-size:10pt;font-family:arial,sans-serif"><b> </b>suite:</span></li>
</ol>
</div>
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px">
<div style="display:block;text-align:left">
<div><span style="line-height:20px"><font face="arial, sans-serif"><code>$ /usr/bin/test_that --board=$BOARD $REMOTE_IP suite:faft_ec</code></font></span></div>
</div>
</blockquote>
<div style="display:block;text-align:left">
<p><span style="font-family:Times New Roman;text-align:-webkit-auto"><span style="font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap;font-weight:normal"><font size="2">To run FAFT on a Chromebox or Chromebase, a </font></span></span><a href="http://www.google.com/url?q=http%3A%2F%2Fwww.hagstromelectronics.com%2Fproducts%2Fusbkm232.html&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzdlz5LHuzhyH0dCklA57f60223exw" style="background-color:transparent;font-size:13px;font-weight:normal">USB-KM232 cable</a><span style="background-color:transparent;font-size:13px;font-weight:normal"> and a </span><a href="https://www.google.com/search?q=TRENDnet+USB+2.0+to+RS-232+DB9+Serial+Converter%2C+TU-S9&amp;oq=TRENDnet+USB+2.0+to+RS-232+DB9+Serial+Converter%2C+TU-S9&amp;aqs=chrome..69i57j0.367j0j4&amp;sourceid=chrome&amp;es_sm=94&amp;ie=UTF-8#q=USB+2.0+to+RS-232+DB9+Serial+Converter%2C+TU-S9" style="background-color:transparent;font-size:13px;font-weight:normal">RS232-USB</a><span style="background-color:transparent;font-size:13px;font-weight:normal"> cable are required.</span></p>
<ol><li><span style="background-color:transparent;font-size:10pt;font-weight:normal">Connect the USB-KM232 to the RS232-to-USB cable, then connect the RS232 side to the test controller. </span></li>
<li><span style="background-color:transparent;font-size:10pt;font-weight:normal">Connect the USB side to the Chrome device.</span></li>
<li><span style="background-color:transparent;font-size:10pt;font-weight:normal">Check the device on the host by running </span><font face="courier new, monospace" style="background-color:transparent;font-size:10pt;font-weight:normal">tail -f /var/log/messages</font><font face="arial, sans-serif" style="background-color:transparent;font-size:10pt;font-weight:normal">.  </font><span style="background-color:transparent;font-size:10pt;font-weight:normal">It should be named </span><font face="courier new, monospace" style="background-color:transparent;font-size:10pt;font-weight:normal">/dev/ttyUSB0</font><span style="background-color:transparent;font-size:10pt;font-weight:normal">. </span></li>
<li><span style="background-color:transparent;font-size:10pt;font-weight:normal">Assign this value to the </span><font face="courier new, monospace" style="background-color:transparent;font-size:10pt;font-weight:normal">USBKM232_UART_DEVICE</font><span style="background-color:transparent;font-size:10pt;font-weight:normal"> environment variable and make the drive partition writeable. For example:</span></li>
</ol>
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><code>$ export USBKM232_UART_DEVICE=/dev/ttyUSB0<br />
</code><code>$ sudo chmod a+rw $USBKM232_UART_DEVICE</code></blockquote>
<div style="display:block">
<ol start="5"><li><span style="background-color:transparent;font-size:10pt">When starting servod, specify the</span><font face="courier new, monospace" style="background-color:transparent;font-size:10pt"> --usbkm232</font><span style="background-color:transparent;font-size:10pt"> argument. </span></li>
</ol>
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px">
<div style="display:block"><font color="#38761d" style="font-family:courier new,monospace;font-size:medium"><code>$ </code></font><span style="font-family:courier new,monospace;font-size:medium"><font color="#38761d"><code>sudo servod --board=$BOARD --usbkm232=$USBKM232_UART_DEVICE</code></font><font color="#cc0000"><code> </code></font></span></div>
</blockquote>
<div style="display:block"></div>
<div style="display:block">
<ol start="6"><li><span style="background-color:transparent;font-size:10pt">The </span><font face="courier new, monospace" style="background-color:transparent;font-size:10pt">test_that</font><span style="background-color:transparent;font-size:10pt"> command line stays the same:</span></li>
</ol>
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px">
<div style="display:block"><font face="arial, sans-serif"><code>$ /usr/bin/test_that --board=$BOARD $REMOTE_IP</code><code> f:.*DevMode/control$</code></font></div>
</blockquote>
<div style="display:block">  
<h2><a name="TOC-FAQ"></a><span style="font-size:large;background-color:transparent">FAQ</span></h2>
<div><span style="line-height:20px"><font face="arial, sans-serif">Q: All of my FAFT tests are failing. What should I do?</font></span></div>
<div><span style="line-height:20px"><font face="arial, sans-serif">A: Run <code>firmware_FAFTSetup</code> as a single test. Once it fails, check the log and determine which step failed and why.</font></span></div>
<div><span style="line-height:20px"><font face="arial, sans-serif"><br />
</font></span></div>
<div><span style="line-height:20px"><font face="arial, sans-serif">Q: A few of my FAFT tests failed, but most tests are passing. What should I do?</font></span></div>
<div>A: Re-run the failed tests by themselves and they may pass. Sometimes tests fail due to flaky infrastructure or other non-firmware bugs.</div>
<div><br />
</div>
<div>Q: I still need help. Who can help me?</div>
<div>A: Try joining the <a href="https://groups.google.com/a/chromium.org/forum/#!forum/faft-users">FAFT-users chromium.org mailing list</a> and asking for help. Be sure to include logs and test details in your request for help.</div>
<div><br />
</div>
<div>Q: I got an error while running FAFT: <font face="courier new, monospace"><span style="color:rgb(34,34,34);background-color:transparent;font-size:10pt">AutoservRunError: command execution error: </span><span style="color:rgb(34,34,34);background-color:transparent;font-size:10pt"> </span><span style="color:rgb(34,34,34);background-color:transparent;font-size:10pt">sudo -n which flash_ec</span></font><span style="background-color:transparent;color:rgb(34,34,34);font-family:arial,sans-serif;font-size:10pt"> . What's wrong?</span></div>
<div><span style="background-color:transparent;color:rgb(34,34,34);font-family:arial,sans-serif;font-size:10pt">A: Run </span><span style="color:rgb(34,34,34);background-color:transparent;font-size:10pt"><font face="courier new, monospace">sudo emerge chromeos-ec</font></span><span style="color:rgb(34,34,34);font-family:arial,sans-serif;background-color:transparent;font-size:10pt"> inside your chroot.</span></div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/for-testers/faft">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9hbmEwPE-yVOVLlv3gyw_fcDgJgNa7Yg6mlJoQinXcbi8ZiWe8-ddqQH6K680v5I0scDFqEfEuIUl6ZV27D7EV3-FnURH2X9mzr9CKZIZW1KWEJtY/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
