<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/shell-style-guidelines","deleted":false,"title":"Shell Style Guidelines","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/shell-style-guidelines\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os","parentWuid":"wuid:gx:83df2ab1f8880ba","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Shell Style Guidelines","locale":"en","wuid":"wuid:gx:7b94740af090a290","revision":13,"path":"/chromium-os/shell-style-guidelines","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"shell-style-guidelines","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Shell Style Guidelines - The Chromium Projects" />
<meta itemprop="name" content="Shell Style Guidelines - The Chromium Projects" />
<meta property="og:title" content="Shell Style Guidelines - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Shell Style Guidelines - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/chromium-os" dir="ltr">Chromium OS</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Shell Style Guidelines</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Introduction"><strong>1 </strong>Introduction</a></li><li class="goog-toc"><a href="#TOC-Official-Style-Guide"><strong>2 </strong>Official Style Guide</a></li><li class="goog-toc"><a href="#TOC-Standard-Selection"><strong>3 </strong>Standard Selection</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-POSIX-Shell-Restrictions"><strong>3.1 </strong>POSIX Shell Restrictions</a></li></ol></li><li class="goog-toc"><a href="#TOC-Beyond-The-Guide"><strong>4 </strong>Beyond The Guide</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Arithmetic"><strong>4.1 </strong>Arithmetic</a></li><li class="goog-toc"><a href="#TOC-Extended-Printing-echo-"><strong>4.2 </strong>Extended Printing (echo)</a></li><li class="goog-toc"><a href="#TOC-Default-Assignments"><strong>4.3 </strong>Default Assignments</a></li><li class="goog-toc"><a href="#TOC-Argument-Option-Parsing"><strong>4.4 </strong>Argument/Option Parsing</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-getopts"><strong>4.4.1 </strong>getopts</a></li><li class="goog-toc"><a href="#TOC-shflags"><strong>4.4.2 </strong>shflags</a></li></ol></li></ol></li></ol></div></div></div></div>
<h2><a name="TOC-Introduction"></a>Introduction</h2>
<p>You should follow this guide for all shell source code that is created as part of the Chromium OS project i.e. code that is used on the device and src/scripts/.  You may not like some bits of it, but you still need to follow it.  In doing so, you ensure that others can work with your code.</p>
<p>This guide may be ignored if you are working on code that is part of an open source project that already conforms to a different style i.e. generally all of the ebuilds &amp; eclasses.</p>
<hr />
<h2><a name="TOC-Official-Style-Guide"></a>Official Style Guide</h2>
<p>The <a href="http://google-styleguide.googlecode.com/svn/trunk/shell.xml">Google Shell Style guide</a> is the official shell style guide for Chromium OS original code.  Note that the guide often has "soft" recommendations that make it sound like it is permissible to ignore its recommendations.  This is due to the guide attempting to cater to many groups (who have varying preferences on what is "correct") and does not apply to the Chromium OS project.  If the guide covers a particular bit of code, then you should be following it.</p>
<hr />
<h2><a name="TOC-Standard-Selection"></a>Standard Selection</h2>
<p>There are two standards that are permissible: <a href="http://www.gnu.org/software/bash/">GNU Bash</a> and <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html">POSIX shell</a>.  When writing code that is used on developer systems or dev/test Chromium OS images, always use bash.  For scripts that are used on the release Chromium OS image, you should be using POSIX shell.</p>
<p>Upstart jobs (.conf files in /etc/init/) require the POSIX shell standard.</p>
<p>The shebang (the first line of the file) should always reflect the language.  GNU Bash scripts must use <code>#!/bin/bash</code>; POSIX shell scripts must use <code>#!/bin/sh</code>.</p>
<h3><a name="TOC-POSIX-Shell-Restrictions"></a>POSIX Shell Restrictions</h3>
<p>Various bash constructs can't be used in POSIX-conforming shell scripts.  If a construct isn't described in the POSIX shell standard, it isn't allowed in POSIX shell scripts.  Below is a list of bash-specific constructs that have been sources of trouble in the past:</p>
<div>
<ul><li>Tests using the double-bracket test operator, e.g. <code>[[ "$SOMEVAR" == "test value" ]]</code></li>
<li>Arrays</li>
<li>The <code>declare</code> built-in command</li>
<li>Using the <code>function</code> keyword to define a shell function (you should never use this though, even with bash)</li>
<li>Brace expansion, e.g. <code>{a,b}{c,d}</code></li></ul>
<p>The list above isn't comprehensive; to be sure, you must consult the POSIX standard.</p>
</div>
<hr />
<h2><a name="TOC-Beyond-The-Guide"></a>Beyond The Guide</h2>
<p>The Google Shell Style guide leaves a lot of things unspecified.  Here we will covers many things it does not.</p>
<h3><a name="TOC-Arithmetic"></a>Arithmetic</h3>
<p>Never use the <code>let</code> command, nor use the <code>$[...]</code> syntax, nor use the shell helper <code>expr</code>.  Instead, use <code>$((...))</code> to perform all math operations in conjunction with the colon null utility.</p>
<p>When using variables, avoid using the <code>${var}</code> form when possible.  The shell knows to look up <code>var</code> as <code>${var}</code> for you and omitting the <code>${...}</code> leads to cleaner code. Note: this does not mean you should avoid using <code>${var}</code> in non-arithmetic code.</p>
<div class="sites-codeblock sites-codesnippet-block">
<code># To increment the variable "i" by one.  We avoid the ++ operator<br />
# as it is not as portable, and this version isn't much longer.<br />
# Note that:<br />
#  - We do not write ${i} or $i.<br />
#  - We put a space after the (( and before the )).<br />
: $(( i += 1 ))</code><br />
<br />
<code># To decrement the variable "i" by one:<br />
: $(( i -= 1 ))<br />
<br />
# Do some complicated math.<br />
min=5<br />
sec=30<br />
echo $(( (min * 60) + sec ))</code></div>
<h3><a name="TOC-Extended-Printing-echo-"></a>Extended Printing (echo)</h3>
<p>People often want to print out a string but omit the trailing new line.  Or print a string with escape sequences (like colors or tabs).  You should never use <code>echo</code> for this.  Instead, use <code>printf</code>.  In other words, when you use <code>echo</code>, avoid all options like <code>-e</code> or <code>-n</code>.  The <code>printf</code> command is both powerful &amp; portable, and has well defined behavior in all shell environments.</p>
<div class="sites-codeblock sites-codesnippet-block">
<code># Print out a string without a trailing newline.<br />
printf '%s' "${some_var}"<br />
<br />
# Print out a string and interpret escape sequences it contains.<br />
printf '%b\n' "${some_var}"<br />
<br />
# Print escape sequences in place.<br />
printf '\tblah: run it and believe\n'</code>
</div>
<h3><a name="TOC-Default-Assignments"></a>Default Assignments</h3>
<p>Sometimes you want to set a variable to something if it isn't already set.  People will try to test for this case using the <code>-z</code> operator (<code>[[ -z ${foo} ]]</code>).  This leads to duplicated/multiline code when it can all be accomplished in one line.  It might also not be correct if you want to accept an empty string as a valid input.</p>
<div class="sites-codeblock sites-codesnippet-block">
<code># Assign "bar" to the variable "foo" if it is not set, or if it is set to "".<br />
# Note: the quotes are not required here, but people seem to prefer it.<br />
: ${foo:="bar"}<br />
<br />
# Assign "bar" to the variable "foo" only if it is not set.<br />
# If bar is already set to "", do nothing.<br />
: ${foo="bar"}</code>
</div>
<h3><a name="TOC-Argument-Option-Parsing"></a>Argument/Option Parsing</h3>
<p>Often times you want your script to accept flags like --foo or -q.  There are three options depending on how much flag parsing you need to do:</p>
<ul><li>Parse the arguments yourself and scan for options</li>
<ul><li>Should be avoided for anything beyond one or two simple flags</li></ul>
<li>Use the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/getopts.html">getopts</a> built-in helper</li>
<ul><li>Preferred when you only have short options (e.g. -q and -v and -h vs --quiet and --version and --help)</li>
<li>You have to implement the help (usage) flag yourself</li></ul>
<li>Use the <a href="https://code.google.com/p/shflags/wiki/Documentation10x">shflags</a> package</li>
<ul><li>Already shipped in the sdk and in board images</li>
<li>Provides clean API for supporting short and long options</li>
<li>Automatic support for help output</li></ul></ul>
<p>Note: there is a getopt program that is provided by the util-linux package, but it should be avoided.  For short options, it doesn't provide any advantage over getopts, and for long options, it doesn't offer the level of functionality that shflags does.</p>
<h4><a name="TOC-getopts"></a>getopts</h4>
<p>Here is an example of using getopts.  Note the number of things required to be implemented by you.</p>
<div class="sites-codeblock sites-codesnippet-block">
<code>#!/bin/sh<br />
<br />
die() {<br />
  echo "${0##*/}: error: $*" &gt;&amp;2<br />
  exit 1<br />
}<br />
<br />
usage() {<br />
  echo "Usage: foo [options] [args]<br />
<br />
This does something useful!<br />
<br />
Options:<br />
  -o &lt;file&gt;   Write output to &lt;file&gt;<br />
  -v          Run verbosely<br />
  -h          This help screen"<br />
  exit 0<br />
}<br />
<br />
main() {<br />
  local flag<br />
  local verbose="false"<br />
  local out="/dev/stdout"<br />
<br />
  while getopts 'ho:v' flag; do<br />
    case ${flag} in<br />
      h) usage ;;<br />
      o) out="${OPTARG}" ;;<br />
      v) verbose="true" ;;<br />
      *) die "invalid option found" ;;<br />
    esac<br />
  done<br />
<br />
  if [[ ${verbose} == "true" ]]; then<br />
    echo "verbose mode is enabled!"<br />
  else<br />
    echo "will be quiet"<br />
  fi<br />
<br />
  if [[ -z ${out} ]]; then<br />
    die "-o flag is missing"<br />
  fi<br />
  echo "writing output to: '${out}'"<br />
<br />
  # Now remaining arguments are in "$@".<br />
  ...<br />
}<br />
main "$@"</code></div>
<h4><a name="TOC-shflags"></a>shflags</h4>
<p>Here is an example of using shflags.  Options are declared &amp; processed up top, but then the layout is like normal.</p>
<div class="sites-codeblock sites-codesnippet-block">
<code>#!/bin/sh<br />
<br />
# This is the path in the sdk and in CrOS boards.<br />
. /usr/share/misc/shflags<br />
<br />
DEFINE_string out '/dev/stdin' 'Write output to this file' 'o'<br />
DEFINE_boolean verbose ${FLAGS_FALSE} 'Enable verbose output' 'v'<br />
<br />
FLAGS_HELP='Usage: foo [options] [args]<br />
<br />
This does something useful!<br />
'<br />
<br />
# Parse command line.<br />
FLAGS "$@" || exit 1<br />
eval set -- "${FLAGS_ARGV}"<br />
<br />
# Only after this point should you enable `set -e` as<br />
# shflags does not work when that is turned on first.<br />
set -e<br />
<br />
die() {<br />
  echo "${0##*/}: error: $*" &gt;&amp;2<br />
  exit 1<br />
}<br />
<br />
main() {<br />
  if [[ ${FLAGS_verbose} -eq ${FLAGS_TRUE} ]]; then<br />
    echo "verbose mode is enabled!"<br />
  else<br />
    echo "will be quiet"<br />
  fi<br />
<br />
  if [[ -z ${FLAGS_out} ]]; then<br />
    die "--out flag is missing"<br />
  fi<br />
  echo "writing output to: '${FLAGS_out}'"<br />
<br />
  # Now remaining arguments are in "$@".<br />
  ...<br />
}<br />
main "$@"</code></div>
<p> </p></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/shell-style-guidelines">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9q4YZZmUwNZVN0kHEUq4qo4zcFzf7T1Z6rKRlJOOLdBJ_LsJWjV-RXRdjGn6CZJcBRsOl-pImsRltY197oOeJBeG18ok1pTwjKloR4Da1NLOWbqMp/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
