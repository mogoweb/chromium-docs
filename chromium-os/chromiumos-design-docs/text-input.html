<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="http://www.chromium.org/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/chromiumos-design-docs","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/chromium-os/chromiumos-design-docs/text-input","deleted":false,"title":"Text Input","dir":"ltr"}];
  var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttp://sites.google.com/a/chromium.org/dev/chromium-os/chromiumos-design-docs/text-input\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"http://csi.gstatic.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["http://www.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["http://www.gstatic.com/sites/p/56e332/system/js/codemirror.js","http://www.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","http://www.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","http://www.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","http://www.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/chromiumos-design-docs","parentWuid":"wuid:gx:2eb69dd73ece341e","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Text Input","locale":"en","wuid":"wuid:gx:a177133edccc1e9","revision":32,"path":"/chromium-os/chromiumos-design-docs/text-input","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"text-input","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Text Input - The Chromium Projects" />
<meta itemprop="name" content="Text Input - The Chromium Projects" />
<meta property="og:title" content="Text Input - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Text Input - The Chromium Projects</title>
<meta itemprop="image" content="http://www.chromium.org/_/rsrc/1259832806496/chromium-os/chromiumos-design-docs/text-input/basic-architecture2.png" />
<meta property="og:image" content="http://www.chromium.org/_/rsrc/1259832806496/chromium-os/chromiumos-design-docs/text-input/basic-architecture2.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="http://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="http://www.chromium.org/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="http://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="http://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../Home.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-os.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../developers/discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../chromium-os.html" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="../chromiumos-design-docs.html" dir="ltr">Design Documents</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Text Input</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="text-input.html#TOC-OBSOLETE:-The-contents-need-to-be-updated"><strong>1 </strong>OBSOLETE: The contents need to be updated</a></li><li class="goog-toc"><a href="text-input.html#TOC-Abstract"><strong>2 </strong>Abstract</a></li><li class="goog-toc"><a href="text-input.html#TOC-Objective"><strong>3 </strong>Objective</a></li><li class="goog-toc"><a href="text-input.html#TOC-Background"><strong>4 </strong>Background</a></li><li class="goog-toc"><a href="text-input.html#TOC-Requirements"><strong>5 </strong>Requirements</a></li><li class="goog-toc"><a href="text-input.html#TOC-Design"><strong>6 </strong>Design</a><ol class="goog-toc"><li class="goog-toc"><a href="text-input.html#TOC-Basic-architecture"><strong>6.1 </strong>Basic architecture</a></li><li class="goog-toc"><a href="text-input.html#TOC-Keyboard-layout:-XKB"><strong>6.2 </strong>Keyboard layout: XKB</a></li><li class="goog-toc"><a href="text-input.html#TOC-Input-method-framework:-IBus"><strong>6.3 </strong>Input method framework: IBus</a></li><li class="goog-toc"><a href="text-input.html#TOC-Conversion-engines"><strong>6.4 </strong>Conversion engines</a></li><li class="goog-toc"><a href="text-input.html#TOC-User-experience"><strong>6.5 </strong>User experience</a></li></ol></li><li class="goog-toc"><a href="text-input.html#TOC-Code-location"><strong>7 </strong>Code location</a><ol class="goog-toc"><li class="goog-toc"><a href="text-input.html#TOC-IBus"><strong>7.1 </strong>IBus</a></li><li class="goog-toc"><a href="text-input.html#TOC-Configuration-dialog-and-language-selector"><strong>7.2 </strong>Configuration dialog and language selector</a></li><li class="goog-toc"><a href="text-input.html#TOC-Candidate-window"><strong>7.3 </strong>Candidate window</a></li></ol></li></ol></div></div></div></div><h2><a name="TOC-OBSOLETE:-The-contents-need-to-be-updated"></a><font color="#ff0000">OBSOLETE: The contents need to be updated</font></h2><h2><a name="TOC-Abstract"></a>Abstract</h2>
<div>
<ul><li>Chromium OS will be internationalized and will support many languages other than English</li>
<li>Chromium OS will support a variety of text input methods to make text entry as easy as possible for non-English languages</li>
<li>End user language and input-method settings are synchronized with the user's profile in the cloud to enable a consistent user experience from any device</li></ul>
<h2><a name="TOC-Objective"></a>Objective</h2>
</div>
<div>Build text input support for Chromium OS to make it well internationalized.</div>
<h2><a name="TOC-Background"></a>Background</h2>
<div>Chromium OS will be supporting multiple languages other than English. Regardless of the UI language (the language shown in menu items and any other strings in Chromium OS), Chromium OS should allow you to type in many languages. We will build text input support for Chromium OS on top of the existing text input technologies available for Linux.</div>
<h2><a name="TOC-Requirements"></a>Requirements</h2>
<div>Chromium OS will provide users several ways to type in text: </div>
<div>
<ul><li><b>Simple Keyboard:</b> Users type in characters directly from the keyboard. Examples: English, German</li>
<li><b>Switchable Keyboard:</b> Users can switch keyboard mappings (for example, Latin/Cyrillic) and directly type in different character sets based on the current mapping. For example, Russian users can switch the keyboard mapping between Cyrillic and Latin to compose bilingual text.</li>
<li><b>Simple IME:</b> Users type in most characters directly using a simple Input Method Editor (IME) that does some minor tasks such as validation, auto-correction, and composition. Examples: Korean, Thai</li>
<li><b>Transliteration IME:</b> Users type in English characters that the Transliteration IME directly converts to native characters. Example: Indic</li>
<li><b>Candidate IME:</b> Users type in all characters indirectly using an IME. For example, Japanese has too many characters to directly map on a keyboard. Using a Japanese IME, users type in the "sound" (for example, "nihon") to the IME, which provides a set of candidates (for example, "日本") that the user selects from.</li></ul>
</div>
<div>There are also Chromium OS-specific requirements, such as supporting both x86 and ARM processors and following Chromium OS UI design guidelines. Meeting all of these requirements is not trivial. We'll reuse existing input technologies as much as possible.</div>
<div><br />
</div>
<div>We will support the following languages by any of the ways listed above.</div>
<div><br />
</div>
<div>
<table border="0" bordercolor="#888888" cellspacing="0" style="border-style:none;border-collapse:collapse">
<tbody>
<tr>
<td style="width:179px;height:174px">Arabic<br />
Bulgarian<br />
Catalan<br />
Croatian<br />
Czech<br />
Danish<br />
Dutch<br />
English (GB)<br />
English (US)<br />Estonian<br />Filipino<br /></td>
<td style="width:137px;height:174px">Finnish<br />French<br />
German<br />
Greek<br />
Hebrew<br />
Hindi<br />
Hungarian<br />
Indonesian<br />
Italian<br />
Japanese<br />
Korean</td>
<td style="width:155px;height:174px">Latvian<br />
Lithuanian <br />
Norwegian<br />
Polish<br />
Portuguese (Brazil)<br />
Portuguese (Portugal)<br />
Romanian<br />
Russian<br />
Serbian<br />Simplified Chinese<br />Slovak</td>
<td style="width:152px;height:174px">Slovenian<br />
Spanish<br />Spanish in Latin America<br />
Swedish<br />
Thai<br />
Traditional Chinese<br />
Turkish<br />
Ukrainian<br />
Vietnamese</td>
</tr>
</tbody>
</table>
</div>
<h2><a name="TOC-Design"></a>Design</h2>
<h3><a name="TOC-Basic-architecture"></a>Basic architecture</h3>
<div><br />
</div>
<div>For languages that can be supported by Simple Keyboard or Switchable Keyboard, we'll use <a href="http://en.wikipedia.org/wiki/X_keyboard_extension" rel="nofollow">XKB</a> (X Keyboard Extension). For languages in other categories, we'll use <a href="http://en.wikipedia.org/wiki/Intelligent_Input_Bus" rel="nofollow">IBus</a> (Intelligent Input Bus). The following diagram illustrates the basic architecture of text input support for Chromium OS.</div>
<div><br />
</div>
<blockquote style="border:medium none;margin:0pt 0pt 0pt 40px;padding:0px">
<div>
<div style="display:block;text-align:left">
<div><span style="color:rgb(71,18,100)"><a href="text-input/basic-architecture2.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../_/rsrc/1259832806496/chromium-os/chromiumos-design-docs/text-input/basic-architecture2.png" /></a></span></div>
</div>
</div>
</blockquote>
<h3><a name="TOC-Keyboard-layout:-XKB"></a>Keyboard layout: XKB</h3>
<div>We will create the XKB definition file for each keyboard layout.</div>
<h3><a name="TOC-Input-method-framework:-IBus"></a>Input method framework: IBus</h3>
<div>We will use IBus as the input method framework (IM framework). IBus is an open-source input method framework that works as a middle layer between applications and language-specific backend conversion engines.</div>
<div><br />
</div>
<div>We decided to use IBus for the following reasons.</div>
<div>
<ul><li>It's the default IM framework for Fedora 11 and Ubuntu 9.10.</li>
<li>No rebooting is necessary (unlike older IM frameworks) when major configurations are changed, such as when adding a new language.</li>
<li>Apps should be more stable. Unlike older IM frameworks, crashes in conversion engines won't affect applications.</li>
<li>IBus is implemented on top of D-Bus, which is also used in other components of Chromium OS.</li></ul>
</div>
<h3><a name="TOC-Conversion-engines"></a>Conversion engines</h3>
<div>Many conversion engines are available for IBus, such as ibus-pinyin for Chinese. We'll use the following open source conversion engines.</div>
<div><br />
</div>
<div>
<table border="0" bordercolor="#888888" cellspacing="0" style="border-style:none">
<tbody>
<tr>
<td style="width:128px;height:112px"> <b>IBus engine<br />
 </b>ibus-pinyin<br />
<b><span style="font-weight:normal"> ibus-chewing<br />
 ibus-table<br />
 ibus-hangul<br />
</span><br />
</b></td>
<td style="width:300px;height:112px"> <b>Language<br />
 </b>Chinese (Simplified)<br />
 Chinese (Traditional - Chewing)<br />
 Chinese (Traditional - Bopomofo and Cangjie)<br />
 Korean<br />
<br />
</td>
</tr>
</tbody>
</table>
<font color="#ff0000">New: </font>For Japanese, we plan to port <a href="http://www.google.com/intl/ja/ime/">Google Japanese Input</a> to Chromium OS.</div>
<h3><a name="TOC-User-experience"></a>User experience</h3>
<div>We'll make the text input experience be uniform with the user experience in Chromium OS. To achieve this goal, we'll rewrite all user interfaces using Chromium's UI toolkit library called Views.</div>
<div> </div>
<div><b>Candidate window</b></div>
<div>Will be implemented as separate process. Communicates to IBus-daemon via D-Bus.</div><div><font color="#FF0000"><br /></font></div><div><font color="#FF0000">New: </font>Here's a screenshot of a work-in-progress version of the candidate window. <a href="../../system/errors/NodeNotFound%3Fsuri=wuid:gx:483d026d329bff2f.html" class="disabled">A demo</a> is also available.</div>
<div><br />
</div>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div style="display:block;text-align:left"><a href="text-input/candidate_window.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../_/rsrc/1259832991155/chromium-os/chromiumos-design-docs/text-input/candidate_window.png" /></a></div></div></blockquote><div><br />
</div>
<div><br />
</div>
<div><b>XKB configuration dialog</b></div>
<div>Will be part of Chromium's options dialog. Communicates to X server via libcros.</div>
<div><br />
</div>
<div><b>IBus configuration dialog</b></div>
<div>Will be part of Chromium's options dialog. Communicates to IBus-daemon via libcros.</div>
<div><br />
</div>
<div><b>Conversion engine specific configuration dialogs</b></div>
<div>Will be part of Chromium's options dialog. Communicates to conversion engines via libcros.</div>
<div><br />
</div>
<div><b>Input language selector</b></div>
<div>Will be part of Chromium's status area (near the time and the power indicator). Communicates to IBus-daemon and X Server via libcros. We'll integrate the input language selector with the keyboard layout selector, unlike traditional Linux desktops. Here's a mockup of what it will look like:</div>
<div><br />
</div>
<blockquote style="border:medium none;margin:0pt 0pt 0pt 40px;padding:0px">
<div>
<div style="display:block;text-align:left"><a href="text-input/input.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../_/rsrc/1259832806497/chromium-os/chromiumos-design-docs/text-input/input.png" /></a></div>
</div>
</blockquote>
<div><br />
</div>
<div><br />
</div>
<div><b>Input language selector (on login manager)</b></div>
<div>Probably not required, because Google accounts (that is, email addresses) used for login are all in ASCII characters, as are the passwords. We will implement it once it becomes necessary. Internationalized keyboards can be supported by XKB configurations.</div>
<div><br />
</div>
<div><b>Sync with the cloud</b></div>
<div>Text input-related data is synced with the cloud. We sync the user's choices of languages, keyboard layouts, and input method extensions as described in <a href="text-input/syncing-input-methods.html">Syncing Languages and Input Methods</a>.</div><div><br /></div><div>In the future, we may sync:</div>
<div>
<ul><li>User settings for XKB, IBus, each IME, and so on.</li>
<li>User input history used for better conversions (optional)</li>
<li>User-defined dictionaries (optional)</li></ul>
</div>
<div>Syncing configuration data is a must, but users can opt out of syncing other user data.</div>
<div><br />
</div>
<div><b>Security considerations</b></div>
<div>An indirect input layer like IBus can be a security weak point, as it can be exploited as a key logger. We plan to use <a href="http://en.wikipedia.org/wiki/Grsecurity" rel="nofollow">GRSecurity</a> to restrict resource access from IBus and conversion engines. We also plan to review the security of IBus.</div>
<div><br />
</div>
<div><b>Long-term goals</b></div>
<div>Although the following goals aren't targeted for the initial version, these are some of our long-term goals:</div>
<div>
<ul><li>Better integration with browsers, such as changing behavior depending on the input form.</li>
<li>Multi-modal input, such as hand writing and voice recognition.</li>
<li>Virtual keyboard (aka software keyboard). Web-based virtual keyboard can be used in the initial version, though.</li>
<li>Multi-keypress input</li></ul>
</div>
<h2><a name="TOC-Code-location"></a>Code location</h2>
<h3><a name="TOC-IBus"></a>IBus</h3>
<div>
<ul><li>chromium-os/src/third_party/ibus/  (Tip of tree of IBus. We'll use the ibus-daemon, ibus-pinyin, ibus-chewing, ibus-table, and ibus-hangul modules as-is. However, we won't use the ibus-setup or ibus-panel modules.) </li></ul>
</div>
<h3><a name="TOC-Configuration-dialog-and-language-selector"></a>Configuration dialog and language selector</h3>
<div>
<ul><li><a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/chromeos/options/">chromium/src/chrome/browser/chromeos/options</a> (configuration page)</li>
<li><a href="http://src.chromium.org/cgi-bin/gitweb.cgi?p=cros.git;a=summary">chromium-os/src/platform/cros</a> (libcros part, replacement for ibus-setup and ibus-panel)</li><ul><li><a href="http://src.chromium.org/cgi-bin/gitweb.cgi?p=cros.git;a=blob;f=chromeos_ime.cc;hb=HEAD">chromeos_ime.cc</a> - APIs used for implementing the candidate window</li><li><a href="http://src.chromium.org/cgi-bin/gitweb.cgi?p=cros.git;a=blob;f=chromeos_ime.cc;hb=HEAD">chromeos_language.cc</a> - APIs used for manipulating input language status.</li></ul></ul>
</div>
<h3><a name="TOC-Candidate-window"></a>Candidate window</h3><div><ul>
<li><a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/chromeos/text_input/">chromium/src/chrome/browser/chromeos/text_input</a></li></ul>
<div><br />
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages" class="sites-canvas-bottom-panel-wrapper" style="">
<div class="sites-subpages">
            Subpages <span id="subpages-total-number">(1):</span>
<span>
<a href="text-input/syncing-input-methods.html" dir="ltr">Syncing Languages and Input Methods</a>
</span>
</div>
</div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/chromium.org/dev/chromium-os/chromiumos-design-docs/text-input">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXukca4jaDOG9SuQz_G8t7HlTnpisIgoVcG_x5Um6fzoCpgG2DWlztsnq7BA4zbsVbOjcPqErHanuninQAuHbCe6a0GAWZBJdimlH5GHP9-zJNnTucmNZt3TxJAqbyWixlhLMlB8/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
