<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/chromiumos-design-docs","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/chromium-os/chromiumos-design-docs/protecting-cached-user-data","deleted":false,"title":"Protecting Cached User Data","dir":"ltr"}];
  var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttp://sites.google.com/a/chromium.org/dev/chromium-os/chromiumos-design-docs/protecting-cached-user-data\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"http://csi.gstatic.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["http://www.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["http://www.gstatic.com/sites/p/56e332/system/js/codemirror.js","http://www.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","http://www.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","http://www.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","http://www.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/chromiumos-design-docs","parentWuid":"wuid:gx:2eb69dd73ece341e","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Protecting Cached User Data","locale":"en","wuid":"wuid:gx:797ea482fc6aca39","revision":8,"path":"/chromium-os/chromiumos-design-docs/protecting-cached-user-data","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"protecting-cached-user-data","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Protecting Cached User Data - The Chromium Projects" />
<meta itemprop="name" content="Protecting Cached User Data - The Chromium Projects" />
<meta property="og:title" content="Protecting Cached User Data - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Protecting Cached User Data - The Chromium Projects</title>
<meta itemprop="image" content="http://www.chromium.org/_/rsrc/1291791014176/chromium-os/chromiumos-design-docs/protecting-cached-user-data/ChromiumOS_TPM_Cryptohome.png" />
<meta property="og:image" content="http://www.chromium.org/_/rsrc/1291791014176/chromium-os/chromiumos-design-docs/protecting-cached-user-data/ChromiumOS_TPM_Cryptohome.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="http://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="http://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/chromium-os" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="/chromium-os/chromiumos-design-docs" dir="ltr">Design Documents</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Protecting Cached User Data</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-2"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Abstract"><strong>1 </strong>Abstract</a></li><li class="goog-toc"><a href="#TOC-Problem:-Multiple-users-portable-de"><strong>2 </strong>Problem:  Multiple users, portable devices, locally stored data</a></li><li class="goog-toc"><a href="#TOC-Solution:-Encryption"><strong>3 </strong>Solution:  Encryption</a></li><li class="goog-toc"><a href="#TOC-How-encryption-works"><strong>4 </strong>How encryption works</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Details"><strong>4.1 </strong>Details</a></li><li class="goog-toc"><a href="#TOC-Performance-concerns"><strong>4.2 </strong>Performance concerns</a></li></ol></li><li class="goog-toc"><a href="#TOC-Reclaiming-lost-space"><strong>5 </strong>Reclaiming lost space</a></li><li class="goog-toc"><a href="#TOC-Managing-encryption-keys"><strong>6 </strong>Managing encryption keys</a></li><li class="goog-toc"><a href="#TOC-Hashing-the-user-name"><strong>7 </strong>Hashing the user name</a></li><li class="goog-toc"><a href="#TOC-Password-change-and-offline-login"><strong>8 </strong>Password change and offline login</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Password-change"><strong>8.1 </strong>Password change</a></li><li class="goog-toc"><a href="#TOC-Offline-login"><strong>8.2 </strong>Offline login</a></li></ol></li><li class="goog-toc"><a href="#TOC-Encrypting-swap-and-temporary-data"><strong>9 </strong>Encrypting swap and temporary data</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-zram-swap"><strong>9.1 </strong>zram swap</a></li></ol></li><li class="goog-toc"><a href="#TOC-Error-conditions"><strong>10 </strong>Error conditions</a></li><li class="goog-toc"><a href="#TOC-Disk-speed-and-battery-life"><strong>11 </strong>Disk speed and battery life</a></li><li class="goog-toc"><a href="#TOC-Directory-structure"><strong>12 </strong>Directory structure</a></li><li class="goog-toc"><a href="#TOC-Appendix-A:-Formal-requirements"><strong>13 </strong>Appendix A: Formal requirements</a></li><li class="goog-toc"><a href="#TOC-Appendix-D:-Designs-considered"><strong>14 </strong>Appendix B: Designs considered</a></li><li class="goog-toc"><a href="#TOC-Appendix-E:-Threats"><strong>15 </strong>Appendix C: Threats</a></li></ol></div></div></div></div>
<h2><a name="TOC-Abstract"></a>Abstract</h2>
<ul><li>Chromium OS devices are intended to be both portable and safely shared. As a result, privacy protection for user data stored on the local disk is a requirement for a Chromium-based OS.</li><li>Privacy protection for user data stored on a local disk is accomplished via system-level encryption of users' home directories.</li><li>Chromium OS uses the <a href="https://launchpad.net/ecryptfs">eCryptfs</a> stacked filesystem with per-user vault directories and keysets to separate and protect each user’s cached data.</li><li>Chromium OS devices may use the Trusted Platform Module (TPM) to protect against brute-force attempts to recover a user’s keyset (and therefore the data it protects).</li></ul>
<h2><a name="TOC-Problem:-Multiple-users-portable-de"></a>Problem:  Multiple users, portable devices, locally stored data</h2>
<div>
<p>Chromium OS should provide privacy protection for user data stored on the local disk. In particular, some subset of a user's email, pictures, and even HTTP cookies will be stored on the local drive to enhance the online experience and ensure Chrome notebooks are useful even when an Internet connection isn't available. Without this protection, anyone who has physical access to the Chromium OS device would be able to access any data cached on it.</p><p>Normally, data stored in the cloud is protected by privacy-guarding mechanisms provided by the servers that host it. When data is pulled out of the cloud, it moves outside of the reach of those server-provided protections. Even though this is the case today with most computers, there are two areas that make this even more important to Chromium OS:</p><ul><li>With a Chromium OS device, users shouldn't have to worry about whether other users of the same device can see their cached data. For example, if my friend wants to log in to my device to check her mail, it's not a big deal. She won't be able to access my data, and even though she used my device, I won't be able to access her data.</li><li>Chromium OS devices are portable. The risk with very portable devices is that they are easy to misplace or leave behind. We don't want the person who finds a device to instantly have access to every users’ websites, emails, pictures, and so on.</li></ul><div>
<h2><a name="TOC-Solution:-Encryption"></a>Solution:  Encryption</h2><div>Since Chromium OS is built on Linux, we can leverage existing solutions for <a href="http://en.wikipedia.org/wiki/Disk_encryption_theory">encrypting</a> the user's data at the underlying operating system level and make sure it is automatic and mandatory.  Given the available implementation choices, many possible approaches were considered (see <a href="http://www.chromium.org/chromium-os/chromiumos-design-docs/protecting-cached-user-data#Appendix_D_Designs_considered">Appendix B</a> for details). Of those approaches, we chose a solution that provides file system-level encryption of <a href="http://en.wikipedia.org/wiki/Home_directory">home directories</a> for each user on a device.</div><div><br /></div><div>Encrypting each user's home directory means that all of the data stored and cached while browsing will be encrypted by default. In addition, data created and maintained by plugins, like <a href="http://www.adobe.com/products/flash/">Adobe Flash</a>, will be transparently encrypted without developers or users needing to take any special action.  The same goes for any data stored by HTML5-enabled web applications.</div><div><br /></div><div>Existing Operating Systems rely on file ownership and access permissions to prevent two users of a system from accessing each other’s files.  However, the root or administrative user typically can still access any of these files, and the files are really only protected as long as that Operating System instance is booted.  Mounting the drive as a secondary disk would allow full access.  Encryption is a better solution to this problem--even when the device is in the hands of a malicious individual, that person would still have to recover the encryption keys to be able to access the cached data.</div>
<h2><a name="TOC-How-encryption-works"></a>How encryption works</h2>
<h4><a name="How_does_it_work_"></a></h4>
<p>In a nutshell, each user gets a unique “vault” directory and keyset that is created at her first login.  The vault is used as the underlying encrypted storage for her data.  The keyset is tied to her login credentials and is required to allow the system to both retrieve and store information in the vault.  The vault is opened transparently to the user at login.  On logout or reboot, the user's data is locked away again.</p>
<h3><a name="TOC-Details"></a>Details</h3>
<h4><a name="Uh_okay_How_does_it_really_wor"></a></h4><div>Each user is allocated a vault directory that contains the encrypted backing storage for their home directory.  The vault is located in a directory specific to the user using a hash of the user name with a salt value, and is mounted using eCryptfs at login to the user directory.  A user-specific file encryption key (FEK) and file name encryption key (FNEK) allow eCryptfs to transparently encrypt and decrypt while the vault is mounted.  A successful mount of the vault is a required step in the login process of Chromium OS.  On first login, /etc/skel/ is copied to the new home directory, and then it's ready for use.</div><div><br /></div><div>The FEK and FNEK (together, with some additional data, called the keyset) for a user are created using the randomness generator provided by the kernel, which, on Chromium OS devices, is given additional entropy from the TPM at boot.  These 128-bit AES keys are used to encrypt the file contents and file names, respectively.  As a stacked filesystem, eCryptfs has a lower file (the encrypted, persistent file located in the vault and stored on disk) for each upper file (the plaintext file presented at the mount point, which is never stored directly to disk).  The keys exist in kernel memory for the lifetime of the mount.</div><div><br /></div><div>A user’s keyset never changes unless their account is removed from the Chromium OS device, or if the system is erased, such as when a recovery device is used.  It must be protected from disclosure and only available with valid login credentials.  To achieve this, Chromium OS uses one of two methods to store the keyset, depending on whether a TPM is available and initialized.  The preferred method involves using the TPM, with the fallback method using the <a href="http://www.tarsnap.com/scrypt.html">Scrypt</a> encryption library.  Both methods tie the user’s vault keyset to their Google Accounts password, and are described further below.</div><div><br /></div><div>All of this is managed by one daemon, cryptohomed, which listens for incoming requests from the login manager. If the request is to mount an encrypted vault, the user name and weak password hash must be included. If the request is to unmount the image, cryptohomed clears the keys stored by the kernel and unmounts the vault.</div>
<h3><a name="TOC-Performance-concerns"></a>Performance concerns</h3>
<h4><a name="Isn_t_it_incredibly_slow_to_cr"></a></h4><div>Adding cryptography to a filesystem comes at a cost--encryption consumes both CPU cycles and additional memory pages.  The latter is primarily managed the the Linux page cache, but the former can result in reads and writes being CPU-bound rather than I/O-bound.  Based on testing compared to I/O direct to the solid state disk, we’ve found the current overhead to be acceptable, though there is always room to be better.  Chromium OS uses encryption to protect cached user data, which does include some frequently used items such as the browser cache and databases, but does not include shared Operating System files and programs.  So while there is a performance cost, it does not apply to all disk I/O.</div>
<br />
<h2><a name="TOC-Reclaiming-lost-space"></a>Reclaiming lost space</h2>
<h4><a name="So_that_part_is_fast_enough_I_"></a></h4><div>Being a stacked filesystem, eCryptfs has a side effect of having a single lower file for every upper file.  This allows for “passthrough”--where a file or directory is created as plaintext in the underlying vault folder, and shows up in the upper mount point.  Generally, this is not a good idea for files (we wouldn’t want to store plaintext data on disk), but for directories, it has a nice benefit of allowing offline file cleanup.</div><div><br /></div><div>Specifically, passthrough directories allow a plaintext directory name to show up in the vault, but the directory contents (files, subdirectories, etc.) are still encrypted.  Chromium OS can create passthrough directories for discardable information, such as the browser cache.  Since the name is a standard location, reclaiming disk space when it is low is simply a matter of removing the known cache directory names from each vault that exists on the system.  Without passthrough directories, each vault would have to be mounted (requiring each user’s credentials) to be able to identify the cache directory and delete it.</div></div>
<div>
<a name="managingkeys"></a>
<h2><a name="TOC-Managing-encryption-keys"></a>Managing encryption keys</h2>
<h4><a name="Going_back_what_do_you_mean_by"></a></h4><div>As mentioned earlier, the user’s vault keyset is ultimately protected by a partial cryptographic hash of the user's passphrase. A partial cryptographic hash is used because the user's Google Accounts password must not be exposed to offline attack. Instead, we're willing to lose some of the entropy supplied by the passphrase by performing a SHA-256 digest of a user-specific salt concatenated with the user's passphrase. The first 128 bits of the digest are used as the user's "weak password hash."</div><div><br /></div><div>Often, user passwords will only contain anywhere from <a href="http://en.wikipedia.org/wiki/Password_strength#Human-generated_passwords">18 bits to 30 bits of entropy</a> starting at 8 characters in length. Spreading that entropy over a hash and halving it is not really that great. At the very least, adding a salt means that it will be quite costly to precompute a dictionary of hashes, but that still isn't perfect if an attacker has the time and access to the local salt in order to attempt to brute force the local password. There are two other useful options that can be pursued to help dissuade offline attacks. The first is that <a href="http://en.wikipedia.org/wiki/Key_strengthening">key strengthening</a> can be used to increase the amount of time it takes to calculate a hash from a dictionary-based brute force attack that uses repeated passes through a cryptographic hash. The other option is to make use of a TPM device when it is present, such as in Chromium OS devices. This allows the TPM to effectively rate limit brute force attacks without the overhead of key strengthening.  </div><div><br /></div><div>As mentioned above, both Scrypt-based and TPM-based protection may be employed.  We’ll describe the Scrypt method first, being the simpler of the two.  The benefit of using Scrypt is that it uses a unique method of password strengthening to derive a key for the encryption that is both CPU- and memory-bound, making a parallelized brute-force attack more costly than a scheme such as repeated hash rounds.  Scrypt is used to directly protect the vault keyset using a key based on the strengthened user’s password (actually the user’s weak password hash).  The encrypted keyset is stored on disk, and is unlocked for use at login when valid credentials allow for it to be decrypted.</div><div><br /></div><div>The preferred method of protecting the vault keyset involves the TPM to protect against brute force attacks.  The method takes advantage of the secure key storage functionality of the TPM (and the relatively slow clock speed of the chip) to protect the keyset.</div><div><br /></div><div>When using the TPM, Chromium OS creates a system-wide RSA key using OpenSSL and then wraps it with the TPM’s Storage Root Key on first boot.  The original key is destroyed, and we are left with an RSA key whose private key is known only on-chip on the TPM.  This means that, short of a vulnerability in the TPM, in order to use this RSA key, the private key operation must happen on this specific TPM, so mechanisms that use it are better protected against brute-force attacks.  Furthermore, as current TPMs can take around half a second for a private key operation, even attacks which use the TPM are effectively rate limited.</div><div><br /></div><div>We use a system-wide key rather than per-user key for two important reasons: first, key load into the TPM is costly (it must decrypt the private key component).  While 0.5s is a tolerable penalty to pay for the private key operation, longer (which would be the case if we had to load a user-specific key on each login attempt) is a noticable impact on user login.  Using a system-wide key allows one key to be loaded and generally left in the TPM while the system is booted.  Since it is protected by the chip, this is okay.  Second, the typical method of incorporating user passwords with keys on the TPM is to require authentication for their use.  This would be a good solution for Chromium OS, but there is a downside.  TPMs feature a vendor-specific dictionary attack defense mode, which is easily entered into with too many failed TPM authentications.  On many chips, this mode is aggressive, and once entered, renders the chip useless for some amount of time.  Since failed passwords happen (both legitimately, and by an attacker), too many failed passwords would leave the TPM disabled for a time, and the vaults it protected unusable.  Instead, we use a passwordless system-wide key, but mix the user’s password in a unique way that achieves the same benefits without the possibility of entering this mode.</div><div><br /></div><div>Specifically, when a vault keyset is encrypted, the following process takes place:</div><div><ol><li>A 256-bit AES vault keyset key (VKK below) is created randomly and used to encrypt the vault keyset.  The encrypted vault keyset is stored to disk.  This intermediate key is used to allow the vault keyset to be larger than a single RSA operation would allow for.</li><li>The VKK is encrypted with the system-wide RSA key previously mentioned (TPM_CHK below), resulting in an intermediate encrypted vault keyset key (IEVKK).</li><li>The final 128 bits of the encrypted blob from step 2 are encrypted in place using the user’s weak password hash which has first been hashed a keyset-specific salt.  This is done using a single AES operation with no padding, allowing for no verification on decrypt.  The result is the encrypted vault keyset key (EVKK), which is stored to disk.</li></ol></div><div><br /></div><div>Step 3 is critical to combining the user’s weak password hash (and therefore preventing anyone with access to the TPM and system-wide RSA key from decrypting the vault keyset).  Unless the attacker acquires the user’s password (or guesses it), the blob passed to the TPM to decrypt using the system-wide key is effectively garbage--the TPM will fail to decrypt because is is effectively corrupt until those final 128 bits are corrected.  The TPM treats this as a failed decrypt (rather than a failed authentication), and the vault keyset key (and vault keyset it protects) cannot be recovered.  This operation is illustrated below:</div><div><br /></div><div><div style="display:block;text-align:left"></div><div style="display:block;text-align:left"><a href="http://www.chromium.org/chromium-os/chromiumos-design-docs/protecting-cached-user-data/ChromiumOS_TPM_Cryptohome.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1291791014176/chromium-os/chromiumos-design-docs/protecting-cached-user-data/ChromiumOS_TPM_Cryptohome.png" /></a></div><br /></div><div><div>While these protection methods result in protecting the cached user data, what they effectively address is preventing an attacker from offline brute-force guessing a user’s Google Accounts password.</div></div>
<h2><a name="TOC-Hashing-the-user-name"></a>Hashing the user name</h2>
<h4><a name="Why_is_the_username_also_crypt"></a></h4><div>The primary reason for hashing the user name is to make it safe for use on the filesystem without writing a custom mapping of unsafe characters. A web-based user name may contain characters that are not safe for use on the file system. Using a strong hash will give a reasonably unique value that is safe for use on the file system. In addition, if all references to user names outside of the encrypted images are done using a HASH(salt||user@domain.com), then it becomes quite difficult for any user, or attacker, to determine what user names are in use on a given device without attempting a brute force attack. This is a nice side effect, but not an explicit goal.</div><h2><a name="TOC-Password-change-and-offline-login"></a><font size="4"><b>Password change and offline login</b></font></h2><div>Password change and offline login are both handled through cryptohomed.</div><h3><a name="TOC-Password-change"></a><font size="3"><b>Password change</b></font></h3><div>If the user changes her password from another browser, the vault keyset is still tied to the previous password.  Chromium OS allows password change only on a successful online login.  In that case, Google’s web service will authenticate the user with her new credentials, returning a successful condition.  Chromium OS will attempt to mount her vault, but that will fail with a bad decrypt condition.  Since Chromium OS knows the password was in fact correct, it will present the user with the option of entering her old password once (with which it can recover the vault keyset and then re-protect with the new password), or simply re-create the vault from scratch.</div><h3><a name="TOC-Offline-login"></a><b><font size="3">Offline login</font></b></h3><div>When a Chromium notebook is offline, it cannot authenticate a user with Google’s web service.  However, the encrypted vault keyset can be used for offline credential verification.  Put simply, if a given password results in a successful recovery of the vault keyset, the password was correct.  So, when Chromium OS doesn’t detect a network connection, it will attempt to authenticate by mounting the user’s vault directly (this only works if the user has previously logged in while online, and so she has a vault present on the notebook).</div><div><br /></div>
<h2><a name="TOC-Encrypting-swap-and-temporary-data"></a>Encrypting swap and temporary data</h2>
<h4><a name="What_about_encrypting_swap_and"></a></h4>

At present, Chromium OS devices don't use a swap partition, and temporary data is written to a tmpfs file system that is not backed by any permanent storage (such as disk). If a swap device is needed in the future, we'll explore the challenges associated with protecting that data satisfactorily.</div><h3><a name="TOC-zram-swap"></a>zram swap</h3><p>While newer releases of Chrome OS have started including zram for swap purposes, it is still not stored on disk. zram takes a chunk of memory and uses that for swap. When pages are moved between that swap device, they are compressed/uncompressed on the fly. So there still is no permanent storage in play.</p><div>
<h2><a name="TOC-Error-conditions"></a>Error conditions</h2>
<h4><a name="Let_s_back_up_a_bit_What_happe"></a></h4><div>You may be wondering what happens if an error occurs. Is the user locked out? If a user authenticates successfully, but all attempts to create or access an encrypted vault fail, then login may or may not fail.  The answer is dependent on the scenario.  Chromium OS automatically detects unrecoverable failures, and re-creates a user’s vault in the conditions.  These conditions are typically related to the TPM, such as happens if it is cleared (effectively making data protected by it unrecoverable).  Transient failures do not result in a fresh vault, but both types of failures are rare and usually predictable (see our document on TPM use for more information).</div><div><br /></div><div>Regardless, the user can always log in to the device as a guest.  While it does not provide access to the encrypted user data, and the session history is not stored, it does always allow use of the system.</div><div><br /></div>
<h2><a name="TOC-Disk-speed-and-battery-life"></a>Disk speed and battery life</h2>
<h4><a name="Does_this_kill_the_battery_Wha"></a></h4>
<div><div>Simple benchmarks indicate that eCryptfs under common browsing patterns does not significantly alter battery life. It's when sustained reads and writes occur that more and more CPU is used, and hence more battery draw. A test with a heavy, sustained write resulted in similar battery discharge rate as the heavy writing used without encryption, but the encrypted large write took about twice as long to complete.</div><div><br /></div><div>In most use cases, disk encryption isn't noticeable. If AES acceleration reaches additional processors, then the impact will be even lower.</div></div>
<br />
<h2><a name="TOC-Directory-structure"></a>Directory structure</h2>
<h4><a name="Where_does_everything_live_"></a></h4><div>All metadata for this feature will live under the /home/.shadow directory. Each user will have a subdirectory with a name based on the user name hash. That directory will contain all data related to that user's image on the machine. For example:</div><div><br /></div><div>  /home/.shadow/da39a3ee5e6b4b0d3255bfef95601890afd80709/vault</div><div>  /home/.shadow/da39a3ee5e6b4b0d3255bfef95601890afd80709/master.0</div><div><br /></div><div>The system-wide TPM RSA key is stored in:</div><div>  /home/.shadow/cryptohome.key</div>
<h2><a name="TOC-Appendix-A:-Formal-requirements"></a>Appendix A: Formal requirements</h2>
<h4><a name="Appendix_A_Formal_Requirements"></a></h4>
<div style="margin-top:0px;margin-bottom:0px">The primary objective is to protect sensitive end user data from exposure if the device or drive is lost.<br />
<br />
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px">User data <b>MUST NOT</b> be accessible when the device is powered down. <br />
</li>
<li style="margin-top:0px;margin-bottom:0px">User data <b>MUST</b> be protected when the disk has been removed from a device.</li>
<li style="margin-top:0px;margin-bottom:0px">User data <b>MAY</b> be protected when the device is suspended.</li>
<li style="margin-top:0px;margin-bottom:0px">Google Accounts passphrases <b>MUST NOT</b> be exposed for direct offline attack.</li>
<li style="margin-top:0px;margin-bottom:0px">User data <b>MUST</b> be available during offline login.</li>
<li style="margin-top:0px;margin-bottom:0px">User data <b>MUST</b> be recoverable after an out-of-band password change.</li>
<li style="margin-top:0px;margin-bottom:0px;text-align:left">User data <b>MUST</b> <b>NOT</b> be exposed across users on a multiuser device.</li>
<li style="margin-top:0px;margin-bottom:0px">User data swapped out of memory <b>MAY BE</b> protected (depending on the requirement below).<br />
</li>
<li style="margin-top:0px;margin-bottom:0px">Power and performance overhead <b>SHOULD BE</b> minimized. (Some
concrete maximum acceptable overhead should be determined. It may end
up being device specific, however. In particular, boot time, login
time, and Chromium browser responsiveness issues are important.)</li>
<li style="margin-top:0px;margin-bottom:0px">Users <b>MUST NOT</b> be able to opt out of encryption.</li></ul>
<br />
Non-goals:<br />
</div>
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px">Offline credential storage behavior may be a side effect of the chosen implementation.</li>
<li style="margin-top:0px;margin-bottom:0px">A TPM device may be used, but it is a non-goal to create a TPM-dependent solution.</li>
<li style="margin-top:0px;margin-bottom:0px">Root partition encryption/protection is not a goal.</li>
<li style="margin-top:0px;margin-bottom:0px">It is a non-goal to provide a remote wipe mechanism via this feature, but it may make such a design easier.</li></ul><div><br /></div>
<h2><a name="TOC-Appendix-D:-Designs-considered"></a>Appendix B: Designs considered</h2>
<h4><a name="Appendix_D_Designs_considered"></a></h4>
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px"><b>Per-user block-based encryption</b>: This approach would use a random key to encrypt a partition per-user that is protected by the user's passphrase (and a Google-held backup key). This approach would ensure that a user's data will be accessible only when the user has logged in, and it allows for easy remote wipe (removing the key for the partition). This does add more pain when it comes to device management. Each data partition would need to be separated into preallocated regions for each simultaneously cached user stored on the system (that is, data_space / n = users_space). <br />
<i>Note:</i> This should not be visible to the user unless he tries to log in with the new passphrase while he is offline.</li>
<li style="margin-top:0px;margin-bottom:0px"><b>Per-user file system-based encryption</b>: This approach would make use of encfs, cryptofs, or eCryptfs to add a layered encrypted file system on top of a preconfigured block device. Barring eCryptfs, the performance is quite painful with userland solutions like encfs and cryptofs. eCryptfs provides good performance, and allows for an approach similar to above (guaranteeing per-user privacy and offline defenses) without requiring preallocated block devices per user.
</li>
<li style="margin-top:0px;margin-bottom:0px"><b>Whole disk encryption with TPM</b>: This would use a TPM-protected key to unlock a drive. This would mean that with the whole device, the data would be exposed to OS-level attacks once booted, unless some form of pre-boot authentication was used. This is not the user experience we are looking for, and this would expose data trivially to a physical attacker. The disk would only be protected if removed from the device.</li>
<li style="margin-top:0px;margin-bottom:0px"><b>Whole data partition encryption</b>: This would simplify the space utilization problem by putting all users on one encrypted partition. Normal access controls could keep users out of each other's data, but adding a new user to the encrypted drive without requiring another user to "authorize" the new user at login time is a challenge under this scheme. The reason this is an issue is because each user's passphrase-derived key is used to armor the disk encryption key. Even if a user authorizes another user to access the drive, the new user would be required to type the original passphrase immediately (or at next login), or a secondary key would need to be in play to allow for the encryption key to be decrypted and re-encrypted without the first user present. There are no clean ways around this.<br />
<br />
Another downside to this approach is that if any user is compromised and a privilege escalation vulnerability exists in the system, all user data would be compromised. <br />
<br />
Additionally, this approach would complicate any remote-wipe scheme we might implement. Whole-partition encryption would necessitate actual file removal to implement a per-user wipe, instead of just reinitializing the cryptographic file system or full data wipe. If we support only full data wipe, then that would probably be restricted to device owners only, but a per-user wipe would allow a user to clean his own data off a friend's machine he used once. </li>
<li style="margin-top:0px;margin-bottom:0px"><b>No encryption</b>: Not only would this mean most enterprises can't use the device for work, it also would mean that many users would be unhappy. As is, most people don't want to lose their data if someone steals their device. And regardless of policies, people will use their personal devices at work. We'd like to think that providing simple, effective encryption to the platform is a long-term benefit to everyone.</li>
<li style="margin-top:0px;margin-bottom:0px"><b>Chromium browser-only encryption</b>: Pushing encryption into the Chromium browser was considered.  This approach would ensure that all cached data and all downloaded/accessed data is encrypted. This solution may be pursued in the long term. At present, providing the encryption at the OS level means that it will catch any data external to the Chromium browser (Adobe Flash local storage) and developer data.<br />
</li>
<li style="margin-top:0px;margin-bottom:0px"><b>Other interesting side effects</b>: Both the whole data partition encryption and the per-user encryption come with the benefit of a free offline credential store. A weak hash of the password can be used to protect the stores which would then be checked on mount. In addition, the user can be mapped to a system account using this information. If a user is password slot 1, then he will be mapped to user_1, and so on.</li></ul>
<h2><a name="TOC-Appendix-E:-Threats"></a>Appendix C: Threats</h2>
<h4><a name="Appendix_E_Threats"></a></h4>
<p style="margin:0px">The following list includes the primary threats that are addressed by this design:<br />
</p>
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px">An attacker acquires a powered down device with the drive in it and attempts to access all local user home directories.</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker acquires a device in suspend state with the drive in it and attempts to extract the encryption key with a cold boot attack.</li></ul>
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px">An attacker with login privileges attempts to access another user's data using a known bug, vulnerability, or workaround.</li></ul>
<br />
Many threats are not dealt with through this design:<br />
<ul style="margin-top:0px;margin-bottom:0px"><li style="margin-top:0px;margin-bottom:0px">An attacker with a remote compromise will be able to access the currently logged in user's data.</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker will be able to access all user data if autologin is enabled and the device is in any state.</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker will be able to access all user data if the machine is suspended or logged in and screen locking is disabled.</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker will be able to dump all RAM from a suspended machine using a <a href="http://en.wikipedia.org/wiki/Cold_boot_attack">cold boot attack</a> exposing any credentials in memory and the disk encryption key schedule until that can be fixed.<br />
</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker who steals a running machine with screen locking will be able to perform screen lock, usb, network, and any other runtime attacks to gain access unless the user is able to initiate a remote wipe while the machine is still Internet-connected.</li>
<li style="margin-top:0px;margin-bottom:0px">An attacker who is able to modify the root partition will be able to compromise the runtime environment leading to data exposure when a user subsequently logs in. Our <a href="http://www.chromium.org/chromium-os/chromiumos-design-docs/verified-boot">verified boot process</a> should help combat this, however.<br />
</li></ul>
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-attachments">
<div class="sites-attachments-row"><div class="sites-attachments-icon" style="left:0px;"><span aria-label="Attachments" title="Attachments"><div class="sites-translucent sites-symbol" aria-hidden="true">Č</div></span></div><div id="sites-attachments-update-div" class="sites-attachments-inner-div" style="display:none;"><span class="sites-attachments-update-icon"><img src="http://www.gstatic.com/sites/p/56e332/system/app/images/spinner.gif" /></span><div class="sites-attachments-update-text">Updating...</div></div></div><div class="sites-attachments-separator"></div>
<div id="attachment-wuid:gx:17dd9af1cee6c6b4"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">disk-encryption-benchmarks--ecryptfs2bext3-1008hapdf <div class="sites-translucent">(744k)</div></div><div class="sites-attachments-author">Jed Hartman, <div class="sites-translucent">Nov 19, 2009, 9:03 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="/system/app/pages/admin/revisions?wuid=wuid:gx:17dd9af1cee6c6b4">v.1</a></div><div id="attachment-download-wuid:gx:17dd9af1cee6c6b4" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="/chromium-os/chromiumos-design-docs/protecting-cached-user-data/disk-encryption-benchmarks--ecryptfs2bext3-1008hapdf?attredirects=0&amp;d=1" aria-label="Download disk-encryption-benchmarks--ecryptfs2bext3-1008hapdf" title="Download" role="button"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div id="attachment-wuid:gx:609c13d95cfc2d55"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">disk-encryption-benchmarks--no-encryptionpdf <div class="sites-translucent">(836k)</div></div><div class="sites-attachments-author">Jed Hartman, <div class="sites-translucent">Nov 19, 2009, 9:03 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="/system/app/pages/admin/revisions?wuid=wuid:gx:609c13d95cfc2d55">v.1</a></div><div id="attachment-download-wuid:gx:609c13d95cfc2d55" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="/chromium-os/chromiumos-design-docs/protecting-cached-user-data/disk-encryption-benchmarks--no-encryptionpdf?attredirects=0&amp;d=1" aria-label="Download disk-encryption-benchmarks--no-encryptionpdf" title="Download" role="button"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div id="attachment-wuid:gx:5ddf1f1b29734cd6"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">disk-encryption-on-chrome-os--dmcrypt2bext42b1008hapdf <div class="sites-translucent">(835k)</div></div><div class="sites-attachments-author">Jed Hartman, <div class="sites-translucent">Nov 19, 2009, 9:03 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="/system/app/pages/admin/revisions?wuid=wuid:gx:5ddf1f1b29734cd6">v.1</a></div><div id="attachment-download-wuid:gx:5ddf1f1b29734cd6" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="/chromium-os/chromiumos-design-docs/protecting-cached-user-data/disk-encryption-on-chrome-os--dmcrypt2bext42b1008hapdf?attredirects=0&amp;d=1" aria-label="Download disk-encryption-on-chrome-os--dmcrypt2bext42b1008hapdf" title="Download" role="button"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div style="height: 10px"></div>
</div>
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/chromium.org/dev/chromium-os/chromiumos-design-docs/protecting-cached-user-data">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq94QLQi6qydFdWiRRfMVAUi9Tb9XxgowT4snq7o2y_PnDdPl9K2n_RagKwB9AHyIJ09jZ36CZ58TYqRVmAIjMJNCJEnQY3JV--5hiYACxy38ZWcftS/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
