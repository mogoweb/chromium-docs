<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting","deleted":false,"title":"How Tos and Troubleshooting","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server","deleted":false,"title":"Dev server","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server/xbuddy-for-devserver","deleted":false,"title":"XBuddy for Devserver","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/using-the-dev-server/xbuddy-for-devserver\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server","parentWuid":"wuid:gx:191065f7572d0ff9","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"XBuddy for Devserver","locale":"en","wuid":"wuid:gx:7fb35a77ad0c6525","revision":32,"path":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server/xbuddy-for-devserver","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"xbuddy-for-devserver","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="XBuddy for Devserver - The Chromium Projects" />
<meta itemprop="name" content="XBuddy for Devserver - The Chromium Projects" />
<meta property="og:title" content="XBuddy for Devserver - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>XBuddy for Devserver - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/chromium-os" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="/chromium-os/how-tos-and-troubleshooting" dir="ltr">How Tos and Troubleshooting</A>‎ &gt; ‎<A href="/chromium-os/how-tos-and-troubleshooting/using-the-dev-server" dir="ltr">Dev server</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">XBuddy for Devserver</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Overview"><strong>1 </strong>Overview</a></li><li class="goog-toc"><a href="#TOC-Prerequisites"><strong>2 </strong>Prerequisites</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Google-Storage-Credentials"><strong>2.1 </strong>Google Storage Credentials</a></li><li class="goog-toc"><a href="#TOC-Payload-generation-and-chroot"><strong>2.2 </strong>Payload generation and chroot</a></li></ol></li><li class="goog-toc"><a href="#TOC-Example-Usage---Imaging-a-Device"><strong>3 </strong>Example Usage - Imaging a Device</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Update-a-device-to-the-latest-released-build"><strong>3.1 </strong>Update a device to the latest released build</a></li><li class="goog-toc"><a href="#TOC-Update-a-device-to-the-latest-locally-built-image"><strong>3.2 </strong>Update a device to the latest locally built image</a></li><li class="goog-toc"><a href="#TOC-Use-an-arbitrary-XBuddy-path."><strong>3.3 </strong>Use an arbitrary XBuddy path.</a></li></ol></li><li class="goog-toc"><a href="#TOC-Example-Usage---Staging-Artifacts-onto-DevServer"><strong>4 </strong>Example Usage - Staging Artifacts onto DevServer</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Get-a-particular-artifact-from-the-devserver"><strong>4.1 </strong>Get a particular artifact from the devserver</a></li><li class="goog-toc"><a href="#TOC-Stage-an-artifact-on-the-devserver-and-get-the-path-to-it"><strong>4.2 </strong>Stage an artifact on the devserver and get the path to it</a></li></ol></li><li class="goog-toc"><a href="#TOC-XBuddy-Paths"><strong>5 </strong>XBuddy Paths</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-XBuddy-Path-Overrides"><strong>5.1 </strong>XBuddy Path Overrides</a></li></ol></li><li class="goog-toc"><a href="#TOC-XBuddy-Interface-and-Usage"><strong>6 </strong>XBuddy Interface and Usage</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Devserver-rpc:-xbuddy"><strong>6.1 </strong>Devserver rpc: xbuddy</a></li><li class="goog-toc"><a href="#TOC-Devserver-rpc:-xbuddy_list"><strong>6.2 </strong>Devserver rpc: xbuddy_list</a></li><li class="goog-toc"><a href="#TOC-Updating-from-a-DUT:-update_engine_client"><strong>6.3 </strong>Updating from a DUT: update_engine_client</a></li><li class="goog-toc"><a href="#TOC-Scripts-cros-flash-"><strong>6.4 </strong>Scripts (cros flash)</a></li></ol></li></ol></div></div></div></div>
<div>
<h2><a name="TOC-Overview"></a><b style="font-size:large">Overview</b></h2>
<div></div>
<span style="font-size:small">XBuddy for devserver allows you to obtain ChromiumOS images off Google Storage and reference locally built images. When used with devserver (or scripts that use it), it can also be used to update your ChromiumOS machine to any image.</span></div>
<div><span style="font-size:small;font-weight:normal"><br />
</span></div>
<div>
<h2><a name="TOC-Prerequisites"></a><b style="font-size:large">Prerequisites</b></h2>
<h3><a name="TOC-Google-Storage-Credentials"></a>Google Storage Credentials</h3>
<div>You need them to get anything off of Google Storage!</div>
<div>Run:</div>
<div><br />
</div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>gsutil config</code></div>
</div>
<div><br />
</div>
<div>Ensure that the resulting .boto file is discoverable from the environment from which you are running the devserver from, whether inside or outside the chroot, so copy it over if necessary.</div>
<h3><a name="TOC-Payload-generation-and-chroot"></a>Payload generation and chroot</h3>
<div>Devserver needs to be run from inside chroot to generate an update payload from an image binary.</div>
<h2><a name="TOC-Example-Usage---Imaging-a-Device"></a><font size="4"><b>Example Usage - Imaging a Device</b></font></h2>
<div>On your developer machine, start a devserver. <span style="font-size:small">(Please see </span><a href="https://www.chromium.org/chromium-os/how-tos-and-troubleshooting/using-the-dev-server" style="font-size:small">Using the Devserver</a><span style="font-size:small"> for more details about the devserver.)</span></div>
<div><span style="font-size:small"><br />
</span></div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><span style="font-family:monospace"><font color="#006000">cd ~/chromiumos/; cros_sdk  # if not already in the chroot</font><br />
<font color="#9900ff"><br />
start_devserver</font></span></div>
</div>
<div>
<h3><a name="TOC-Update-a-device-to-the-latest-released-build"></a>Update a device to the latest released build</h3>
On your test machine, <span style="font-size:small">with BOARD is your device board:</span></div>
<div> 
<div></div>
<div class="sites-codeblock sites-codesnippet-block" style="font-size:13px;font-weight:normal"><code>update_engine_client --update --omaha_url="http://your_host:port/update/xbuddy/remote/${BOARD}/latest/dev"</code></div>
<h3><a name="TOC-Update-a-device-to-the-latest-locally-built-image"></a>Update a device to the latest locally built image</h3>
<div style="font-size:13px;font-weight:normal"><font size="2">On your test machine, get to a shell (Ctrl-Alt-F2), and use</font><span style="font-size:small"> your_host:port is where your devserver is running from.</span></div>
<div style="font-size:13px;font-weight:normal"><font size="2"><br />
</font>
<div class="sites-codeblock sites-codesnippet-block"><code>update_engine_client --update --omaha_url="http://your_host:port/update"</code></div>
</div>
<h3><a name="TOC-Use-an-arbitrary-XBuddy-path."></a>Use an arbitrary XBuddy path.</h3>
<span style="font-weight:normal"><font size="2">On your test machine, with</font></span><span style="font-size:10pt"> XBUDDY_PATH as some path to an image:</span></div>
<div><font size="2"><br />
</font>
<div></div>
<div class="sites-codeblock sites-codesnippet-block" style="font-size:13px;font-weight:normal"><code>update_engine_client --update --omaha_url="http://your_host:port/update/xbuddy/${XBUDDY_PATH}"</code></div>
<div><font size="2" style="font-weight:normal"><br />
</font></div>
<div><span style="font-size:10pt">(S</span><span style="font-size:small">ee <a href="https://www.chromium.org/chromium-os/how-tos-and-troubleshooting/using-the-dev-server/xbuddy-for-devserver#TOC-XBuddy-Paths">XBuddy Paths</a> for all path options.)</span></div>
<div>
<h2><a name="TOC-Example-Usage---Staging-Artifacts-onto-DevServer"></a><font size="4">Example Usage - Staging Artifacts onto DevServer</font></h2>
</div>
<h3><a name="TOC-Get-a-particular-artifact-from-the-devserver"></a>Get a particular artifact from the devserver</h3>
<div>On your developer machine, call the xbuddy rpc with an xbuddy path to download <span style="font-size:10pt">the latest local build on the devserver at host:port to the chromiumos_test_image.bin</span></div>
<div><br />
</div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>wget http://host:port/xbuddy/local/x86-generic/latest/test -O chromiumos_test_image.bin</code></div>
</div>
<div>
<h3><a name="TOC-Stage-an-artifact-on-the-devserver-and-get-the-path-to-it"></a>Stage an artifact on the devserver and get the path to it</h3>
<div>Similarly, <span style="font-size:10pt">download the path to the update payload on that devserver.</span></div>
<div><br />
</div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>wget http://host:port/xbuddy/remote/lumpy/latest-official/full_payload?return_dir=true -O path.txt</code></div>
</div>
</div>
<div><br />
</div>
<div>See XBuddy Interface and Usage for more details.</div>
<h2><a name="TOC-XBuddy-Paths"></a>XBuddy Paths</h2>
<div>
<div dir="ltr" style="font-size:13px;font-weight:normal">
<table style="border:none;border-collapse:collapse;width:624px">
<colgroup>
<col width="*" />
<col width="*" />
<col width="*" />
<col width="*" /></colgroup>
<tbody>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">local/remote</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">board_name</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">version alias</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">image profile</span></p>
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Optional (defaults to local). If a path is explicitly remote, xBuddy will interpret the rest of the path to query into google storage for artifacts. If local, XBuddy will attampt to find the artifact locally.</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Required. Mostly self-explanatory e.g. x86-mario</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Optional (defaults to latest). A version string or an alias that maps to a version string. </span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Optional (defaults to test). Any of the artifacts that devserver recognizes.</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<br />
<div dir="ltr" style="font-size:13px;font-weight:normal">
<table style="border:none;border-collapse:collapse;width:624px">
<colgroup>
<col width="*" />
<col width="*" /></colgroup>
<tbody>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Version Aliases</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px"><br />
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">latest (this is the default)</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">If local: latest locally built image for that board.<br />
If remote: the newest stable image on Google Storage</span></p>
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">latest-{dev|beta|stable}</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Latest build produced for the given channel<br />
</span></p>
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">latest-official</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Latest available release image built for that board in Google Storage.</span></p>
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">latest-official-{suffix}</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Latest available image with that board suffix in Google Storage.</span></p>
</td>
</tr>
<tr style="height:0px">
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">latest-{branch-prefix}</span></p>
</td>
<td style="border:1px solid rgb(0,0,0);padding:7px">
<p dir="ltr" style="line-height:1;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Latest build with given branch prefix i.e. RX-Y.X or RX-Y or just RX.</span></p>
<div></div>
</td>
</tr>
</tbody>
</table>
</div>
<div dir="ltr"><br />
<h3><a name="TOC-XBuddy-Path-Overrides"></a>XBuddy Path Overrides </h3>
<font size="2"><span style="font-weight:normal">There are abbreviations for some common paths.</span></font>
<div style="font-size:13px;font-weight:normal">For example, an empty path is taken to refer to the latest local build for a board.</div>
<div style="font-size:13px;font-weight:normal"><br />
</div>
<div style="font-size:13px;font-weight:normal">The defaults are found in src/platform/dev/xbuddy_config.ini, and can be overridden with shadow_xbuddy_config.ini</div>
</div>
</div>
<h2><a name="TOC-XBuddy-Interface-and-Usage"></a><b style="font-size:large">XBuddy Interface and Usage</b></h2>
</div>
<h3><a name="TOC-Devserver-rpc:-xbuddy"></a>Devserver rpc: xbuddy</h3>
<div>If there is a devserver running, stage artifacts onto it using xbuddy paths by calling "xbuddy"</div><span style="font-size:10pt">The path following xbuddy/ in the call url is interpreted as an xbuddy path, in the form </span><span style="font-size:10pt">"{local|remote}/build_id/artifact" </span><div>The up to date documentation can be found under the help section of devserver's index, http://host:port/doc/xbuddy</div><div><span style="font-size:10pt"><br /></span></div>
<div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>http://host:port/xbuddy/{remote/local}/board/version/artifact<br /><br />http://host:port/xbuddy/remote/x86-generic/R26-4000.0.0/test # To stage an x86-generic test image<br /><br />http://host:port/xbuddy/remote/x86-generic/R26-4000.0.0/test?return_dir=true # To get the directory name that the artifact will be found in<br /><br /></code></div>
</div>
</div>
<div>
<h3><a name="TOC-Devserver-rpc:-xbuddy_list"></a>Devserver rpc: xbuddy_list</h3>
</div>
<div>If there is a devserver running, check which images are currently cached on it by calling "xbuddy_list"</div>
<div><br />
</div>
<div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>http://host:port/xbuddy_list</code></div>
</div>
</div>
<div>
<h3><a name="TOC-Updating-from-a-DUT:-update_engine_client"></a>Updating from a DUT: update_engine_client</h3>
</div>
<div>If there is a devserver running, and you have access to the test device, update the device by calling update_engine_client with an omaha_url that contains an xbuddy path.</div>
<div>The omaha_url is a call to devserver's update rpc. <span style="font-size:10pt">Documentation found under the help section of devserver's index. http://</span><span style="font-size:10pt">host:port/doc/update</span></div>
<div><br />
</div>
<div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>update_engine_client --update --omaha_url=host:port/update/<br />
<br />
# or<br />
<br />
update_engine_client --update --omaha_url=host:port/update/xbuddy/{remote/local}/board/version/{image_type}<br />
<br />
# or<br />
<br />
update_engine_client --update --omaha_url=host:port/update/board/version</code></div>
</div>
</div>
<div>
<ol>
</ol>
</div>
<h3><a name="TOC-Scripts-cros-flash-"></a>Scripts (cros flash)</h3><div>To use xbuddy path with cros flash:</div><div><br /></div>
<div>
<div><div class="sites-codeblock sites-codesnippet-block"><code><font size="3">cros flash ${DEVICE} xbuddy://${XBUDDY_PATH}</font></code></div></div><div><span style="font-size:small"><br /></span></div><div><span style="font-size:small">See <a href="https://www.chromium.org/chromium-os/build/cros-flash">cros flash page</a> for more details.</span></div><div><br /></div></div>
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/using-the-dev-server/xbuddy-for-devserver">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9PQsAlpnNHQxSlQdgJ3NxZr8hs7om7UB-lPDYv_yR9qYPI0d-y4ZWQqqcBT9lTnI_bS4MbxeGgtybq4qXGRgviAIOIkzdxZr5oIB9Ez3VNpnfpyPX/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
