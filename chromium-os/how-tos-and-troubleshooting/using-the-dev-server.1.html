<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting","deleted":false,"title":"How Tos and Troubleshooting","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server","deleted":false,"title":"Dev server","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/using-the-dev-server\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/how-tos-and-troubleshooting","parentWuid":"wuid:gx:72ecb36fa9c83ecd","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Dev server","locale":"en","wuid":"wuid:gx:191065f7572d0ff9","revision":73,"path":"/chromium-os/how-tos-and-troubleshooting/using-the-dev-server","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"using-the-dev-server","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Dev server - The Chromium Projects" />
<meta itemprop="name" content="Dev server - The Chromium Projects" />
<meta property="og:title" content="Dev server - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Dev server - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../developers/discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../chromium-os.1.html" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="../how-tos-and-troubleshooting.1.html" dir="ltr">How Tos and Troubleshooting</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Dev server</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Overview"><strong>1 </strong>Overview</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Starting-the-Dev-Server"><strong>2 </strong>Starting the Dev Server</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Using-the-Dev-Server"><strong>3 </strong>Using the Dev Server</a><ol class="goog-toc"><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Setting-up-your-image-to-allow-gmerge-to-modify-it"><strong>3.1 </strong>Setting up your image to allow gmerge to modify it</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-How-to-update"><strong>3.2 </strong>How to update</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Other-options"><strong>3.3 </strong>Other options</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-How-to-customize-your-image-with-dev-packages"><strong>3.4 </strong>How to customize your image with dev packages</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-How-to-build-a-single-package-and-install-it-without-doing-a-full-update"><strong>3.5 </strong>How to build a single package and install it without doing a full update</a></li></ol></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Building-Chrome-Locally-and-using-Gmerge"><strong>4 </strong>Building Chrome Locally and using Gmerge</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Common-Tasks"><strong>5 </strong>Common Tasks</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Using-Devserver-to-Stage-and-Serve-Artifacts-from-Google-Storage"><strong>6 </strong>Using Devserver to Stage and Serve Artifacts from Google Storage</a><ol class="goog-toc"><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Stage-rpc"><strong>6.1 </strong>Stage rpc</a></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-xBuddy-rpc"><strong>6.2 </strong>xBuddy rpc</a></li></ol></li><li class="goog-toc"><a href="using-the-dev-server.1.html#TOC-Feature-Requests"><strong>7 </strong>Feature Requests</a></li></ol></div></div></div></div>
<h2><a name="TOC-Overview"></a>Overview</h2>
<p>​The dev server allows you to update your Chromium OS machine with new builds without having to copy them via a USB drive.  It also serves as a static file repository, allowing you to install your own packages and scripts making it easy to customize your machine for development purposes.</p>
<p><i>Note:  Every time you create a Chromium OS build, the URL of the dev server corresponding to your development machine is put into <code>/etc/lsb-release</code>. This file can be changed post-installation to manage a test machine's update source or can be overridden in a <code>/mnt/stateful_partition/etc/lsb-release</code>.</i></p>
<h2><a name="TOC-Starting-the-Dev-Server"></a>Starting the Dev Server</h2>
<p>​<i>Note: Before you start the dev server, you must have already run <code>build_packages.sh</code>. If you have not, please run this now.</i></p>
<p>​The first step in using the dev server is starting the web server on your development machine:</p>
<div class="sites-codeblock sites-codesnippet-block"><span style="font-family:monospace"><font color="#006000">cd ~/chromiumos/; cros_sdk  # if not already in the chroot</font><br />
<font color="#9900ff">start_devserver</font></span></div>
<h2><a name="TOC-Using-the-Dev-Server"></a>Using the Dev Server</h2>
<p>You can use the dev server in three ways:</p>
<ol>
<li> Updating your machine with the newest image built on your dev machine</li>
<li> Customizing your machine with your own packages </li>
<li> Building specific packages on your dev server and installing them on your test machine </li>
</ol>
<h3><a name="TOC-Setting-up-your-image-to-allow-gmerge-to-modify-it"></a>Setting up your image to allow gmerge to modify it</h3>
<p>By default, the rootfs image is built with verification enabled.  This prevents gmerge from writing to it to update it.  To get around this build the rootfs image using the following option (<b>NOTE</b>: if you followed the instructions in the <a href="../developer-guide.1.html">Chromium OS Developer Guide</a>, you already did this):</p>
<div class="sites-codeblock sites-codesnippet-block">
<div><code><font color="#9900ff">./build_image --noenable_rootfs_verification ...</font></code></div>
</div>
<h3><a name="TOC-How-to-update"></a>How to update</h3>
<p>Updating replaces everything on the root filesystem of your test machine with your latest build on your development machine.  This replaces the process of copying the full image to a usb key and re-running <code>/usr/sbin/chromeos-install</code>.</p>
<p>To update:</p>
<ol>
<li>Build an image on your workstation following the <a href="../developer-guide.html#TOC-Building-Chromium-OS" target="_blank">build instructions</a>.</li>
<li>On your test machine, log in and open the "About" page.  (Note: This is done by clicking on the wrench icon and selecting "About Chromium OS".  It is not done by typing "About:" in the omnibox.)  The system should fetch and apply the update from the dev server. If you prefer not to use the UI or if you'd like to force an update to the same or older image version, run the following command on your test machine:</li>
</ol>
<div class="sites-codeblock sites-codesnippet-block"><code>update_engine_client --update</code></div>
<p><i>Note:  You can also specify a different url than you built with here using --omaha_url=&lt;url&gt;.</i></p>
<p>If everything went well, this will have updated the root filesystem (/dev/sda3 or /dev/sda5) and the kernel partition (/dev/sda2 or /dev/sda4).  If you have development tools you would also like to see updated (in chromeos-dev or chromeos-test), or <b>if you use gmerge (see below)</b>, you should also update your stateful partition.  To do so, then run:</p>
<div class="sites-codeblock sites-codesnippet-block">
<div><span style="font-family:monospace;color:rgb(0,96,0);line-height:13px"><code>sudo stateful_update</code></span></div>
</div>
<p><i>Note: This will update your /usr/local/bin and /var directories. It will not affect the other directories on your stateful partition (e.g. will not overwrite your home directories).</i></p>
<p>Now your system should be fully updated and you can restart to see the changes.</p>
<h3><a name="TOC-Other-options"></a>Other options</h3>
<p>Note that by default the devserver serves the latest image and runs on port 8080.  You can change this among many other things.  Here is a brief description of some of the options.  Please see <code>./start_devserver --help</code> for more information.</p>
<ul><li><code>--use_cached</code> - Forces the devserver to use the update.gz it finds in its static dir.  This allows you to pre-generate an update payload and place it in the devserver's static file hosting directory (~/src/platform/dev/static).</li>
<li><code>--src_image</code> - Generates a delta update based from the target image on the source image.  If the source image you provide is not the image on the machine, the delta update will fail.  <i>Note that delta updates despite their name run slower than full updates (but will save you bandwidth).</i></li>
<li><code>--pregenerate_update</code> - Generates the update before starting the dev server.  This keeps from getting nasty timeouts for big update payloads <i>(necessary for most delta updates).</i></li>
<li><code>--image</code> - Serve this image to a machine that requests it.</li>
<li><code>--port</code> - Start the devserver on this port.</li>
<li><code>-t</code> - From the directory (using the latest image and/or using the archive logic) use the test image found in that directory (chromiumos_test_image.bin)</li>
<li><code>--static_dir</code> - Serve images from a file structure.  Clients can prefix which image they want in their request by modifying their omaha_url.  By default this changes the static directory to ~/src/platform/dev/static.</li></ul>
<h3><a name="TOC-How-to-customize-your-image-with-dev-packages"></a>How to customize your image with dev packages</h3>
<p>By default build_packages and build_image both have the --withdev flag enabled, so dev packages will be build and installed in your image.</p>
<h3><a name="TOC-How-to-build-a-single-package-and-install-it-without-doing-a-full-update"></a>How to build a single package and install it without doing a full update</h3>
<div> ​If you want to make a change to a single package and install it on your target machine, you can use the <code>gmerge</code> tool.   <code>gmerge</code> runs on your target machine and contacts your devserver to build packages. For instance, let's say you made a change to shill and you want to re-install it on your machine.  On your test machine, run:</div>
<div><br />
</div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code>sudo gmerge shill</code></div>
</div>
<br />
<div>This will kick off a build (emerge) of the <code>shill</code> package on your development machine, transfer it to your test machine, and use emerge to install it.   If you have already built the package on your development machine and just want to install it, you can use the -n flag to avoid the build step.<br />
<span>
<div style="margin-top:0px;margin-bottom:0px"><br />
</div>
<div style="margin-top:0px;margin-bottom:0px">
<div class="sites-codeblock sites-codesnippet-block"><code>sudo gmerge -n shill</code></div>
</div>
</span><br />
This works for just about any package that is available in portage and can be very convenient for installing packages that are not part of the default install or even the dev install.<br />
</div>
<div><br />
</div>
<p>In order to protect you from a frustrating error case, <code>gmerge</code> will refuse to install a <code>cros_workon</code> package unless you have run <code>cros_workon start</code> on that package.  You can override this behavior by passing <code>--accept_stable</code> to <code>gmerge</code>.</p>
<p>You can pass USE= and FEATURES= environment variables to gmerge just like you can on the host.  (This is a change from older versions, which used --use= arguments).  For example, you can run:</p>
<div style="margin-top:0px;margin-bottom:0px"></div>
<div class="sites-codeblock sites-codesnippet-block">
<div style="margin-top:0px;margin-bottom:0px"><code>USE=install_test </code><code>gmerge cromo</code></div>
<div></div>
</div>
<h2><a name="TOC-Building-Chrome-Locally-and-using-Gmerge"></a>Building Chrome Locally and using Gmerge</h2>
<p>If you'd like to build chrome from source, you can still use the dev server.  All you need to do is declare a few variables before starting the dev server:</p>
<div><span style="border-collapse:collapse">
<div class="sites-codeblock sites-codesnippet-block"><span style="font-family:arial,sans-serif"><code>export CHROME_ORIGIN="LOCAL_SOURCE" USE="-build_tests"</code></span><br />
<code>./start_devserver</code>
</div>
</span></div>
<p>NOTE: be sure to run the devserver from within the chroot.  While normally you may start it outside of the chroot (and it'll enter the chroot automatically), exported environment variables aren't propagated into the chroot when you do that.</p>
<p>Now on your device just run:</p>
<div class="sites-codeblock sites-codesnippet-block"><code>sudo gmerge chromeos-base/chromeos-chrome</code></div>
<p>Another useful USE flag is "-runhooks" which will not run the gclient hooks each time. While this step is a smaller percentage of the total time needed to do an incremental build, it is unncessary for doing incremental builds if you haven't changed any resources, or made changes to the Chrome gyp configuration.</p>
<p>Use flags can directly be passed to gmerge, so you can do:</p>
<div class="sites-codeblock sites-codesnippet-block"><code>USE="-build_tests -runhooks" gmerge chromeos-chrome</code></div>
<h2><a name="TOC-Common-Tasks"></a>Common Tasks</h2>
<p>To download and run functional tests, see <a href="../testing.html">http://www.chromium.org/chromium-os/testing</a></p>
<h2><a name="TOC-Using-Devserver-to-Stage-and-Serve-Artifacts-from-Google-Storage"></a>Using Devserver to Stage and Serve Artifacts from Google Storage</h2><div>A running devserver listens for calls to its stage and xbuddy rpcs.</div><h3><a name="TOC-Stage-rpc"></a>Stage rpc</h3><div>An abbreviated version of the documentation for the stage rpc is copied here, but the up to date version can be found by going to <span style="font-size:10pt">host:port/doc/stage on any running devserver.</span></div><div><br /></div><div><div>Downloads and caches the artifacts Google Storage URL. Returns once these <span style="font-size:10pt">have been downloaded on the devserver. A call to this will attempt to cache </span><span style="font-size:10pt">non-specified artifacts in the background for the given from the given URL </span><span style="font-size:10pt">following the principle of spatial locality. Spatial locality of different </span><span style="font-size:10pt">artifacts is explicitly defined in the build_artifact module. </span><span style="font-size:10pt">These artifacts will then be available from the static/ sub-directory of </span><span style="font-size:10pt">the devserver.</span></div><div><br /></div><div>To download the autotest and test suites tarballs:</div><div><span style="font-size:10pt"><br /></span></div><div><div class="sites-codeblock sites-codesnippet-block"><code>http://devserver_url:/stage?archive_url=gs://your_url/path&amp;artifacts=autotest,test_suites</code></div></div><div><br /></div><div>To download the full update payload:</div><div><br /></div><div><div><div class="sites-codeblock sites-codesnippet-block"><code>http://devserver_url:/stage?archive_url=gs://your_url/path&amp;artifacts=full_payload</code></div></div><div><br /></div></div><div>To download just a file called blah.bin:</div><div>    </div><div><div><div class="sites-codeblock sites-codesnippet-block"><code>http://devserver_url:/stage?archive_url=gs://your_url/path&amp;files=blah.bin</code></div></div></div></div><h3><a name="TOC-xBuddy-rpc"></a>xBuddy rpc</h3><div>see <a href="using-the-dev-server/xbuddy-for-devserver.html#TOC-Devserver-rpc:-xbuddy">xBuddy for Devserver &gt; xBuddy Interface and Usage</a></div><h2><a name="TOC-Feature-Requests"></a>Feature Requests</h2>
<p>There are many things that can be done to improve this system. Feel free to make suggestions and submit patches.</p></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages" class="sites-canvas-bottom-panel-wrapper" style="">
<div class="sites-subpages">
            Subpages <span id="subpages-total-number">(1):</span>
<span>
<a href="using-the-dev-server/xbuddy-for-devserver.html" dir="ltr">XBuddy for Devserver</a>
</span>
</div>
</div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/using-the-dev-server">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9xtmBGLedbJXjxMt-J38EXjGLeRuirDDiOOQGvD8PiCsnaJFCXqceCzSom9jdHx3bNllixMoQeexcg-jBx_p3hYf4andRbr4-ete5VODby27cK-ME/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
