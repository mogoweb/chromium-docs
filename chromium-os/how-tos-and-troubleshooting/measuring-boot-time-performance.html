<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting","deleted":false,"title":"How Tos and Troubleshooting","dir":"ltr"},{"path":"/chromium-os/how-tos-and-troubleshooting/measuring-boot-time-performance","deleted":false,"title":"Tools for Measuring Boot Time Performance","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/measuring-boot-time-performance\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/how-tos-and-troubleshooting","parentWuid":"wuid:gx:72ecb36fa9c83ecd","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Tools for Measuring Boot Time Performance","locale":"en","wuid":"wuid:gx:48dbb12dfbd1b27d","revision":24,"path":"/chromium-os/how-tos-and-troubleshooting/measuring-boot-time-performance","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"measuring-boot-time-performance","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Tools for Measuring Boot Time Performance - The Chromium Projects" />
<meta itemprop="name" content="Tools for Measuring Boot Time Performance - The Chromium Projects" />
<meta property="og:title" content="Tools for Measuring Boot Time Performance - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Tools for Measuring Boot Time Performance - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../developers/discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../chromium-os.1.html" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="../how-tos-and-troubleshooting.1.html" dir="ltr">How Tos and Troubleshooting</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Tools for Measuring Boot Time Performance</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr">This is a short summary of selected tools for measuring boot time performance.  The <code>bootperf</code> <font color="#000000" face="Arial, Verdana, sans-serif">command is used to run boot time performance tests on a target device.  The <code>showbootdata</code> command can display average results from previous runs of <code>bootperf</code>.  The <code>bootstat_summary</code> command can show you timings from a single boot.</font><br /><div><font color="#000000" face="Arial, Verdana, sans-serif"><br /></font></div><div><span style="font-size:20px;font-weight:bold">Requirements for bootperf</span></div><h3><a name="TOC-The-bootperf-script-uses-test_that-which-requires-that-you-build-a-test-image-and-install-it-on-your-target-device.-Once-the-image-is-installed-the-device-must-be-attached-to-the-network-and-you-ll-need-to-know-its-IP-address.-The-IP-address-can-be-easily-"></a><span style="font-weight:normal;font-size:13px">The <code>bootperf</code> script uses <code>test_that</code>, which requires that you build a test image and install it on your target device.  Once the image is installed, the device must be attached to the network, and you'll need to know its IP address.  The IP address can be easily obtained by clicking on the network selection icon in the status box with the battery status indicator.</span></h3><h3><a name="TOC-Verified-boot-and-performance"></a><font size="3">Verified boot and performance</font></h3><p><span style="font-weight:normal;font-size:13px">A word of warning about verified boot:  If you use <code>build_image</code></span> with the <code>--noenable_rootfs_verification</code> option, this will substantially impact measured boot time:  The option measurably speeds up boot.  If you want to do a fair, apples-to-apples comparison of two images, you must build both images with the same setting of the option.  Also, be aware that performance results observed with verification off may not be applicable when verification is on, and vice-versa.  The Chromium/Chrome OS boot time requirements generally only apply to systems with root verification enabled.  Put another way:  <b>If you want to claim a change makes things faster, or slower, or has no impact, the claim isn't proven until it's tested with root verification enabled.</b></p><h3><a name="TOC-What-Constitutes-a-Significant-Change"></a>What Constitutes a "Significant" Change</h3><div>Statistically, the boot time performance numbers tend to have a high variance across runs.  Moreover, small changes can't be perceived by ordinary human users.  To claim that a particular change in performance is good (or bad), you generally need the following:</div><div><ul><li>The "before" and "after" test samples should both include at least 50 cycles.</li><li>The "before" and "after" results should show a change of at least 0.1 seconds (100 ms) to the kernel to login screen time.  Changes just to intermediate phases don't count.</li></ul>Changes that don't reach this threshold can be considered performance neutral.  For changes clearly below the threshold, focus instead on software engineering questions such as "will it fix a bug?", or "will it make the code easier to maintain?".</div><div><br /></div><div><span style="font-size:20px;font-weight:bold">An example with bootperf</span></div><h3><a name="TOC-Running-the-test"></a>Running the test</h3><div>The <code>bootperf</code> command is run from inside the Chromium OS chroot environment; run <code>cros_sdk </code>before using the script.  The command should be on the default PATH inside the chroot.</div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>(cros-chroot) ~/trunk/src/scripts $ bootperf -o ~/bootdata/bootperf.sample 172.22.75.70 2</code></div><div><code>16:34:58 - /home/jrbarnette/bootdata/bootperf.sample/run.000/log.txt</code></div><div><code>16:40:18 - /home/jrbarnette/bootdata/bootperf.sample/run.001/log.txt</code></div><div><code>16:45:23</code></div><div><code>(cros-chroot) ~/trunk/src/scripts $ </code></div><div></div></div><span style="background-color:transparent;font-size:10pt"><div><span style="background-color:transparent;font-size:10pt"><br /></span></div>In the example above, the </span><code style="background-color:transparent;font-size:10pt">-o</code><span style="background-color:transparent;font-size:10pt"> option specifies a directory where the test results will be stored.  If the directory doesn't exist, it will be created.  The first argument is the IP address of the target device; the second argument is the number of test runs to execute.</span><div><br /></div>Each test run will reboot your target device 10 times.  You can expect autotest to spend about 35 seconds (or more) per boot cycle, or slightly less than 6 minutes per run.<div><h3><a name="TOC-Looking-at-results"></a>Looking at results</h3><div>After running <code>bootperf</code>, use the <code>showbootdata</code> command to display the results in a usable form.  The <code>showbootdata</code> command can be run from in- or outside of the chroot; this example shows it from inside.</div></div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>(cros-chroot) ~/trunk/src/scripts $ showbootdata ~/bootdata/bootperf.sample</code></div><div><code>(on 20 cycles):</code></div><div><code> time  s%     dt  s%  event</code></div><div><code> 2311  0%  +2311  0%  startup</code></div><div><code> 2587  1%   +276  5%  startup_done</code></div><div><code> 4420  1%  +1833  2%  x_started</code></div><div><code> 4464  1%    +44 11%  chrome_exec</code></div><div><code> 4482  1%    +18 41%  chrome_main</code></div><div><code> 5284  1%   +802  2%  login</code></div><div><code> 6207  9%   +923 60%  network</code></div><div><code>(cros-chroot) ~/trunk/src/scripts $ </code></div><div></div></div><span style="background-color:transparent;font-size:10pt"><div><span style="background-color:transparent;font-size:10pt"><br /></span></div>The output shows these columns:</span><div><ul><li>Average total time in milliseconds</li><li>Sample standard deviation of the total time as a percentage of the average</li><li>The average time difference between the current line and the previous line's total</li><li>Sample standard deviation of the differences (over all boot iterations) between the current and previous lines, as a percent of the average</li><li>The name of the event (point in boot) at which the statistic was measured</li></ul></div><div>The events listed in the output correspond to particular points in source code where sample data is taken.  The samples record accumulated time since kernel startup; they don't include time spent in the firmware.  The events correspond to the following points in boot:</div><div><ul><li><b>startup</b>:  This event marks the beginning of the <code>chromeos_startup</code> script.  This script is triggered by the <code>startup</code> event, which is the first event emitted by <code>/sbin/init <font color="#000000" face="Arial, Verdana, sans-serif">at boot.  This timestamp represents (roughly) the moment when the system first starts running user processes.</font></code></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>startup_done</b>:  This marks the point when <code>chromeos_startup</code> finishes running.  This is roughly the moment of the <code>started boot-services</code> event.</font></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>x_started</b>:  This marks the point in <code>session_manager_setup.sh</code> when the X server has completed initialization, and is ready to accept requests.  This is also the point at which <code>session_manager</code> starts running.</font></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>chrome_exec</b>:  This marks the point when <code>session_manager</code> starts the chrome browser.</font></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>chrome_main</b>:  This marks a point early in Chrome initialization, after starting <code>main()</code>.</font></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>login</b>:  This marks completion of the <code>boot-complete</code> upstart job, which is triggered when the chrome browser displays the login screen.</font></li><li><font color="#000000" face="Arial, Verdana, sans-serif"><b>network</b>:  This marks the point when <code>shill</code> records that a default network route has been added.</font></li></ul><h3><a name="TOC-Other-summaries"></a>Other summaries</h3></div><div>The boot performance tests gather more than just boot time data from kernel startup.  The <code>-k</code> option to <code>showbootdata</code> can be used to display various sets of Autotest keyvals for the test:</div><div><ul><li><code>-k boot</code> (the default) shows boot time statistics measured from kernel startup.</li><li><code>-k disk</code> shows disk read statistics (in millions of bytes) measured from kernel startup.</li><li><code>-k firmware</code> shows firmware timings measured from power on.</li><li><code>-k reboot</code> shows boot time statistics measured from the start of the shutdown prior to boot.</li></ul>Below is an example with <code>-k reboot</code>:</div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>(cros-chroot) ~/trunk/src/scripts $ showbootdata -k reboot ~/bootdata/bootperf.sample</code></div><div><code>(on 20 cycles):</code></div><div><code> diskrd  s%    delta  s%  event</code></div><div><code>   3569 19%    +3569 19%  shutdown</code></div><div><code>   4481 15%     +912  1%  firmware</code></div><div><code>   6791 10%    +2310  0%  startup</code></div><div><code>   8945  8%    +2154  1%  chrome_exec</code></div><div><code>   9765  7%     +820  2%  login</code></div><div></div></div><p>As with <code>-k boot</code>, the times are measured in milliseconds.  The events correspond to the following points in the reboot sequence:</p><ul><li><b>shutdown</b>: This marks the end of shutdown, when the system hands control back to the firmware to request reboot.</li><li><b>firmware</b>: This marks the end of firmware startup and kernel decompression, when the kernel begins initialization.</li><li><b>startup</b>, <b>chrome_exec</b>, <b>login</b>: These are the same as the boot time events described above.</li></ul><h3><a name="TOC-Raw-results"></a>Raw results</h3><div>If you want to write scripts to perform customized processing of the data, raw results can be extracted using the <code>-r</code> option to <code>showbootdata<font color="#000000" face="Arial, Verdana, sans-serif">.</font></code></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>(cros-chroot) ~/trunk/src/scripts $ showbootdata -r ~/bootdata/bootperf.sample</code></div><div><code>  0  2310  2560  4420  4470  4490  5290  6070</code></div><div><code>  1  2310  2580  4370  4420  4440  5250  6070</code></div><div><code>  2  2330  2600  4480  4520  4550  5360  6060</code></div><div><code>  3  2320  2610  4430  4480  4490  5270  6350</code></div><div><code>  4  2310  2600  4390  4440  4450  5230  6050</code></div><div><code>  5  2310  2580  4430  4470  4490  5280  6070</code></div><div><code>  6  2290  2550  4350  4400  4410  5220  6040</code></div><div><code>  7  2320  2590  4430  4470  4490  5300  6060</code></div><div><code>  8  2320  2620  4420  4460  4480  5270  6090</code></div><div><code>  9  2320  2590  4450  4500  4510  5330  6050</code></div><div><code> 10  2310  2600  4440  4480  4490  5330  6050</code></div><div><code> 11  2300  2590  4400  4450  4460  5260  6100</code></div><div><code> 12  2310  2580  4430  4470  4480  5290  6130</code></div><div><code> 13  2300  2570  4380  4420  4440  5230  6120</code></div><div><code> 14  2310  2580  4440  4480  4500  5290  6050</code></div><div><code> 15  2320  2600  4400  4450  4460  5260  8510</code></div><div><code> 16  2310  2570  4430  4480  4500  5300  6090</code></div><div><code> 17  2290  2570  4410  4450  4470  5260  6060</code></div><div><code> 18  2310  2590  4450  4490  4520  5350  6040</code></div><div><code> 19  2310  2600  4440  4480  4510  5310  6070</code></div><div><code>(cros-chroot) ~/trunk/src/scripts $ </code></div><div></div></div><span style="background-color:transparent;font-size:10pt"><div><span style="background-color:transparent;font-size:10pt"><br /></span></div>The first column is the iteration number; the remaining columns correspond to the time sampled at the corresponding event.  In this example there were twenty boot time data points, so there are twenty lines of output.  Note that the event names (and order) are implicit.</span><div><font color="#000000" face="Arial, Verdana, sans-serif"><br /></font></div><div>Data displayed can be restricted to selected events using the <code>-e</code> option.</div><div><br /></div><div><div></div></div><div class="sites-codeblock sites-codesnippet-block"><div><div><code>(cros-chroot) ~/trunk/src/scripts $ showbootdata -e startup,chrome_exec,login ~/bootdata/bootperf.sample</code></div><div><code>(on 20 cycles):</code></div><div><code> time  s%     dt  s%  event</code></div><div><code> 2311  0%  +2311  0%  startup</code></div><div><code> 4464  1%  +2153  1%  chrome_exec</code></div><div><code> 5284  1%   +820  2%  login</code></div></div><div></div></div><br /><div><h2><a name="TOC-Using-bootstat_summary"></a>Using bootstat_summary</h2><div>The <code>bootstat_summary</code> command is a device-resident command used to show the timings of events since the last boot.  The command is different from <code>bootperf</code> and <code>showbootdata</code> in that you run it on the target device, and it can't show an average across multiple boots.  The command is present in all images; you do not need a test image to use the command.</div><div><br /></div><div>Here's a sample:</div><div><br /></div><div><div></div></div><div class="sites-codeblock sites-codesnippet-block"><div><div><code>chronos@localhost ~ $ bootstat_summary</code></div><div><code> time %cpu    dt  %dt  event</code></div><div><code> 1060  22%  1060  22%  pre-startup</code></div><div><code> 1390  37%   330  86%  post-startup</code></div><div><code> 3260  72%  1870  97%  x-started</code></div><div><code> 3370  72%   110  89%  chrome-exec</code></div><div><code> 4090  76%   720  92%  chrome-main</code></div><div><code> 5620  65%  1530  37%  login-prompt-ready</code></div><div><code> 6460  64%   840  57%  network-ethernet-configuration</code></div><div><code> 6490  64%    30  50%  network-ethernet-ready</code></div><div><code> 6500  64%    10  50%  network-ethernet-online</code></div><div><code> 6540  64%    40  56%  network-ethernet-ready</code></div><div><code> 6550  64%    10  75%  network-ethernet-online</code></div><div><code> 8310  60%  1760  43%  login-prompt-visible</code></div><div><code> 8340  60%    30  83%  boot-complete</code></div></div><div><code><div>chronos@localhost ~ $                                                                                                                                                                          </div></code></div><div></div></div><div><br /></div>The listed events include the events reported in <code>showbootdata</code> (using slightly different names), plus some additional events.  The meaning of the columns is covered below:</div><div><ul><li><code>time</code>: Timestamp for the event, measured in milliseconds since boot.</li><li><code>%cpu</code>: Total CPU utilization since boot.</li><li><code>dt</code>: Time in milliseconds since the previous event</li><li><code>%dt</code>:  CPU utilization in the interval since the previous event.</li><li><code>event</code>: The name of the event.</li></ul></div><div>The events reported in <code>showbootdata</code> are a subset of the events reported by <code>bootstat_summary</code>.  Here's the correspondence between the two:</div><div><table border="1" bordercolor="#888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px"><tbody><tr><td style="width:137px;height:25px"> <code>bootstat_summary</code></td><td style="width:114px;height:25px"> <code>showbootdata</code></td></tr><tr><td style="width:137px;height:14px"> pre-startup</td><td style="width:114px;height:14px">startup<br /></td></tr><tr><td>post-startup</td><td>startup_done</td></tr><tr><td>x-started</td><td>x_started</td></tr><tr><td>chrome-exec</td><td>chrome_exec </td></tr><tr><td>chrome-main</td><td>chrome_main </td></tr><tr><td>boot-complete</td><td>login</td></tr><tr><td>network-ethernet-ready</td><td>network </td></tr></tbody></table><br /><div style="line-height:13px">N.B. The CPU utilization values can be inaccurate for short intervals (less than a few hundred milliseconds).  In some cases, you may even see negative utilization.  This is a limitation in the underlying kernel code that produces the statistics.</div></div><div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/how-tos-and-troubleshooting/measuring-boot-time-performance">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9dHkiZlnEH3Ifv4nOzCA_bDJ1_SA-Qe9d_47UNDz-5WwKv3hGAR-b2SBOsxn4wgNYJSXF2JPP1-JQ1LXfRWN1ppycsENVghLjQBfRbhF7lW4Uz3ZC/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
