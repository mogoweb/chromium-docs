<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/build","deleted":false,"title":"Chromium OS Build","dir":"ltr"},{"path":"/chromium-os/build/cros-deploy","deleted":false,"title":"Cros Deploy","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/build/cros-deploy\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os/build","parentWuid":"wuid:gx:7c2378e91050b97e","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Cros Deploy","locale":"en","wuid":"wuid:gx:6f49d7234d72ba55","revision":11,"path":"/chromium-os/build/cros-deploy","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"cros-deploy","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Cros Deploy - The Chromium Projects" />
<meta itemprop="name" content="Cros Deploy - The Chromium Projects" />
<meta property="og:title" content="Cros Deploy - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Cros Deploy - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/chromium-os" dir="ltr">Chromium OS</A>‎ &gt; ‎<A href="/chromium-os/build" dir="ltr">Chromium OS Build</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Cros Deploy</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:400px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Overview"><strong>1 </strong>Overview</a></li><li class="goog-toc"><a href="#TOC-Requirements"><strong>2 </strong>Requirements</a></li><li class="goog-toc"><a href="#TOC-Example-usage"><strong>3 </strong>Example usage</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Device"><strong>3.1 </strong>Device</a></li><li class="goog-toc"><a href="#TOC-How-to-specify-package-names-"><strong>3.2 </strong>How to specify package names?</a></li><li class="goog-toc"><a href="#TOC-Installation-root"><strong>3.3 </strong>Installation root</a></li></ol></li><li class="goog-toc"><a href="#TOC-Known-problems-and-fixes"><strong>4 </strong>Known problems and fixes</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Where-is-Cros-Deploy-"><strong>4.1 </strong>Where is Cros Deploy?</a></li><li class="goog-toc"><a href="#TOC-Failed-to-emerge-package...-"><strong>4.2 </strong>Failed to emerge package...?</a></li><li class="goog-toc"><a href="#TOC-No-space-left-on-device...-"><strong>4.3 </strong>No space left on device...?</a></li><li class="goog-toc"><a href="#TOC-Complete-usage"><strong>4.4 </strong>Complete usage</a></li></ol></li></ol></div></div></div></div>
<h2><a name="TOC-Overview"></a>Overview</h2>
<p>Cros Deploy is a script to deploy (install) a package to your Chromium OS device. It copies the binary packages built in your chroot to the target device and installs (emerges) on the device. Cros Deploy is written to replace <code>cros_package_to_live</code> and <code>gmerge</code> in the near future.</p>
<p><font color="#ff0000">NOTE: Cros Deploy does <b>NOT</b> build packages for you. Please make sure you have built all the requested packages using <code>emerge</code> before invoking <code>cros deploy</code>.</font><br />
NOTE: To be able to write to your rootfs partition, Cros Deploy may remount your rootfs partition as read-write, or disables the rootfs verification on your device.</p>
<p>Cros Deploy is part of the CrosD project which aims to provide tools with more features, better and more consistent UI. Currently, CrosD tools include:</p>
<div>
<ul><li><a href="https://www.chromium.org/chromium-os/build/cros-deploy" style="background-color:transparent;font-size:10pt">Cros Deploy</a>: Install packages to device.</li>
<li><a href="https://www.chromium.org/chromium-os/build/cros-flash" style="background-color:transparent;font-size:10pt">Cros Flash</a>: Update device with an image.</li></ul>
</div>
<p>To know more about the design and implementation of Cros Deploy, please look at the <a href="https://docs.google.com/a/google.com/document/d/1UdDTCC5V9R6VFMsiIzclMCSNwr-Iz42o6t_NfhEEGc4/">design doc</a> (may be slightly outdated).</p>
<h2><a name="TOC-Requirements"></a>Requirements</h2>
<div>
<ol><li><span style="background-color:transparent;font-size:10pt">Chroot: Cros Deploy needs to run in chroot.</span></li>
<li>A SSH-able Chromium OS device: Any Chromium OS <b>test</b> image will work (base or dev images won't).</li>
</ol>
</div>
<p>If your device is currently running a non-test image, you may want to use a USB stick to image the device.</p>
<h2><a name="TOC-Example-usage"></a>Example usage</h2>
<div class="sites-codeblock sites-codesnippet-block">
<code>cros deploy &lt;device&gt; &lt;pkg1&gt; &lt;pkg2&gt; ...</code><br /><br />
<code>&lt;device&gt;  :</code><code> Required. The IP[:port] address (or hostname[:port]) of your ChromiumOS device; port is optional.</code><br />
<code>&lt;pkgs&gt;    : Packages to install.</code><code> </code>
</div>
<p>For example, to install <code>cherrypy</code> package to your device:</p>
<div class="sites-codeblock sites-codesnippet-block">
<code><font size="3">cros deploy 192.168.1.7 cherrypy</font></code>
</div>
<h3><a name="TOC-Device"></a>Device</h3>
<p>Device can be</p>
<div class="sites-codeblock sites-codesnippet-block">
<code>ssh://hostname[:port]</code>
</div>
<p>or</p>
<div class="sites-codeblock sites-codesnippet-block"><code>hostname[:port]</code></div>
<p>Port number is the SSH port to use to connect to your device; it is optional (defaults to 22)</p>
<h3><a name="TOC-How-to-specify-package-names-"></a>How to specify package names?</h3>
<p>Cros Deploy does the best to figure out what packages you want to install, even when you do not enter a complete/unique package name. When there is ambiguity, Cros Deploy may prompt the user to choose.</p>
<p>A unique package name should includes three parts:</p>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code><font size="3">${category}/${package}-${version}</font></code></div>
</div>
<p>For example,</p>
<div>
<div class="sites-codeblock sites-codesnippet-block"><code><font size="3">dev-python/cherrypy-3.1.2</font></code></div>
</div>
<p>Cros Deploy accepts any of the following format:</p>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code><font size="3">${category}/${package}-${version}</font></code></div>
<div><code><font size="3">${category}/${package}</font></code></div>
<div><code><font size="3">${package}-${version}</font></code></div>
<div><code><font size="3">${package}</font></code></div>
</div>
<p>When the given input such as ${package} (e.g. cherrypy) is unique, which is the common case, Cros Deploy automatically selects the right package for you. If, however, ${package} exists in multiple categories, Cros Deploy prompts the user to choose. For example,</p>
<div>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>Multiple matches found for cherrypy: </code></div>
<div><code>  [0]: dev-python/cherrypy</code></div>
<div><code>  [1]: foo/cherrypy</code></div>
<div><code>Enter your choice to continue [0-1]: 5</code></div>
</div>
</div>
<p>When there are multiple versions available, Cros Deploy chooses the best visible one. For example, if you <code>cros_workon</code> a package, Cros Deploy will try to use the 9999 version instead</p>
<div>
<div>
<h3><a name="TOC-Installation-root"></a>Installation root</h3>
</div>
</div>
<p>By default, Cros Deploy installs all packages at root ("/"). User can override this with "<code>--root</code>". Note that many dev packages are installed in<code> /usr/local</code></p>
<div>
<h2><a name="TOC-Known-problems-and-fixes"></a>Known problems and fixes</h2>
<h4><a name="TOC-Many-of-the-problems-you-have-encountered-may-have-been-fixed.-Make-sure-you-keep-your-chroot-up-to-date-before-filing-a-bug."></a></h4>
<h3><a name="TOC-Where-is-Cros-Deploy-"></a><b>Where is Cros Deploy?</b></h3>
<h4><a name="TOC-1.-Where-is-Cros-Flash-"></a></h4>
<p>Cros Deploy is in the <code>chromite </code>repo. The script is <code>chromite/cros/commands/cros_deploy.py</code>. If you cannot find it, update your tree with<code> repo sync</code>. </p>
</div>
<div>
<h4 style="color:rgb(0,0,0);font-family:Arial,Verdana,sans-serif;font-size:13.3333330154419px;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255)"><a name="TOC-1.-Where-is-Cros-Flash-" style="color:rgb(0,102,204);outline:none"></a></h4><h3 style="text-align:start;text-indent:0px;background-color:rgb(255,255,255)"><a name="TOC-Failed-to-emerge-package...-"></a><span style="background-color:transparent">Failed to emerge package...</span><b style="color:rgb(0,0,0);font-family:Arial,Verdana,sans-serif;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:normal;text-transform:none;white-space:normal;word-spacing:0px">?</b></h3><p>Errors like the one below are likely caused by <code>emerge</code> missing on the target system. (This can happen if the stateful partition is wiped after the OS image has been deployed. Also remember that the target needs to run a <b>test</b> image.)</p><div><div></div></div><div class="sites-codeblock sites-codesnippet-block"><div><div><code>13:14:55: ERROR: Failed to emerge package chromeos-chrome-46.0.2472.0_rc-r1.tbz2</code></div><div><code>13:14:56: ERROR: Oops. Something went wrong.</code></div><div><code>13:14:56: ERROR: cros deploy failed before completing.</code></div><div><code>13:14:56: ERROR: &lt;class 'chromite.lib.cros_build_lib.RunCommandError'&gt;: return code: 127</code></div><div><code>Failed command "ssh -p 22 '-oConnectionAttempts=4' '-oUserKnownHostsFile=/dev/null' '-oProtocol=2' '-oConnectTimeout=30' '-oServerAliveCountMax=3' '-oStrictHostKeyChecking=no' '-oServerAliveInterval=10' '-oNumberOfPasswordPrompts=0' -i /tmp/ssh-tmpb5S6kc/testing_rsa root@172.26.58.201 -- 'FEATURES=-sandbox' 'PORTAGE_CONFIGROOT=/usr/local' "CONFIG_PROTECT='-*'" 'PKGDIR=/usr/local/tmp/cros-deploy/tmp.6xIVEajmyJ/packages' 'PORTDIR=/usr/local/tmp/cros-deploy/tmp.6xIVEajmyJ' 'PORTAGE_TMPDIR=/usr/local/tmp/cros-deploy/tmp.6xIVEajmyJ/portage-tmp' emerge --usepkg /usr/local/tmp/cros-deploy/tmp.6xIVEajmyJ/packages/chromeos-base/chromeos-chrome-46.0.2472.0_rc-r1.tbz2 '--root=/'", cwd=None, extra env={'LC_MESSAGES': 'C'}</code></div></div></div><h3><a name="TOC-No-space-left-on-device...-"></a><span style="background-color:transparent"><font size="3">No space left on device...?</font></span></h3><p><span style="background-color:transparent"><font size="2">The following mostly occurs when deploying large packages such as Chrome:</font></span></p><div><span style="background-color:transparent"><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>rsync: write failed on "/usr/local/tmp/cros-deploy/tmp.Ts2Ayh1nKT/packages/chromeos-base/chromeos-chrome-46.0.2472.0_rc-r1.tbz2": No space left on device (28)</code></div><div><code>rsync error: error in file IO (code 11) at receiver.c(393) [receiver=3.1.1]</code></div><div><code>rsync: [sender] write error: Broken pipe (32)</code></div><div><code>13:21:46: ERROR: Oops. Something went wrong.</code></div><div><code>13:21:46: ERROR: cros deploy failed before completing.</code></div><div><code>13:21:46: ERROR: &lt;class 'chromite.lib.cros_build_lib.RunCommandError'&gt;: return code: 11</code></div><div style="font-size:13.3333330154419px"></div></div></span><p><span style="font-size:small">This happens because the target's </span><code>/usr/local/tmp</code><span style="font-size:small"> has insufficient space to download the package. A workaround is pointing <code>/usr/local/tmp</code> to <code>/tmp</code>:</span></p></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><span style="background-color:transparent"><code>rm -r /usr/local/tmp</code></span></div><div><span style="background-color:transparent"><code>ln -s /tmp /usr/local/tmp</code></span></div><div></div></div><h3><a name="TOC-Complete-usage"></a><span style="background-color:transparent"><font size="3">Complete usage</font></span></h3><p>View the most up-to-date usage by running <code>cros deploy -h</code></p>
</div>
<div>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>usage: cros deploy [-h]</code></div>
<div><code>                   [--log-level {fatal,critical,error,warning,info,debug}]</code></div>
<div><code>                   [--debug] [--nocolor] [--board BOARD] [--no-strip]</code></div>
<div><code>                   [--unmerge] [--root ROOT] [--no-clean-binpkg]</code></div>
<div><code>                   [--emerge-args EMERGE_ARGS] [--private-key PRIVATE_KEY]</code></div>
<div><code>                   device packages [packages ...]</code></div>
<div><br />
</div>
<div><code>Deploy the requested packages to the target device.</code></div>
<div><br />
</div>
<div><code>  This command assumes the requested packages are already built in the</code></div>
<div><code>  chroot. This command needs to run inside the chroot for inspecting</code></div>
<div><code>  the installed packages.</code></div>
<div><br />
</div>
<div><code>  Note: If the rootfs on your device is read-only, this command</code></div>
<div><code>  remounts it as read-write. If the rootfs verification is enabled on</code></div>
<div><code>  your device, this command disables it.</code></div>
<div><code>  </code></div>
<div><br />
</div>
<div><code>positional arguments:</code></div>
<div><code>  device                IP[:port] address of the target device.</code></div>
<div><code>  packages              Packages to install.</code></div>
<div><br />
</div>
<div><code>optional arguments:</code></div>
<div><code>  -h, --help            show this help message and exit</code></div>
<div><code>  --board BOARD         The board to use. By default it is automatically</code></div>
<div><code>                        detected. You can override the detected board with</code></div>
<div><code>                        this option.</code></div>
<div><code>  --no-strip            Do not run strip_package to filter out preset paths in</code></div>
<div><code>                        the package. Stripping removes debug symbol files and</code></div>
<div><code>                        reduces the size of the package significantly.</code></div>
<div><code>                        Defaults to always strip.</code></div>
<div><code>  --unmerge             Unmerge requested packages.</code></div>
<div><code>  --root ROOT           Package installation root, e.g. '/' or</code></div>
<div><code>                        '/usr/local'(default: '/').</code></div>
<div><code>  --no-clean-binpkg     Do not clean outdated binary packages. Defaults to</code></div>
<div><code>                        always clean.</code></div>
<div><code>  --emerge-args EMERGE_ARGS</code></div>
<div><code>                        Extra arguments to pass to emerge.</code></div>
<div><code>  --private-key PRIVATE_KEY</code></div>
<div><code>                        SSH identify file (private key).</code></div>
<div><br />
</div>
<div><code>Debug options:</code></div>
<div><code>  --log-level {fatal,critical,error,warning,info,debug}</code></div>
<div><code>                        Set logging level to report at.</code></div>
<div><code>  --debug               Alias for `--log-level=debug`. Useful for debugging</code></div>
<div><code>                        bugs/failures.</code></div>
<div><code>  --nocolor             Do not use colorized output (or `export NOCOLOR=true`)</code></div>
<div><br />
</div>
<div><code>To deploy packages:</code></div>
<div><code>  cros deploy device power_manager cherrypy</code></div>
<div><br />
</div>
<div><code>To uninstall packages:</code></div>
<div><code>  cros deploy --unmerge cherrypy</code></div>
<div><br />
</div>
<div><code>For more information of cros build usage:</code></div>
<div><code>  cros build -h</code></div>
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/build/cros-deploy">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq99EIX91sBwKz61nD6xLUaJUXYIXAemvdgOCmIuGa2Yuv817xgBojs09LYIVJ6UZXX3PMdLI-cwtpCpVTxib8pYKo0_jVTz1FYRvDKU1wUyL1qND4O/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
