<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/chromium-os","deleted":false,"title":"Chromium OS","dir":"ltr"},{"path":"/chromium-os/python-style-guidelines","deleted":false,"title":"Python Style Guidelines","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/chromium-os/python-style-guidelines\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/chromium-os","parentWuid":"wuid:gx:83df2ab1f8880ba","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Python Style Guidelines","locale":"en","wuid":"wuid:gx:9285caaeb10df1d","revision":29,"path":"/chromium-os/python-style-guidelines","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"python-style-guidelines","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Python Style Guidelines - The Chromium Projects" />
<meta itemprop="name" content="Python Style Guidelines - The Chromium Projects" />
<meta property="og:title" content="Python Style Guidelines - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Python Style Guidelines - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/chromium-os" dir="ltr">Chromium OS</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Python Style Guidelines</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Introduction"><strong>1 </strong>Introduction</a></li><li class="goog-toc"><a href="#TOC-Official-Style-Guide"><strong>2 </strong>Official Style Guide</a></li><li class="goog-toc"><a href="#TOC-Other-notable-python-style-guides"><strong>3 </strong>Other notable python style guides</a></li><li class="goog-toc"><a href="#TOC-Describing-arguments-in-docstrings"><strong>4 </strong>Describing arguments in docstrings</a></li><li class="goog-toc"><a href="#TOC-Imports"><strong>5 </strong>Imports</a></li><li class="goog-toc"><a href="#TOC-The-shebang-line"><strong>6 </strong>The shebang line</a></li><li class="goog-toc"><a href="#TOC-String-formatting"><strong>7 </strong>String formatting</a></li><li class="goog-toc"><a href="#TOC-TODOs"><strong>8 </strong>TODOs</a></li><li class="goog-toc"><a href="#TOC-pylint"><strong>9 </strong>pylint</a></li><li class="goog-toc"><a href="#TOC-Other-Considerations"><strong>10 </strong>Other Considerations</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Unit-tests"><strong>10.1 </strong>Unit tests</a></li><li class="goog-toc"><a href="#TOC-Main-Modules"><strong>10.2 </strong>Main Modules</a></li><li class="goog-toc"><a href="#TOC-Other"><strong>10.3 </strong>Other</a></li></ol></li></ol></div></div></div></div>
<h2><a name="TOC-Introduction"></a>Introduction</h2>
<p>You should follow this guide for all python source code that is created as part of the Chromium OS project i.e. src/platform/*.  You may not like some bits of it, but you still need to follow it.  In doing so, you ensure that others can work with your code.</p>
<p>This guide may be ignored if you are working on code that is part of an open source project that already conforms to a different style i.e. generally Python code in src/third_party.  Autotest is a great example of this--see the <a href="https://www.chromium.org/chromium-os/python-style-guidelines#TOC-Other-notable-python-style-guides">other notable python style guides</a> below.</p>
<p>See also overall <a href="https://www.chromium.org/developers/coding-style">Chromium coding style</a>.</p>
<hr />
<h2><a name="TOC-Official-Style-Guide"></a>Official Style Guide</h2>
<p>The <a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html">Google Python Style guide</a> is the official python style guide for Chromium OS original code.  Note that we deviate from that guide in two ways (in order to match the internal Google Python Style guide):<br />
</p>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><li><a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Indentation#Indentation">Indentation</a>: use 2, not 4, spaces</li>
</blockquote>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><li><a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Naming#Naming">Naming</a>: Functions and Method names use CapWords() style, not lower_with_under()</li>
</blockquote>
<blockquote style="margin:0 0 0 40px;border:none;padding:0px">
<blockquote style="margin:0 0 0 40px;border:none;padding:0px"><li>The only exception to this rule is the main() function -- we do not use Main()</li>
</blockquote>
</blockquote>
<p>If that guide is silent on an issue, then you should fall back to <a href="http://www.python.org/dev/peps/pep-0008/">PEP-8</a>.</p>
<p><a href="http://www.python.org/dev/peps/pep-0257/">PEP-257</a> is referenced by PEP-8.  If it isn't covered in the <a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Comments#Comments">Comments section</a>, you can also fall back to PEP-257.</p>
<hr />
<h2><a name="TOC-Other-notable-python-style-guides"></a>Other notable python style guides</h2>
<p>There are a number of other python style guidelines out there.</p>
<div>
<ul><li><a href="https://chromium.googlesource.com/chromiumos/third_party/autotest/+/master/CODING_STYLE">The CODING STYLE file for autotest</a> - When working on autotest code (or any autotest tests), you should ignore the Chromium OS style guidelines (AKA this page) and use the autotest ones.</li></ul>
</div>
<hr />
<h2><a name="TOC-Describing-arguments-in-docstrings"></a>Describing arguments in docstrings</h2>
<p><a href="http://www.python.org/dev/peps/pep-0257/">PEP-257</a> says that "The docstring for a function or method should summarize its behavior and document its arguments, return value(s), side effects, exceptions raised, and restrictions.  However, it doesn't specify any details of what this should look like.</p>
<p>Fortunately, the Google python style guide provides a <a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Comments#Comments">reasonable syntax for arguments and return values</a>.  We will use that as our standard (adjusted to two-space indentation):</p>
<div>
<div></div>
</div>
<div class="sites-codeblock sites-codesnippet-block">
<div>
<div><code>def FetchBigtableRows(big_table, keys, other_silly_variable=None):</code></div>
<div><code>  """Fetches rows from a Bigtable.</code></div>
<div><br />
</div>
<div><code>  Retrieves rows pertaining to the given keys from the Table instance</code></div>
<div><code>  represented by big_table.  Silly things may happen if</code></div>
<div><code>  other_silly_variable is not None.</code></div>
<div><br />
</div>
<div><code>  Args:</code></div>
<div><code>    big_table: An open Bigtable Table instance.</code></div>
<div><code>    keys: A sequence of strings representing the key of each table row</code></div>
<div><code>        to fetch.</code></div>
<div><code>    other_silly_variable: Another optional variable, that has a much</code></div>
<div><code>        longer name than the other args, and which does nothing.</code></div>
<div><br />
</div>
<div><code>  Returns:</code></div>
<div><code>    A dict mapping keys to the corresponding table row data</code></div>
<div><code>    fetched. Each row is represented as a tuple of strings. For</code></div>
<div><code>    example:</code></div>
<div><br />
</div>
<div><code>    {'Serak': ('Rigel VII', 'Preparer'),</code></div>
<div><code>     'Zim': ('Irk', 'Invader'),</code></div>
<div><code>     'Lrrr': ('Omicron Persei 8', 'Emperor')}</code></div>
<div><br />
</div>
<div><code>    If a key from the keys argument is missing from the dictionary,</code></div>
<div><code>    then that row was not found in the table.</code></div>
<div><br />
</div>
<div><code>  Raises:</code></div>
<div><code>    IOError: An error occurred accessing the bigtable.Table object.</code></div>
<div><code>  """</code></div>
<div><code>  pass</code></div>
</div>
</div>
<p>Specifically:</p>
<div>
<ul><li><b>Required</b>  of all <b>public methods</b> to follow this convention.</li>
<li><b>Encouraged </b>for all<b> private methods</b> to follow this convention.  May use a one-line sentence describing the function and return value if it's simple.</li>
<li>All arguments should be described in the <code>Args:</code> section, using the format above.</li>
<ul><li>Ordering of descriptions should match order of parameters in function.</li>
<li>For two-line descriptions, indent the 2nd line 4 spaces.</li></ul>
<li>If present, <code>Args:</code>, <code>Returns:</code>, and <code>Raises:</code> should be the last three things in the docstring, separated by a blank line each.</li></ul>
</div>
<hr />
<h2><a name="TOC-Imports"></a>Imports</h2>
<p>The following rules apply to imports (in addition to rules already talked about in <a href="http://www.python.org/dev/peps/pep-0008/">PEP-8</a>):</p>
<div>
<ul><li>It is OK to import packages, modules, and things within a module.  This is mentioned solely because it contradicts the <a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Imports#Imports">section on imports in the Google Style Guide</a> (which, remember, is not an authority for Chromium OS).  </li>
<ul><li>Said another way, this is completely OK: <code>from subprocess import Popen, PIPE</code></li>
<li><b>NOTE</b>: Although not required, we still may want to encourage people to only import packages and modules.  Specifically: it makes working with <a href="http://code.google.com/p/pymox/">mox</a> easier.</li></ul>
<li>Relative imports are forbidden (<a href="http://www.python.org/dev/peps/pep-0008/">PEP-8</a> only "highly discourages" them).  Where absolutely needed, the <code>from __future__ import absolute_import</code> syntax should be used (see <a href="http://www.python.org/dev/peps/pep-0328/">PEP-328</a>).</li>
<li>Do not use <code>import *</code>.  Always be explicit about what you are importing.  Using <code>import *</code> is useful for interactive python but shouldn't be used in checked in code.</li></ul>
</div>
<hr />
<h2><a name="TOC-The-shebang-line"></a>The shebang line</h2>
<p>All files that are meant to be executed should start with the line:</p>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>#!/usr/bin/python2</code></div>
</div>
<p>If your system doesn't support that, it is sufficiently unusual for us to not worry about compatibility with it.  Most likely it will break in other fun ways.</p>
<p>Note that files that are not meant to be executed should not contain a shebang line.</p>
<hr />
<h2><a name="TOC-String-formatting"></a>String formatting</h2>
<p>The <a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Strings#Strings">Google style guide</a> says that the '{}'.format() style is permitted. That is true, but in CrOS we much more often/always use % instead. You should stick to using % in CrOS code to match existing codebases.</p>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>x = 'name: %s; score: %d' % (name, n)</code></div>
</div>
<p>Also keep in mind that for logging type functions, we don't format in place. Instead, we pass them as args to the function.</p>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>logging.info('name: %s; score: %d', name, n)</code></div>
</div>
<hr />
<h2><a name="TOC-TODOs"></a>TODOs</h2>
<p>It is OK to leave TODOs in code.  Why?  Encouraging people to at least document parts of code that need to be thought out more (or that are confusing) is better than leaving this code undocumented.</p>
<p>All TODOs should be formatted like:</p>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>TODO(username): Revisit this code when the frob feature is done.</code></div>
</div>
<p>...where <code>username</code> is your chromium.org username.  If you don't have a chromium.org username, please use an email address.</p>
<div>
<p>Please <b>do not</b> use other forms of TODO (like <code>TBD</code>, <code>FIXME</code>, <code>XXX</code>, etc).  This makes TODOs much harder for someone to find in the code.</p>
<hr />
<h2><a name="TOC-pylint"></a>pylint</h2>
<p>Python code written for Chromium OS should be "pylint clean".</p>
<p>Pylint is a utility that analyzes python code to look for bugs and for style violations.  We run it in Chromium OS because:</p>
<div>
<ul><li>It can catch bugs at "compile time" that otherwise wouldn't show up until runtime.  This can include typos and also places where you forgot to import the required module.</li>
<li>It helps to ensure that everyone is following the style guidelines.</li></ul>
</div>
<p>Pylint is notoriously picky and sometimes warns about things that are really OK.  Because of this, we:</p>
<div>
<ul><li>Disable certain warnings in the Chromium OS pylintrc.</li>
<li>Don't consider it an problem to locally disable warnings parts of code.  <b>NOTE</b>: There should be a high bar for disabling warnings.  Specifically, you should first think about whether there's a way to rewrite the code to avoid the warning before disabling it.</li></ul>
<p>You can use <code>cros lint</code> so that we can be sure everyone is on the same version.  This should work outside and inside the chroot.</p>
</div>
<hr />
<h2><a name="TOC-Other-Considerations"></a>Other Considerations</h2>
<h3><a name="TOC-Unit-tests"></a>Unit tests</h3>
<p>All python modules should have a corresponding unit test module called <code>&lt;original name&gt;_unittest.py</code> in the same directory.  We use a few related modules (they're available in the chroot as well):</p>
<ul><li><a href="http://www.voidspace.org.uk/python/mock/">mock</a> (<code>import mock</code>) for testing mocks</li>
<ul><li>it has become the official Python mock library starting in 3.3</li>
<li><a href="https://code.google.com/p/pymox/wiki/MoxDocumentation">pymox</a> (<code>import mox</code>) is the old mock framework</li>
<ul><li>you'll still see code using this as not all have been migrated to mock yet</li></ul></ul>
<li><a href="http://docs.python.org/library/unittest.html">unittest</a> (<code>import unittest</code>) for unit test suites and methods for testing</li></ul>
<h3><a name="TOC-Main-Modules"></a>Main Modules</h3>
<div>
<ul><li>All main modules require a <code>main</code> method.  Use <code>if __name__ == 'main': main(sys.argv[1:])</code> to invoke (not on one line of course).</li><ul><li>If your main func wants <code>argv[0]</code>, you should use <code>sys.argv[0]</code> directly. If you're trying to print an error message, then usually you want to use <code>argparse</code> (see below) and the <code>parser.error()</code> helper instead.</li></ul>
<li>Main modules should have a symlink without an extension that point to the .py file.  All actual code should be in .py files.</li></ul>
<h3><a name="TOC-Other"></a>Other</h3>
<ul><li>There should be one blank line between conditional blocks</li>
<li>We support use of <font color="#006000" face="monospace">argparse</font> over <code>GFlags</code> or <code>optparse</code>.</li></ul>
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/chromium-os/python-style-guidelines">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXukca4jaDOG9SuQz_G8t7HldzFgFDMgsfYLfJSfn8EXKkIOoq9nGrKX1NrGymq0Bhc13OM6x2WnBARAZWwbqnMg_v63K8fFI8NsKe1y3YTZqY1aZqzqAVPexs6lATlyxRVGHRKD/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
