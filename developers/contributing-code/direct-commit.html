<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/contributing-code","deleted":false,"title":"Contributing Code","dir":"ltr"},{"path":"/developers/contributing-code/direct-commit","deleted":false,"title":"Directly committing code","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/contributing-code/direct-commit\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/contributing-code","parentWuid":"wuid:gx:4caafdc1a0b4ec7f","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Directly committing code","locale":"en","wuid":"wuid:gx:340ff2a45cc4b243","revision":22,"path":"/developers/contributing-code/direct-commit","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"direct-commit","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Directly committing code - The Chromium Projects" />
<meta itemprop="name" content="Directly committing code - The Chromium Projects" />
<meta property="og:title" content="Directly committing code - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Directly committing code - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../contributing-code.1.html" dir="ltr">Contributing Code</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Directly committing code</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="direct-commit.html#TOC-Reasons"><strong>1 </strong>Reasons</a></li><li class="goog-toc"><a href="direct-commit.html#TOC-Commands"><strong>2 </strong>Commands</a><ol class="goog-toc"><li class="goog-toc"><a href="direct-commit.html#TOC-git-cl-land-for-git-repos-"><strong>2.1 </strong>git cl land (for git repos)</a></li><li class="goog-toc"><a href="direct-commit.html#TOC-git-cl-dcommit-for-svn-repos-"><strong>2.2 </strong>git cl dcommit (for svn repos)</a><ol class="goog-toc"><li class="goog-toc"><a href="direct-commit.html#TOC-dcommit"><strong>2.2.1 </strong>dcommit</a></li></ol></li><li class="goog-toc"><a href="direct-commit.html#TOC-Troubleshooting-dcommit"><strong>2.3 </strong>Troubleshooting dcommit</a></li><li class="goog-toc"><a href="direct-commit.html#TOC-svn-dcommit"><strong>2.4 </strong>svn dcommit</a></li></ol></li><li class="goog-toc"><a href="direct-commit.html#TOC-Committing-a-patch-for-a-non-committer"><strong>3 </strong>Committing a patch for a non-committer</a></li><li class="goog-toc"><a href="direct-commit.html#TOC-Committing-to-Blink"><strong>4 </strong>Committing to Blink</a></li></ol></div></div></div></div></div>
<div>When <a href="../contributing-code.1.html">contributing code</a> to Chromium, the last step in the life of a change list is committing it, after which it's closed.</div>
<div><br />
</div>
<div>The preferred way of committing changes is via the <a href="../testing/commit-queue.1.html">commit queue</a>.</div><div><br /></div>
<div>However, in certain circumstances it is acceptable or necessary to directly commit your change, bypassing the commit queue. This is discouraged however, due to not running the tests (hence higher risk of breakage), and requires more supervision on the part of the committer.</div><div>Generally directly committing should only be done if the CQ itself is broken, or the CL cannot be processed by the CQ.</div><div><br /></div>
<div><span style="font-size:10pt;background-color:transparent">If you wish to skip the tree status checks, but otherwise use the CQ, you can use </span><code style="font-size:10pt;background-color:transparent">NOTREECHECKS=true</code><span style="font-size:10pt;background-color:transparent"> in the Rietveld issue description, though this is obviously </span><b style="font-size:10pt;background-color:transparent">strongly discouraged.</b><span style="font-size:10pt;background-color:transparent"> The primary use case is if the tree is closed due to some breakage, and you wish to commit a change that will fix the breakage.</span></div><div><code>NOTRY</code> and <code>NOTREECHECKS</code> are flags for the CQ: you still commit by clicking the "Commit" box.</div>
<div><span style="font-size:10pt"><br />
</span></div>
<div><span style="font-size:10pt"><b>In a nutshell:</b></span></div>
<ul><li>Before:</li>
<ul><li>Have the change reviewed per usual process <a href="../contributing-code.1.html" style="font-size:10pt">contributing code</a>, with an issue and description on Rietveld, and sufficient LGTMs or TBRs (since presubmit OWNERS approval test isn't run when dcommitting).<br />
</li>
<li>Run tests manually, both locally and u<span style="font-size:10pt">sing the </span><a href="../testing/try-server-usage.1.html" style="font-size:10pt">try server</a> for other platforms, to reduce risk of breakage (since try jobs aren't run when dcommitting)<span style="font-size:10pt">. Try jobs can be run individually via Rietveld, while the standard set can be run from the command line via <code>git try</code>.</span></li>
<li>Join the <a href="../irc.html">#chromium IRC channel</a>, so that sheriffs can notify you of possible breakages.</li>
<li>Check that the tree is open (green): <a href="http://chromium-status.appspot.com/">Chromium Tree Status</a> :: <a href="http://blink-status.appspot.com/">Blink Tree Status</a></li></ul>
<li><span style="font-size:10pt">During:</span></li>
<ul><li>Double-check that the tree is open.</li>
<li><span style="font-size:10pt">Commit as per below, preferably using <code>git-cl</code>.</span></li></ul>
<li>After:</li>
<ul><li>See if there are any immediate messages on IRC.</li>
<li>Stay on IRC for an hour or so in case anything happen afterwards.</li></ul></ul>
<div>In case of <b>emergencies</b>, please remember to at least:</div>
<ul><li>Create a Rietveld issue for description and reference.</li>
<li>List OWNERS in <code>TBR</code> (assuming no time for review).</li>
<li>Join IRC, explain what's happening, and make sure there are no immediate objections.</li></ul>
<div><b>Tree closure:</b> If the most recent set of changes to the repository breaks the build, we say the tree is red, or closed. You cannot check in your changes until it is green again. You can check the status via apps at <a href="http://chromium-status.appspot.com/">Chromium Tree Status</a> or <a href="http://blink-status.appspot.com/">Blink Tree Status</a>. More low-level, you can check the BuildBot waterfalls (<a href="http://build.chromium.org/buildbot/waterfall/console" target="_blank">Chromium</a> | <a href="http://build.chromium.org/buildbot/chromiumos/waterfall" target="_blank">Chromium OS</a>) to see that the columns are mostly green before checking in your changes. Otherwise, you will not know if your changes break the build or not.</div>
<h2><a name="TOC-Reasons"></a>Reasons</h2>
<div>Good reasons to dcommit code:</div>
<div>
<ul><li>You are reverting at previous change that broke the build (so the tree is closed) and the CQ is down – if the CQ is up, please use <code>NOTRY</code> and <code>NOTREECHECKS</code> instead.</li>
<li>The change can't be processed by the commit queue (see <a href="https://code.google.com/p/chromium/issues/list?q=label:Build-CommitQueue">Build-CommitQueue</a> bugs), such as changing file permissions (Issue <a href="https://code.google.com/p/chromium/issues/detail?id=162196">162196</a>).</li></ul>
<span style="background-color:transparent;font-size:10pt">Marginal reasons to dcommit code:</span></div>
<div>
<ul><li><span style="font-size:10pt">A </span><a href="../how-tos/depottools/presubmit-scripts.html" style="font-size:10pt">presubmit script</a><span style="font-size:10pt"> is failing.</span></li>
<ul><li><span style="font-size:10pt">I</span>f the failure is a false positive, if at all possible, please fix the script instead<span style="font-size:10pt">.</span></li></ul>
<li><span style="font-size:10pt;background-color:transparent">The change is very big (e.g., large-scale formatting changes or renaming), so by the time it's finished uploading to Rietveld the patch is out of date and won't apply when the CQ tries it.</span></li>
<ul><li><span style="background-color:transparent"><span style="font-size:10pt">If at all possible, try breaking up the patch and landing normally. Even </span>innocuous-looking changes<span style="font-size:10pt"> can cause breakages.</span></span></li></ul></ul>
</div>
<div>Bad reasons to dcommit code:</div>
<div>
<ul><li><span style="font-size:10pt">The commit queue is too slow (unless the slowness means the change is out of date by the time it is processed)</span> – please be patient<span style="font-size:10pt">.</span></li>
<li><span style="font-size:10pt">The commit queue is down or stalled – please be patient.</span></li>
<li><span style="font-size:10pt;background-color:transparent">The tree is closed but you want to commit it anyway – please wait for tree to reopen, or use </span><code style="font-size:10pt;background-color:transparent">NOTREECHECKS=true</code><span style="font-size:10pt;background-color:transparent"> if the CL needs to be committed while the tree is closed.</span></li></ul>
</div>
<h2><a name="TOC-Commands"></a>Commands</h2><h3><a name="TOC-git-cl-land-for-git-repos-"></a><font size="3"><b>git cl land (for git repos)</b></font></h3><div><div class="sites-codeblock sites-codesnippet-block" style="font-size:13.3333px"><code>git cl land</code></div></div>
This command commits the current changelist via git directly. You should use this command if you are in a real git repo, such as the chromium repo. You can pass --bypass-hooks if something is wrong with the presubmit hooks or they are blocking an emergency submit.<h3><a name="TOC-git-cl-dcommit-for-svn-repos-"></a>git cl dcommit (for svn repos)</h3>
<div>For ChromiumOS:</div>
<div>
<div class="sites-codeblock sites-codesnippet-block"><span style="color:rgb(0,96,0);font-family:monospace">git cl push</span></div>
</div>
<div><br />
</div>
<div>In more detail:</div>
<div class="sites-codeblock sites-codesnippet-block">
<code># Sync branch to ToT</code><br />
<code>git pull --rebase origin master</code><br />
<code>git rebase master my_feature_branch</code><br />
<code>gclient sync</code><br />
<code># Update git-svn data with ToT</code><br />
<code>git fetch origin</code><br />
<code>git svn fetch</code><br />
<code># Actually commit</code><br />
<code>git cl dcommit</code><br />
</div>
<h4><a name="TOC-dcommit"></a>dcommit</h4>
<div><code>git cl dcommit</code> is lower-level and pickier than the commit queue; you need to have git-svn data set up, and your branch needs to be up-to-date with ToT. This command is <b>only used for svn repositories.</b></div>
<div><br />
</div>
<div>If your checkout was created by fetch, it should have the git-svn data set up. If it wasn't, or if it was created by <code>fetch --nosvn=True</code>, set up the git-svn metadata by running:</div>
<div class="sites-codeblock sites-codesnippet-block"><code>git svn init --prefix=origin/ -T trunk/src svn://svn.chromium.org/chrome</code><br />
<code>git config --replace svn-remote.svn.fetch trunk/src:refs/remotes/origin/git-svn</code><br />
<code>git fetch origin</code><br />
<code>git svn fetch</code><br />
<div></div>
</div>
<div><br />
</div>
<div>Sync branch with ToT:</div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>git pull --rebase origin master</code></div>
<div><code>git rebase master my_feature_branch</code></div>
<div><code>gclient sync</code></div>
</div>
<br />
<div>Update git-svn data with ToT:</div>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>git fetch origin  # Optional, makes next step faster</code></div>
<div><code>git svn fetch  # Ensure your svn data is up-to-date with ToT</code></div>
</div>
<h3><a name="TOC-Troubleshooting-dcommit"></a>Troubleshooting dcommit</h3>
<div>Sometimes dcommit fails, primarily due to SVN metadata being out of date or corrupted (e.g., if git cl is interrupted during a dcommit). <span style="background-color:transparent;font-size:10pt">Symptoms include it trying to refetch commits you've already fetched, or printing <code>"</code></span><code>Transaction is out of date</code><span style="background-color:transparent;font-size:10pt"><code>"</code> errors on unrelated files. This can be fixed by updating or rebuilding SVN metadata, which does not require any changes to your local git repository itself (outside of the SVN metadata).</span></div>
<div><br />
</div>
<div>If the metadata is just out of date, this updates it:</div>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>cd "$CHROMIUM_DIR"  # or $BLINK_DIR or other repository root</code></div>
<div><span style="background-color:transparent;font-size:10pt"><code>git fetch origin</code></span></div>
<div><code>git svn fetch</code></div>
<div></div>
</div>
<br />
<div>If the metadata is corrupt, this deletes it and rebuilds it:</div>
<div></div>
<div class="sites-codeblock sites-codesnippet-block">
<div><code>cd "$CHROMIUM_DIR" &amp;&amp; rm -rf .git/svn   # clobber git-svn metadata</code><br />
<code>git svn find-rev r1   # run a no-op command to rebuild metadata</code></div>
</div>
<div><br />
</div>
<div>If you get the following error:</div>
<div>
<div class="sites-codeblock sites-codesnippet-block">
<code>Can't guess svn branch -- try specifying it on the command line</code></div>
</div>
<div>...then you probably need to re-run the <span style="background-color:transparent;font-size:10pt">git-svn setup steps correctly on the master branch, and then create a new branch. See <a href="../how-tos/get-the-code.1.html">Get the Code</a> for git-svn setup details.</span></div>
<h3><a name="TOC-svn-dcommit"></a>svn dcommit</h3>
<div>It is also possible to use <code>svn dcommit</code>, but this does not integrate with Rietveld (e.g., it uses your local git commit log as the commit message) and is discouraged, generally being reserved for emergencies.</div>
<h2><a name="TOC-Committing-a-patch-for-a-non-committer"></a>Committing a patch for a non-committer</h2>
<div>First <a href="external-contributor-checklist.html">check that the non-committer has signed the CLA/CCLA</a> and are listed in the AUTHORS and CL Description.</div>
<div>
<ul><li><span style="font-size:10pt">If you use git</span></li>
<ul><li><code>git cl patch &lt;code review issue number&gt;</code></li>
<ul><li>This command will download the patch from the code review website, apply the patch, and set the issue number.</li></ul>
<li>If you work on chrome:</li>
<ul><li><span style="color:rgb(0,96,0);font-family:monospace">git cl try  # and wait for green bots</span></li>
<li><span style="color:rgb(0,96,0);font-family:monospace">git cl dcommit -c 'Joe Noncommiter &lt;hackosaurus@hotmail.com&gt;'</span></li></ul>
<li><span style="color:rgb(0,96,0);font-family:monospace"><span style="font-family:Arial,Verdana,sans-serif;color:rgb(0,0,0)">If you work on chromeos:</span></span></li>
<ul><li><span style="font-size:10pt"><code>git commit --amend -s --author="$AUTHOR_NAME &lt;$AUTHOR_EMAIL&gt;"</code></span></li>
<li><code>git cl push -c</code></li></ul>
<li>You're done!</li></ul>
<li>If you use subversion / gcl</li>
<ul><li>Really, try to use <code>git cl patch</code> if possible.</li>
<li>You need to apply the patch locally with <code>curl http://... | patch -p0</code></li>
<li>Recreate a CL with <code>gcl change foo</code></li>
<li>Edit <code>.svn/gcl_info/changes/foo</code> and change the first 0 for the code review number</li>
<li><code>gcl commit foo</code></li></ul></ul><div><h2><a name="TOC-Committing-to-Blink"></a>Committing to Blink</h2><div>To dcommit to the Blink repo you will need to set up git-svn metadata in third_party/WebKit.  (This is not done automatically by 'fetch blink'.)</div></div><div><br /></div><div><div class="sites-codeblock sites-codesnippet-block"><code>cd third_party/WebKit<br />git svn init --prefix=origin/ -T trunk svn://svn.chromium.org/blink</code><br /><code>git config --replace svn-remote.svn.fetch trunk:refs/remotes/origin/master</code><br /><code>git fetch origin</code><br /><code>git svn fetch</code><br /><div></div></div><div><br /></div><div>Once this is set up, you can use <span style="color:rgb(0,96,0);font-family:monospace;font-size:10pt;background-color:transparent">git cl dcommit</span><span style="font-size:10pt;background-color:transparent"> as described above.</span></div></div><div><br /></div>
</div>
<div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/contributing-code/direct-commit">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9Htt1CTE41j-wH6OA93oS2Zbc9pDWsOOhIXJUqSSB26hg_K-tMlhi2Y84m52egHtuxN8jxdv7CX5NBp6EmBRXmvYD_3_ytLlrW9Mquw1efA64mJGw/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
