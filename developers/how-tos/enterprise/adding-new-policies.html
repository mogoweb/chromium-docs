<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/how-tos","deleted":false,"title":"How-Tos","dir":"ltr"},{"path":"/developers/how-tos/enterprise","deleted":false,"title":"Enterprise","dir":"ltr"},{"path":"/developers/how-tos/enterprise/adding-new-policies","deleted":false,"title":"Policy Settings in Chrome","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/how-tos/enterprise/adding-new-policies\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/how-tos/enterprise","parentWuid":"wuid:gx:46460e89df1f2387","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Policy Settings in Chrome","locale":"en","wuid":"wuid:gx:324cfda2e86c6fb7","revision":31,"path":"/developers/how-tos/enterprise/adding-new-policies","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"adding-new-policies","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Policy Settings in Chrome - The Chromium Projects" />
<meta itemprop="name" content="Policy Settings in Chrome - The Chromium Projects" />
<meta property="og:title" content="Policy Settings in Chrome - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Policy Settings in Chrome - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../how-tos.1.html" dir="ltr">How-Tos</A>‎ &gt; ‎<A href="../enterprise.1.html" dir="ltr">Enterprise</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Policy Settings in Chrome</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><span style="font-family:arial,sans-serif;border-collapse:collapse">
<div><b><font size="3">Adding new policy settings</font></b></div>
<div><b><font size="3"><br />
</font></b></div>
<div>This section describes the steps to add a new policy setting to Chromium, which administrators can then configure via Windows Group Policy, the Google Apps control panel, etc.  Administrator documentation about for setting up Chrome management is <a href="../../../administrators.1.html">here</a> if you're looking for information on how to deploy policy settings to Chrome.</div>
</span><span style="border-collapse:collapse">
<div>
<ol><li><span style="font-family:arial,sans-serif">Think carefully about the name and the desired semantics of the new policy:</span></li><ul><li><span style="font-family:arial,sans-serif">Chose a name that is consistent with the existing naming scheme.</span></li><li><font face="arial, sans-serif">Consider the foreseeable future and try to avoid conflicts with possible future extensions or use cases.</font></li><li><span style="font-family:arial,sans-serif">Negative policies (*Disable*, *Disallow*) are verboten because setting something to "true" to disable something confuses people.</span></li></ul><li><span style="font-family:arial,sans-serif">Wire the feature you want to be controlled by policy to PrefService, so a pref can be used to control your feature's behavior in the desired way.</span></li>
<ul><li><span style="font-family:arial,sans-serif">For existing command line switches that are being turned into policy, you will want to modify the </span><font face="courier new, monospace">CommandLinePrefStore</font><span style="font-family:arial,sans-serif"> in <a href="http://code.google.com/codesearch#OAMlx_jo-ck/src/chrome/browser/prefs/command_line_pref_store.cc">chrome/browser/prefs/command_line_pref_store.cc</a> to set the property appropriately from the command line switch (the managed policy will override this value from the command line automagically when policy is set if you do it this way).</span></li></ul>
<li><span style="font-family:arial,sans-serif">Add a policy to control the pref:</span></li>
<ul><li><font color="#551a8b" face="arial, sans-serif"><u><a href="https://code.google.com/p/chromium/codesearch#chromium/src/components/policy/resources/policy_templates.json">components/policy/resources/policy_templates.json</a></u></font><font face="arial, sans-serif"> - This file contains meta-level descriptions of all policies and is used to generated code, policy templates (ADM/ADMX for windows and the application manifest for Mac), as well as documentation. When adding your policy, please make sure you get the version and features flags (such as </font><font face="courier new, monospace">dynamic_refresh</font><span style="font-family:arial,sans-serif"> and </span><font face="courier new, monospace">supported_on</font><span style="font-family:arial,sans-serif">) right, since this is what will later appear on <a href="http://dev.chromium.org/administrators/policy-list-3">http://dev.chromium.org/administrators/policy-list-3</a>. The textual policy description should include the following:</span></li>
<ul><li><span style="font-family:arial,sans-serif">What features of Chrome are affected</span></li>
<li><span style="font-family:arial,sans-serif">Which behavior and/or UI/UX changes the policy triggers</span></li>
<li><font face="arial, sans-serif">How the policy behaves if it's left unset or set to invalid/default values. This may seem obvious to you, and it probably is. However, this information seems to be provided for Windows Group Policy traditionally, and we've seen requests from organizations to explicitly spell out the behavior for all possible values and for when the policy is unset.</font></li></ul>
<li><span style="font-family:arial,sans-serif"><a href="http://code.google.com/p/chromium/codesearch#chromium/src/chrome/browser/policy/configuration_policy_handler_list_factory.cc">chrome/browser/policy/configuration_policy_handler_list_factory.cc</a> - for mapping the policy to the right pref</span></li></ul>
<li><span style="font-family:arial,sans-serif">If your feature can be controlled by GUI in <a href="javascript:void(0);">chrome://settings</a>, then you will want <a href="javascript:void(0);">chrome://settings</a> to disable the GUI for the feature when the policy controlling it is managed. </span></li>
<ul><li><span style="font-family:arial,sans-serif">There is a method on PrefService::Preference to ask if it's managed. </span></li>
<li><span style="font-family:arial,sans-serif">You will also want <a href="javascript:void(0);">chrome://settings</a> to display the "some settings on this page have been overridden by an administrator" banner. If you use the </span><font face="courier new, monospace">pref</font><span style="font-family:arial,sans-serif"> attribute to connect your pref to the UI, this should happen automagically. NB: There is work underway to replace the banner with setting-level indicators. Once that's done, we'll update instructions here.</span></li></ul>
<li><span style="font-family:arial,sans-serif">Wherever possible, we would like to support dynamic policy refresh, that is, the ability for an admin to change policy and Chrome to honor the change at run-time without requiring a restart of the process.</span></li>
<ul><li><span style="font-family:arial,sans-serif">This means that you should listen for preference change notifications for your preference. </span></li>
<li><span style="font-family:arial,sans-serif">Don't forget to update <a href="javascript:void(0);">chrome://settings</a> when the preference changes. Note that for standard elements like checkboxes, this works out of the box when you use the </span><font face="courier new, monospace">pref</font><span style="font-family:arial,sans-serif"> attribute. </span></li></ul>
<li><font face="arial, sans-serif">If you’re adding a device policy for Chrome OS, make sure you’ve updated chrome/browser/chromeos/policy/device_policy_decoder_chromeos.{h,cc} so the policy shows up on the chrome://policy page.</font></li>
<li><span style="font-family:arial,sans-serif">Build the </span><font face="courier new, monospace">policy_templates</font><span style="font-family:arial,sans-serif"> target to check that the ADM/ADMX, Mac app manifests, and documentation are generated correctly.</span></li>
<ul><li>The generated files are placed in <font face="courier new, monospace">out/Debug/gen/chrome/app/policy/</font> (on Linux, adjust for other build types/platforms)</li></ul>
<li><span style="font-family:arial,sans-serif">Add an entry for the new policy in </span><font face="courier new, monospace">chrome/test/data/policy/policy_test_cases.json</font></li>
<li><font face="arial, sans-serif">Add an entry for the new policy in </font><font face="courier new, monospace">tools/metrics/histograms/histograms.xml</font><font face="arial, sans-serif">, in the EnterprisePolicies enum.</font></li>
<li><span style="font-family:arial,sans-serif">Add a test that verifies that the policy is being enforced in </span><font face="courier new, monospace">chrome/browser/policy/policy_browsertest.cc</font><span style="font-family:arial,sans-serif">. Ideally, your test would set the policy, fire up the browser, and interact with the browser just as a user would do to check whether the policy takes effect. This significantly helps Chrome QA which otherwise has to test your new policy for each Chrome release.</span></li>
<li><span style="font-family:arial,sans-serif">Manually testing your policy</span></li>
<ul><li><span style="font-family:arial,sans-serif">Windows: The simplest way to test is to write the registry keys manually to </span><font face="courier new, monospace">Software\Policies\Chromium</font> (for Chromium builds) or <font face="courier new, monospace">Software\Policies\Google\Chrome</font> (for Google Chrome branded builds). If you want to test policy refresh, you need to use group policy tools and gpupdate; see <a href="../../../administrators/windows-quick-start.1.html">Windows Quick Start</a>.</li>
<li>Mac: See <a href="../../../administrators/mac-quick-start.html">Mac Quick Start</a> (section "Debugging")<br />
</li>
<li>Linux: See <a href="../../../administrators/linux-quick-start.html">Linux Quick Start</a> (section "Set Up Policies")</li>
<li>Chrome OS is more complex to test, as a full end-to-end test requires network transactions to the policy test server.</li>
<ul><li>Instructions for how to set up the policy test server and have the browser talk to it are here: <a href="running-the-cloud-policy-test-server.html">Running the cloud policy test server</a></li>
<li>If you'd just like to do a quick test, the Linux code is also functional on CrOS, see <a href="../../../administrators/linux-quick-start.html">Linux Quick Start</a></li></ul></ul><li><span style="font-size:10pt;background-color:transparent">If you are adding a new policy that supersedes an older one, verify that the new policy works as expected even if the old policy is set (allowing us to set both during the transition time when Chrome versions honoring the old and the new policies coexist).</span></li><li><span style="font-size:10pt;background-color:transparent">If your policy has interactions with other policies, make sure to document, test and cover these by automated tests.</span></li></ol>
</div>
<h3 style="font-family:arial,sans-serif"><a name="TOC-Examples"></a>Examples</h3>
<div style="font-family:arial,sans-serif"><span style="font-size:10pt">Here's a CL that has the basic infrastructure work required to add a policy for an already existing preference. It's a good, simple place to get started: </span><a href="http://codereview.chromium.org/8395007" style="font-size:10pt">http://codereview.chromium.org/8395007</a></div>
<div style="font-family:arial,sans-serif"><br />
</div>
<div>
<h3 style="font-family:arial,sans-serif"><a name="TOC-Modifying-existing-policies"></a>Modifying existing policies</h3>
<div style="font-family:arial,sans-serif">There are a few noteworthy pitfalls that you should be aware of when updating code that handles existing policy settings, in particular:</div>
<div style="font-family:arial,sans-serif">
<div>
<ul><li><span style="font-size:10pt">Make sure the policy meta data is up-to-date, in particular supported_on, and the feature flags.</span></li>
<li><span style="font-size:10pt">In general, don’t change policy semantics in a way that is incompatible (as determined by user/admin-visible behavior) with previous semantics. <b>In particular, consider that existing policy deployments may affect both old and new browser versions, and both should behave according to the admin's intentions.</b></span></li>
<li><span style="font-size:10pt">Don't rely on the cloud policy server for policy migrations because this has been proven to be error prone. To the extent possible, all compatibility and migration code should be contained in the client.</span></li><li><span style="font-size:10pt">It is OK to expand semantics of policy values as long as the previous policy description is compatible with the new behavior.</span></li>
<li><span style="font-size:10pt">It is OK to update feature implementations and the policy description when Chrome changes as long as the intended effect of the policy remains intact.</span></li>
<li><span style="font-size:10pt">The process for removing policies is to deprecate them first, wait a few releases (if possible) and then drop support for them. Make sure you put the deprecated flag if you deprecate a policy.<br /><br /></span></li></ul>
<h3><a name="TOC-Updating-Policy-List-in-this-Wiki"></a>Updating Policy List in this Wiki</h3>
</div>
</div>
<div style="font-family:arial,sans-serif">Steps for updating the policy list on <a href="http://dev.chromium.org/administrators/policy-list-3">http://dev.chromium.org/administrators/policy-list-3</a>:</div><div><ol><li><font face="arial, sans-serif">Use a recent checkout to b</font><font face="arial, sans-serif" style="font-size:10pt;background-color:transparent">uild the ninja target </font><font face="courier new, monospace" style="font-size:10pt;background-color:transparent">policy_templates</font><font face="arial, sans-serif" style="font-size:10pt;background-color:transparent">.</font></li><li><font color="#222222" face="arial, sans-serif" style="font-size:10pt;background-color:transparent">Edit page </font><a href="http://dev.chromium.org/administrators/policy-list-3" style="font-size:10pt;font-family:arial,sans-serif;background-color:transparent">http://dev.chromium.org/administrators/policy-list-3</a><span style="font-size:10pt;background-color:transparent"> and select "Edit HTML", therein d</span><span style="font-size:10pt;background-color:transparent">elete everything except "Last updated for Chrome XX." and set XX to the latest version that has been officially released.</span></li><li><font face="arial, sans-serif">Open </font><span style="font-family:courier new,monospace;font-size:10pt;color:rgb(34,34,34);background-color:transparent">out/{Debug,Release}/gen/chrome/app/</span><font color="#222222" style="font-family:courier new,monospace;font-size:10pt;background-color:transparent">policy/common/html/en-US/chrome_policy_list.html</font><font color="#222222" face="arial, sans-serif" style="font-size:10pt;background-color:transparent"> in a text editor.</font></li><li>Cut&amp;paste everything from the text editor into the wiki. <strike>(The wiki seems to have problems with pasting large amounts of text, so it might be necessary to split the text into a couple of smaller chunks for pasting.)</strike></li><li>Add some &lt;p&gt;...&lt;/p&gt; to format the paragraphs at the head of the page.</li></ol><div><br /></div></div>
<div style="font-family:arial,sans-serif"><b><font size="3">Updating ADM/ADMX/JSON templates</font></b>
</div><div style="font-family:arial,sans-serif"><br /></div><div style="font-family:arial,sans-serif">The <a href="https://dl.google.com/dl/edgedl/chrome/policy/policy_templates.zip" style="font-family:Arial,Verdana,sans-serif;font-size:13.3333330154419px;background-color:transparent">ZIP file of ADM/ADMX/JSON templates and documentation</a> <span style="font-size:10pt;background-color:transparent">is updated </span><span style="font-size:13.3333330154419px;background-color:transparent">upon every push of a new Chrome stable version </span><span style="font-size:10pt;background-color:transparent">as part of the release process.</span></div>
</div>
</span></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/how-tos/enterprise/adding-new-policies">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9qYyaoPBN3KhIlchgbqNPL7B9puSLrCNaSSMEPgxZH33dgH3VaSnaEVteuTVDFqVVO7FpqFCWxZRE2dlul5Y7hnn5Ald7SRFsKWYmoIZPiCCE-OAT/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
