<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/coding-style","deleted":false,"title":"Coding Style","dir":"ltr"},{"path":"/developers/coding-style/chromium-style-checker-errors","deleted":false,"title":"Chromium Style Checker Errors","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/coding-style/chromium-style-checker-errors\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/coding-style","parentWuid":"wuid:gx:17ee0e09e9aefe06","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Chromium Style Checker Errors","locale":"en","wuid":"wuid:gx:56e1ed29cc2e1197","revision":16,"path":"/developers/coding-style/chromium-style-checker-errors","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"chromium-style-checker-errors","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Chromium Style Checker Errors - The Chromium Projects" />
<meta itemprop="name" content="Chromium Style Checker Errors - The Chromium Projects" />
<meta property="og:title" content="Chromium Style Checker Errors - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Chromium Style Checker Errors - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../coding-style.1.html" dir="ltr">Coding Style</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Chromium Style Checker Errors</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div class="sites-embed-align-right-wrapping-on"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Introduction"><strong>1 </strong>Introduction</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Constructor-Destructor-Errors"><strong>2 </strong>Constructor/Destructor Errors</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Virtual-Method-Out-of-lining"><strong>3 </strong>Virtual Method Out-of-lining</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Virtual-methods-and-override-final"><strong>4 </strong>Virtual methods and override/final</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Redundant-Virtual-specifiers"><strong>5 </strong>Redundant Virtual specifiers</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Virtual-final-base-class-methods"><strong>6 </strong>Virtual final base class methods</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-Using-namespace-in-a-header"><strong>7 </strong>"Using namespace" in a header</a></li><li class="goog-toc"><a href="chromium-style-checker-errors.html#TOC-RefCounted-types-with-public-destructors"><strong>8 </strong>RefCounted types with public destructors</a></li></ol></div></div></div></div></div><h2><a name="TOC-Introduction"></a>Introduction</h2><div><div>Due to constant over inlining, we now have plugins to the clang compiler which check for certain patterns that can increase code bloat. This document lists these errors, explains the motivation behind adding it as an error and shows how to fix them. The <a href="http://code.google.com/p/chromium/wiki/Clang">chromium/clang wiki page</a> explains how you can run the plugin yourself, or how you can run your CLs through the clang trybots which run this plugin as well.</div></div><div><br /></div><div>All diagnostics produced by the style checker are marked with <font face="'courier new', monospace">[chromium-style]</font>.</div><h2><a name="TOC-Constructor-Destructor-Errors"></a>Constructor/Destructor Errors</h2><div>Constructors and destructors are often much larger and more complex than programmers think. They are also implicitly defined in each translation unit if you don't declare them. This can have a cascading effect if a class has member variables that have inlined/implicitly declared constructors/destructors, or are templates.</div><div><br /></div><div>(Internally, the plugin determines whether a class is complex using a point system, adding 9 points for each templated base class, 10 for each templated member variable, 3 for each non-POD type member variable, and (only for the constructor score) 1 for each integral data type. If a class's score is greater than or equal to 10, it will trip these errors.)</div><div><br /></div><div>If you get any of these compiler errors:</div><div><ul><li><font color="#0b5394">Complex class/struct needs an explicit out-of-line constructor</font></li><li><font color="#0b5394">Complex class/struct needs an explicit out-of-line destructor</font></li></ul><div>It's because you've written something like the following in a header:</div></div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#990000" face="courier new, monospace">class ComplexStuff {</font></div><div><font color="#990000" face="courier new, monospace"> public:</font></div><div><font color="#990000" face="courier new, monospace">  void NoDeclaredConstructor();</font></div><div><font color="#990000" face="courier new, monospace"><br /></font></div><div><font color="#990000" face="courier new, monospace"> private:</font></div><div><font color="#990000" face="courier new, monospace">  // Enough data members to trip the detector</font></div><div><font color="#990000" face="courier new, monospace">  BigObject big_object_;</font></div><div><font color="#990000" face="courier new, monospace">  std::map&lt;std::string, OtherObj&gt; complex_stl_stuff_;</font></div><div><font color="#990000" face="courier new, monospace">};</font></div></blockquote><div><br /></div><div>This is fixed by adding declared constructors:</div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#38761d" face="courier new, monospace">class ComplexStuff {</font></div><div><font color="#38761d" face="courier new, monospace"> public:</font></div><div><font color="#38761d" face="courier new, monospace">  // Defined in the cc file:</font></div><div><font color="#38761d" face="courier new, monospace">  ComplexStuff();</font></div><div><font color="#38761d" face="courier new, monospace">  ~ComplexStuff();</font></div><div><font color="#38761d" face="courier new, monospace"><br /></font></div><div><font color="#38761d" face="courier new, monospace"> private:</font></div><div><div style="color:rgb(56,118,29)"><font face="courier new, monospace"><font color="#990000" style="color:rgb(0,0,0)">  </font><font>BigObject big_object_;</font></font></div><div style="color:rgb(56,118,29)"><font face="courier new, monospace">  std::map&lt;std::string, OtherObj&gt; complex_stl_stuff_;</font></div><div><font color="#38761d" face="courier new, monospace">};</font></div></div></blockquote><div><br /></div><div>Likewise, if you get these compiler errors:</div><div><ul><li><font color="#0b5394">Complex constructor has an inlined body.</font></li><li><font color="#0b5394">Complex destructor has an inline body.</font></li></ul><div>It's because you've written something like the following in a header:</div></div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#990000" face="courier new, monospace">class MoreComplexStuff {</font></div><div><font color="#990000" face="courier new, monospace"> public:<br />  MoreComplexStuff() {}</font></div><div><font color="#990000" face="courier new, monospace">  ~MoreComplexStuff() {}</font></div><div><font color="#990000" face="courier new, monospace"><br /></font></div><div><font color="#990000" face="courier new, monospace"> private:</font></div><div><span style="color:rgb(153,0,0)"><font face="courier new, monospace">  BigObject big_object_;</font></span></div><div><span style="color:rgb(153,0,0)"><font face="courier new, monospace">  std::map&lt;std::string, OtherObj&gt; complex_stl_stuff_;</font></span></div><div><span style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></span></div></blockquote><div style="color:rgb(153,0,0)"><br /></div><div>The solution is the same; put the definitions for the constructor/destructor in the implementation file.</div><div><br /></div><div>Sometimes, you might need to inline a constructor/destructor for performance reasons. The style checker makes an exception for explicitly inlined constructors/destructors:</div><div><br /></div><div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    // In the .h file:</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    class ComplexFastStuff {</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">     public:</font></div></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">      ComplexFastStuff();</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">      ~ComplexFastStuff();</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">     private:</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">      /* complicated members */</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    };</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    </font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    // In the .cc file:</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    inline ComplexFastStuff::ComplexFastStuff() {<br />    }</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    </font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    inline ComplexFastStuff::~ComplexFastStuff() {</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">    }</font></div><div style="font-size:13.3333330154419px"><font color="#38761d" face="courier new, monospace">      </font></div><h2><a name="TOC-Virtual-Method-Out-of-lining"></a>Virtual Method Out-of-lining</h2><div>Virtual methods are almost never inlined in practice. Because of this, methods on a base class will be emitted in each translation unit that allocates the object or any subclasses that don't override that method. This is usually not a major gain, unless you have a wide class hierarchy in which case it can be a big win (<a href="http://codereview.chromium.org/5741001/">http://codereview.chromium.org/5741001/</a>). Since virtual methods will almost never be inlined anyway (because they'll need to go through vtable dispatch), there are almost no downsides.</div><div><br /></div><div>If you get the error:</div><div><ul><li><font color="#0b5394">virtual methods with non-empty bodies shouldn't be declared inline</font></li></ul><div>It's because you wrote something like this:</div></div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#990000" face="courier new, monospace">class BaseClass {</font></div><div><font color="#990000" face="courier new, monospace"> public:</font></div><div><font color="#990000" face="courier new, monospace">  virtual void ThisOneIsOK() {}</font></div><div><font color="#990000" face="courier new, monospace">  virtual bool ButWeDrawTheLineAtMethodsWithRealImplementation() { return false; }</font></div><div><font color="#990000" face="courier new, monospace">};</font></div></blockquote><br /><div>And can be fixed by out of lining the method that does work:</div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#38761d" face="courier new, monospace">class BaseClass {</font></div><div><font color="#38761d" face="courier new, monospace"> public:</font></div><div><font color="#38761d" face="courier new, monospace">  virtual void ThisIsHandledByTheCompiler() {}</font></div><div><font color="#38761d" face="courier new, monospace">  virtual bool AndThisOneIsDefinedInTheImplementation();</font></div><div><font color="#38761d" face="courier new, monospace">};</font></div></blockquote><h2><a name="TOC-Virtual-methods-and-override-final"></a>Virtual methods and override/final</h2><div>If you get the error:</div><div><ul><li><font color="#0b5394">Overriding method must be marked with 'override' or 'final'.</font></li></ul></div><div>It is because you are overriding a base class method, yet not annotating that override with override or final. For example:</div><div><br /></div><blockquote style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:40px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px"><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class BaseClass {</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  virtual ~BaseClass() {}</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  virtual void SomeMethod() = 0;</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class DerivedClass : public BaseClass {</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div><div><div style="color:rgb(153,0,0)"><div><font face="courier new, monospace">  virtual void SomeMethod();</font></div></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div></blockquote><font color="#990000"><br /></font><div>The solution? Just tell the compiler what you intend:</div><div><br /></div><blockquote style="margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:40px;border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;border-width:initial;border-color:initial;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px"><div><div style="color:rgb(153,0,0)"><span style="font-family:courier new,monospace;font-size:10pt;background-color:transparent">[...]</span></div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class DerivedClass : public BaseClass {</font></div></div><div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div></div><div><div><div style="color:rgb(153,0,0)"><div><font face="courier new, monospace">  void SomeMethod() <b>override</b>;</font></div></div></div></div><div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div></div></blockquote><div><br /></div><div>This allows the compiler to warn you when your intentions stop matching parsed reality.</div><h2><a name="TOC-Redundant-Virtual-specifiers"></a>Redundant Virtual specifiers</h2><div><span style="font-size:10pt;background-color:transparent">If you get one of the following errors:</span></div><div><ul><li><span style="font-size:10pt;background-color:transparent"><font color="#073763">'virtual' is redundant; 'override' implies 'virtual'</font></span></li><li><font color="#073763">'virtual' is redundant; 'final' implies 'virtual'</font></li><li><span style="font-size:10pt;background-color:transparent"><font color="#073763">'override' is redundant; 'final' implies 'override'</font></span></li></ul></div><div>Just remove the redundant specifier. Google style is to use only one of virtual, override, or final per method. For example:</div><div><blockquote style="font-size:13.3333330154419px;margin:0px 0px 0px 40px;border:none;padding:0px"><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br />class BaseClass {</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  virtual void SomeMethod() = 0;</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class DerivedClass : public BaseClass {</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  virtual void SomeMethod() override final;</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div><div><font face="courier new, monospace"><br /></font></div></blockquote></div><div>Can be simply written:</div><div><br /></div><div><blockquote style="font-size:13.3333330154419px;margin:0px 0px 0px 40px;border:none;padding:0px"><div><div style="color:rgb(153,0,0)"><span style="font-family:courier new,monospace;font-size:10pt;background-color:transparent">[...]</span></div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class DerivedClass : public BaseClass {</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  void SomeMethod() final;</font></div></div><div><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div></blockquote></div><h2><a name="TOC-Virtual-final-base-class-methods"></a>Virtual final base class methods</h2><div><span style="font-size:10pt;background-color:transparent">If you get the error:</span></div><div>The virtual method does not override anything and is final; consider making it non-virtual</div><div><br /></div><div>That means you have a final method that's not overriding anything. In that case, consider removing the virtual keyword, since no one can override the method anyway. For example:</div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class BaseClass {</font></div></div></div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div></div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  virtual void SomeMethod() final;</font></div></div></div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div><div style="color:rgb(153,0,0)"><font face="courier new, monospace"><br /></font></div></div></div></blockquote><div><div style="font-size:13.3333330154419px"></div></div><div>Should be written:</div><div><br /></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace">class BaseClass {</font></div></div></div></div><div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace"> public:</font></div></div></div></div><div><div><div style="font-size:13.3333330154419px"><div style="color:rgb(153,0,0)"><font face="courier new, monospace">  void SomeMethod();</font></div></div></div></div><div><div><div style="font-size:13.3333330154419px"><div style="font-size:13.3333330154419px;color:rgb(153,0,0)"><font face="courier new, monospace">};</font></div></div></div></div></blockquote><h2><a name="TOC-Using-namespace-in-a-header"></a>"Using namespace" in a header</h2><div>You should never have using namespace directives in a header because this can change the lookup rules in unrelated implementation files.</div><div>This is enforced by clang's -Wheader-hygiene warning. This isn't checked by the style plugin.</div><div><br /></div><div>If you get the error:<br /><ul><li><font color="#0b5394">using namespace directive in global context in header [-Wheader-hygiene]</font></li></ul>It's because you did something like this in a header:</div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#990000" face="courier new, monospace">using namespace WebKit;</font></div><div><font color="#990000" face="courier new, monospace"><br /></font></div><div><font color="#990000" face="courier new, monospace">class OurDerivedClass : public WebKitType {</font></div><div><font color="#990000" face="courier new, monospace">};</font></div></blockquote><font color="#990000"><br /></font><div>You can fix this by removing the "using namespace" line and explicitly stating the namespace:</div><div><br /></div><blockquote style="margin:0pt 0pt 0pt 40px;border:medium none;padding:0px"><div><font color="#38761d" face="courier new, monospace">class OurDerivedClass : public WebKit::WebKitType {</font></div><div><font color="#38761d" face="courier new, monospace">};</font></div><div><font color="#38761d"><br /></font></div></blockquote><h2><a name="TOC-RefCounted-types-with-public-destructors"></a>RefCounted types with public destructors</h2><div>When you declare a type to be referenced counted by making it derive from base::RefCounted or base::RefCountedThreadSafe, you're indicating that it should not be destructed until the last reference is Released, either explicitly or by destructing a scoped_refptr&lt;&gt;. Having a public destructor allows this contract to be violated, by allowing callers to stack allocate the object, store it in a scoped_ptr&lt;&gt; instead of a scoped_refptr&lt;&gt;, or to explicitly delete the object before all references have gone away. Because this can lead to subtle security bugs, the style checker will warn if class that is derived from a RefCounted type has either an explicit public destructor or an implicit destructor, which is automatically public.</div><div><br /></div><div>If you get the error:</div><div><ul><li><font color="#0b5394">Classes that are ref-counted should not have public destructors.</font></li></ul><div>It's because you did something like this:</div></div><div><br /></div><div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font color="#990000" face="courier new, monospace">class Foo : public base::RefCounted&lt;Foo&gt; {</font></div><div><font color="#990000" face="courier new, monospace"> public:</font></div><div><font color="#990000" face="courier new, monospace">  Foo() {}</font></div><div><font color="#990000" face="courier new, monospace">  ~Foo() {}</font></div><div><font color="#990000" face="courier new, monospace">};</font></div><div><br /></div></blockquote>You can fix this by ensuring that the destructor is either protected (if expecting classes to subclass this base) or private. You'll also need to ensure that the RefCounted type is friended, as appropriate.</div><div><br /></div><div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><font color="#38761d" face="courier new, monospace">class Foo : public base::RefCounted&lt;Foo&gt; {</font></div><div><font color="#38761d" face="courier new, monospace"> public:</font></div><div><font color="#38761d" face="courier new, monospace">  Foo() {}</font></div><div><font color="#38761d" face="courier new, monospace"><br /></font></div><div><font color="#38761d" face="courier new, monospace"> private:</font></div><div><font color="#38761d" face="courier new, monospace">  friend class base::RefCounted&lt;Foo&gt;;</font></div><div><font color="#38761d" face="courier new, monospace">  ~Foo() {}</font></div><div><font color="#38761d" face="courier new, monospace">};</font></div><div><br /></div></blockquote>If you get the error:</div><div><ul><li><font color="#0b5394">Classes that are ref-counted should have explicit destructors that are protected or private.</font></li></ul><div>It's because you did something like this:</div><div><br /></div></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><div><font color="#990000" face="courier new, monospace">class Foo : public base::RefCounted&lt;Foo&gt; {</font></div></div><div><div><font color="#990000" face="courier new, monospace">  // Compiler generated constructors, destructor, and copy operator are public.</font></div></div><div><div><font color="#990000" face="courier new, monospace">};</font></div></div></blockquote><div><div><br /></div><div>You can fix it by ensuring you explicitly declare a protected or private destructor:</div><div><br /></div></div><blockquote style="margin:0px 0px 0px 40px;border:none;padding:0px"><div><div><font color="#38761d" face="courier new, monospace">class Foo : public base::RefCounted&lt;Foo&gt; {</font></div><div><font color="#38761d" face="courier new, monospace"> // Compiler generated constructors and copy operator are public.</font></div></div><div><div><font color="#38761d" face="courier new, monospace"> private:</font></div><div><font color="#38761d" face="courier new, monospace">  friend class base::RefCounted&lt;Foo&gt;;</font></div></div><div><div><font color="#38761d" face="courier new, monospace">  ~Foo() {}  // Explicit destructor is private.</font></div></div><div><div><font color="#38761d" face="courier new, monospace">};</font></div></div></blockquote></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/coding-style/chromium-style-checker-errors">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9R5EbiOcFU5aw6JK-Jtafd5EpBaeAixzt6vZHeWlkQGJ_vT9HeU2F1axJU-S7sp863sB8S5fhi0M1zMDeTwOgPmZNo-irQyTyTmNgfRInbHFKq8l2/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
