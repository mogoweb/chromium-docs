<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/mandoline","deleted":false,"title":"Mandoline","dir":"ltr"},{"path":"/developers/mandoline/build","deleted":false,"title":"Mandoline: Build, Debug \u0026 Test Instructions","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/mandoline/build\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/mandoline","parentWuid":"wuid:gx:1affd69e1393c08d","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Mandoline: Build, Debug \u0026 Test Instructions","locale":"en","wuid":"wuid:gx:2385d08fab240eb0","revision":50,"path":"/developers/mandoline/build","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"build","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Mandoline: Build, Debug &amp; Test Instructions - The Chromium Projects" />
<meta itemprop="name" content="Mandoline: Build, Debug &amp; Test Instructions - The Chromium Projects" />
<meta property="og:title" content="Mandoline: Build, Debug &amp; Test Instructions - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Mandoline: Build, Debug &amp; Test Instructions - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/developers" dir="ltr">For Developers</A>‎ &gt; ‎<A href="/developers/mandoline" dir="ltr">Mandoline</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Mandoline: Build, Debug &amp; Test Instructions</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><h3><a name="TOC-Mandoline-can-be-built-out-of-a-normal-chromium-checkout."></a><span style="font-size:10pt;background-color:transparent;font-weight:normal">Mandoline can be built out of a normal chromium checkout.</span></h3><h3><a name="TOC-Desktop:"></a><span style="font-size:10pt;background-color:transparent">Desktop:</span></h3>
<div><span style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px;background-color:transparent">Build mandoline. The code exclusively uses gn, and does not build with is_component_build=true:</span></div>
<div>
<pre style="font-family:arial,sans-serif;font-size:12.8000001907349px;color:rgb(0,0,0);white-space:pre-wrap"><span style="font-size:12.8000001907349px;font-family:arial,sans-serif"><code>gn gen out/Debug</code></span></pre>
<pre style="font-family:arial,sans-serif;font-size:12.8000001907349px;color:rgb(0,0,0);white-space:pre-wrap"><code>ninja -C out/Debug mandoline:all</code></pre>
<pre style="font-family:arial,sans-serif;font-size:12.8000001907349px;color:rgb(0,0,0);white-space:pre-wrap"><span style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px;background-color:transparent">Run mandoline with these flags:</span></pre>
<pre><span style="font-family:monospace,monospace;font-size:12.8000001907349px;white-space:pre-wrap;color:rgb(34,34,34)"><code>out/Debug/</code></span><font color="#006000"><span style="font-size:12.8000001907349px;white-space:pre-wrap">mandoline </span></font><code style="font-family:monospace,monospace;font-size:12.8000001907349px;white-space:pre-wrap;color:rgb(17,85,204)">http</code><code style="font-family:monospace,monospace;font-size:12.8000001907349px;white-space:pre-wrap;color:rgb(17,85,204)">://google.com</code></pre></div>
<div><span style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px;background-color:transparent">If you're running over chromoting r</span><span style="font-size:12.8000001907349px;color:rgb(34,34,34);font-family:arial,sans-serif;background-color:transparent">un:</span></div><div>
<p style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px"><font face="monospace, monospace"><code>ninja -C out/Debug osmesa</code></font></p><p><font><code style="font-family:arial,sans-serif;color:rgb(34,34,34);font-size:12.8000001907349px">DISPLAY=:20 out/Debug/</code><font color="#006000" face="monospace"><span style="font-size:12.8000001907349px">mandoline </span></font><a href="http://google.com/" style="font-family:arial,sans-serif;color:rgb(17,85,204);font-size:12.8000001907349px" target="_blank"><code style="color:rgb(17,85,204)">http</code><code style="color:rgb(17,85,204)">://google.com</code></a><code style="font-family:arial,sans-serif;color:rgb(34,34,34);font-size:12.8000001907349px"> </code></font><span style="background-color:transparent;font-size:12.8000001907349px"><font color="#006000" face="monospace">--override-use-gl-with-osmesa-for-tests</font></span></p>
<p style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px"><font face="monospace, monospace"><br />
</font></p>
<h3 style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px"><a name="TOC-Android:"></a><font face="monospace, monospace">Android:</font></h3>
<p><font face="monospace, monospace" style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8000001907349px">Follow the instructions here to make sure you have the necessary android files: </font><span style="background-color:transparent;font-size:12.8000001907349px"><font color="#222222" face="monospace, monospace"><a href="https://code.google.com/p/chromium/wiki/AndroidBuildInstructions">https://code.google.com/p/chromium/wiki/AndroidBuildInstructions</a></font></span>. You don't need to do a build yet, but make sure you have the necessary resources.</p>
<p>Build mojo for android:</p>
<p><code>gn gen out/android_Debug --args='</code><span style="color:rgb(0,96,0);font-family:monospace;font-size:12.8000001907349px;background-color:transparent">symbol_level=1</span><span style="color:rgb(0,96,0);font-family:monospace;font-size:12.8000001907349px;background-color:transparent"> </span><span style="color:rgb(0,96,0);font-size:10pt;background-color:transparent">target_os="android"</span><span style="background-color:transparent"><font color="#006000"> use_aura=true</font></span><span style="color:rgb(0,96,0);font-size:10pt;background-color:transparent">'</span></p><p><code>ninja -C out/android_Debug mandoline:all</code></p>
<p><span style="font-size:12.8000001907349px;white-space:pre-wrap;background-color:transparent"><b>Note:</b> You will need to re-run `gn gen` without |use_aura| flag if you want to build chrome or content-shell, since those targets do not use aura on android.</span></p><p><span style="font-size:12.8000001907349px;white-space:pre-wrap;background-color:transparent">Run the script to start mandoline on your device:</span></p>
<pre><span style="font-size:12.8000001907349px;white-space:pre-wrap"><code>./mandoline/tools/android/run_mandoline.py http://www.google.com
</code></span></pre>
</div>
<div>If you just want to install, you can run the <span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333330154419px;background-color:transparent">install_mandoline.py</span><span style="font-size:10pt;background-color:transparent"> script in the same directory.</span></div><div><b><br /></b></div><div><b><br /></b></div><div><b>Build and test on the Android emulator with x86 Image:</b></div><div><span style="font-size:13.3333330154419px;background-color:transparent"><br /></span></div><div><span style="font-size:13.3333330154419px;background-color:transparent">Build mojo for android x86:</span></div><div><div style="font-size:13.3333330154419px"><p><code>gn gen out/android_x86_Debug --args='</code><span style="color:rgb(0,96,0);font-family:monospace;font-size:12.8000001907349px;background-color:transparent">symbol_level=1</span><span style="color:rgb(0,96,0);font-family:monospace;font-size:12.8000001907349px;background-color:transparent"> </span><span style="color:rgb(0,96,0);font-size:10pt;background-color:transparent">target_os="android"</span><span style="background-color:transparent"><font color="#006000"> target_cpu="x86" use_aura=true</font></span><span style="color:rgb(0,96,0);font-size:10pt;background-color:transparent">'</span></p><p><code>ninja -C out/android_x86_Debug mandoline:all</code></p><p><span style="font-size:12.8000001907349px;white-space:pre-wrap;background-color:transparent">Run the script to start mandoline on the Android emulator:</span></p><pre><span style="font-size:12.8000001907349px;white-space:pre-wrap"><code>./mandoline/tools/android/run_mandoline.py --target=x86 http://www.google.com
</code></span></pre></div><div style="font-size:13.3333330154419px"><p style="font-size:13.3333330154419px"><span style="font-size:12.8000001907349px;white-space:pre-wrap;background-color:transparent"><b>Note:</b> You will need to create and run a x86 AVD(Android Virtual Device) first.</span></p><div><span style="font-size:12.8000001907349px;white-space:pre-wrap;background-color:transparent"><br /></span></div></div></div><div><b><br /></b></div><div><b>Debugging on android:</b></div><div><b><br /></b></div><div><span style="font-size:10pt;background-color:transparent">For this to work you need to root your device. For Googlers follow instructions <a href="https://wiki.corp.google.com/twiki/bin/view/Main/MojoBuildInstructions">here</a>.</span></div><div><span style="font-size:10pt;background-color:transparent"><br /></span></div><div><span style="font-size:10pt;background-color:transparent">Pass </span><code style="font-size:10pt;background-color:transparent">--gdb</code><span style="font-size:10pt;background-color:transparent"> to </span><code style="font-size:10pt;background-color:transparent">run_mandoline.py</code><span style="font-size:10pt;background-color:transparent">. It'll do everything you need, which is the following:</span></div><div><br /></div><div>This assumes you've set things up for android, eg:</div><div><br /></div><div><div><code>. build/android/envsetup.sh</code></div></div><div><br /></div><div style="font-size:13.3333330154419px"><span style="font-size:10pt;background-color:transparent">Once per reboot/attaching you need to do the following:</span></div><div style="font-size:13.3333330154419px"><div style="font-size:13.3333330154419px"><code>adb forward tcp:5039 tcp:5039</code></div></div><div style="font-size:13.3333330154419px"><br /></div><div>On desktop pass in <span style="font-size:10pt;background-color:transparent">--wait-for-debugger to the shell.</span></div><div><span style="font-size:10pt;background-color:transparent"><br /></span></div><div><span style="font-size:10pt;background-color:transparent">On device:</span></div><div><div style="background-color:transparent"><code>$ adb shell</code></div><div style="background-color:transparent"><div style="font-size:10pt"><code>$ gdbserver --attach :5039 pid</code></div><div><div>pid should have been spit out when running. If not, ps | grep mojo</div></div><div style="font-size:10pt"><br /></div></div><div style="font-size:10pt;background-color:transparent">Back on desktop:</div><div style="background-color:transparent"><span style="font-size:10pt;background-color:transparent"><code>./third_party/android_tools/ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gdb</code></span></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent">In gdb type the following:</div><div style="background-color:transparent"><div><code>target remote localhost:5039</code></div></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent">And you should be able to continue.</div><div style="background-color:transparent">You may not have symbols. You may need to do (in gdb):</div><div style="background-color:transparent"><div><code>set solib-search-path path-to-your-android-debug-build</code></div></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent">If you are still seeing a garbage stack after all this it could be a couple of possible things. I've had the best luck by inserting <span style="font-size:10pt;background-color:transparent">BreakDebugger() where the crash is happening. With that gdb should break before you crash. If at this point you still don't see symbols try the following (in gdb):</span></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent"><code>info sharedlibrary</code></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent">Look for the library that the crash is happening in. If you see 'No' in the column next to the library the crash is occurring in then gdb didn't find the symbols. The path may be mangled, which is why gdb can't find the symbols. For example, instead of libcore_services.so you might have temp-1234-libcore_services.so. If this is the case, create a link to the real one, eg (again, from within your build directory):</div><div style="background-color:transparent"><br /></div><div style="background-color:transparent"><code>ln -s </code><span style="font-size:13.3333330154419px;background-color:transparent"><code>libcore_services.so </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>temp-1234-libcore_services.so</code></span></div><div style="background-color:transparent"><span style="font-size:13.3333330154419px;background-color:transparent"><br /></span></div><div style="background-color:transparent"><span style="font-size:13.3333330154419px;background-color:transparent">It's entirely possible the library you want is not at the root of the build directory. If that is the case you'll need to copy/link things around so that the library gdb is looking for can be found.</span></div><div style="background-color:transparent"><span style="font-size:13.3333330154419px;background-color:transparent"><br /></span></div><div><span style="font-size:13.3333330154419px;background-color:transparent">Also, make sure you run </span><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333330154419px;background-color:transparent">set solib-search-path </span>after you hit the breakpoint you added.</div></div><div><br /></div><div><br /></div><div><b style="font-size:13.3333330154419px">Testing:</b></div><div><br /></div><div>Beyond the unit tests associated with Mojo and Mandoline code, there is a suite of Mojo application tests.</div><div>These are Mojo applications hosting GTest suites and fixtures, run in the shell/runner with a helper script:</div><div><br /></div><div><span style="background-color:transparent"><font color="#006000" face="monospace">./mojo/tools/apptest_runner.py out/Debug</font></span></div><div><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333330154419px">./mojo/tools/apptest_runner.py out/android_Debug</span></div><div><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333330154419px"><br /></span></div><div><span style="font-size:13.3333330154419px">To run a unittest on Android, use the helper script:</span></div><div><div><font color="#006000" face="monospace">build/android/test_runner.py gtest --s html_viewer_unittests --output-directory=out/android_Debug</font></div></div><div><br /></div><div>To run a performance test, use the run_benchmark script with <span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333px;background-color:transparent">--browser=mandoline-debug </span><span style="font-size:10pt;background-color:transparent">or </span><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333px;background-color:transparent">--browser=mandoline-release</span><span style="font-size:10pt;background-color:transparent">, like:</span></div><div><span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3333px">./tools/perf/run_benchmark --browser=mandoline-debug &lt;test_suite_name&gt;</span></div><div><br /></div><div>--browser-{debug,release} assumes that the binary locates at ./out/{Debug, Release}.</div><div><br /></div><div>Use the run_benchmark script with the  <span style="color:rgb(0,96,0);font-family:monospace;font-size:13.3332996368408px;background-color:transparent">list </span><span style="font-family:monospace;font-size:13.3332996368408px;background-color:transparent">command to show all available test suites.</span></div><div><span style="font-family:monospace;font-size:13.3332996368408px;background-color:transparent"><br /></span></div><div><span style="font-family:monospace;font-size:13.3332996368408px;background-color:transparent"><b>Layout tests:</b></span></div><div><br /></div><div>Run by way:</div><div><br /></div><div><div style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8px"><code>./third_party/WebKit/Tools/</code><code>Scripts/run-webkit-</code><span><code>tests</code></span><code> </code><span style="font-size:12.8px;background-color:transparent"><code>--driver-name=layout_test_</code></span><span style="font-size:12.8px;background-color:transparent"><code>runner </code></span><span style="font-size:12.8px;background-color:transparent"><code>--additional-driver-flag=--</code></span><span style="font-size:12.8px;background-color:transparent"><code>content-handlers=text/html,</code></span><span style="font-size:12.8px;background-color:transparent"><code>mojo:layout_test_html_viewer </code></span><span style="font-size:12.8px;background-color:transparent"><code>--debug </code></span><span style="font-size:12.8px;background-color:transparent"><code>--no-retry-failures </code></span><span style="font-size:12.8px;background-color:transparent"><code> fast/events/touch</code></span></div></div><div><br /></div><div><div style="color:rgb(34,34,34);font-family:arial,sans-serif;font-size:12.8px">If you are using a build directory that is not the standard out/Debug or out/Release, then you need to also specify --target and --build-directory flags. (e.g. --build-directory=custom_out --target=Debug_gn).</div></div><div><br /></div><div><br /></div><div><b>Bugs:</b></div><div>Use <a href="https://code.google.com/p/chromium/issues/list?can=2&amp;q=label%3Aproj-mandoline&amp;colspec=ID+Pri+M+Week+ReleaseBlock+Cr+Status+Owner+Summary+OS+Modified&amp;x=m&amp;y=releaseblock&amp;cells=tiles">Proj-Mandoline</a> label.</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/mandoline/build">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9ZTtmD1msIIVv1i-lLGr-sJAJ9IX65gOmVh4Tuk1IbI_cix3yLj7tVBx-ZL2FvuMQy5QeExHzbZPxym_448g9nUifffAyH6gXtE-e5okYEk5cdsQT/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
