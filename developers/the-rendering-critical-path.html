<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="http://www.chromium.org/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/the-rendering-critical-path","deleted":false,"title":"The Rendering Critical Path","dir":"ltr"}];
  var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttp://sites.google.com/a/chromium.org/dev/developers/the-rendering-critical-path\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"http://csi.gstatic.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["http://www.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["http://www.gstatic.com/sites/p/56e332/system/js/codemirror.js","http://www.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","http://www.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","http://www.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","http://www.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers","parentWuid":"wuid:gx:982466121d9f2cd","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"The Rendering Critical Path","locale":"en","wuid":"wuid:gx:65abe79f87a7876c","revision":5,"path":"/developers/the-rendering-critical-path","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"the-rendering-critical-path","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="The Rendering Critical Path - The Chromium Projects" />
<meta itemprop="name" content="The Rendering Critical Path - The Chromium Projects" />
<meta property="og:title" content="The Rendering Critical Path - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>The Rendering Critical Path - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="http://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="http://www.chromium.org/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="http://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="http://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../Home.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../chromium-os.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:fe204a485666144" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="http://www.chromium.org/developers" dir="ltr">For Developers</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">The Rendering Critical Path</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">author: wiltzius@</font></span></p><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-1"></a><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="3"><br /></font></span></h3><div><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed sites-embed-full-width" style="width:100%;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-Rendering-Architecture-in-Brief"><strong>1 </strong>Rendering Architecture in Brief</a></li><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-The-Critical-Rendering-Path"><strong>2 </strong>The Critical Rendering Path</a></li><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-Browser-Thread-Architecture"><strong>3 </strong>Browser Thread Architecture</a></li><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-Scrolling"><strong>4 </strong>Scrolling</a></li><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-Modifying-Style-of-Existing-DOM"><strong>5 </strong>Modifying Style of Existing DOM</a></li><li class="goog-toc"><a href="the-rendering-critical-path.html#TOC-Adding-new-DOM"><strong>6 </strong>Adding new DOM</a></li></ol></div></div></div></div></span></div><div><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="3"><br /></font></span></div><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-Rendering-Architecture-in-Brief"></a><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="3">Rendering Architecture in Brief</font></span></h3><font size="2"><br /></font><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">To understand the symptoms and potential causes of jank, it's important to have a basic understanding of the browser's rendering pipeline. This article will briefly describe that pipeline assuming knowledge of the web platform but no knowledge of how the rendering engine works, with links to relevant design docs for more info.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2"><br /></font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent">This article is adapted from a similar section in <a href="how-tos/trace-event-profiling-tool/using-frameviewer.html">Using Frame Viewer to Bust Jank</a>. It goes into greater detail, but doesn't cover any examples. See that document for a</span><span style="font-family:Arial;line-height:17.25px;white-space:pre-wrap;background-color:transparent"> more illustrated version of this process, which annotates a trace of an example style modification.</span></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2"><br /></font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">We'll focus on how the page is rendered <i>after</i> page load -- that is, how the browser handles screen updates in response to user input and JavaScript changes to the DOM. Rendering when loading a page is slightly different, as compromises to visual completeness are often made in order to get some content to appear faster; this is out of scope for this document which will focus on <i>interactive </i>rendering performance.</font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2"><br /></font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Much more detail about the specifics of how rendering inside of Blink works (i.e. the style, layout, and Blink paint systems), as well as a (somewhat dated) discussion of how it might evolve, can be found in the <a href="https://docs.google.com/a/chromium.org/document/d/1wYNK2q_8vQuhVSWyUHZMVPGELzI0CYJ07gTPWP1V1us/edit#heading=h.6cdy1o585rsa">Rendering Pipeline doc</a>. This document is intended to be more descriptive, higher-level, and include the related input and compositing systems.</font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><br /></p><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-The-Critical-Rendering-Path"></a><font size="3">The Critical Rendering Path</font></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">After loading, the page changes in response to two inputs: user interaction mediated by the user agent (default pressed button styles, scrolling, pinch/zooming, etc) and updates to the DOM made by JavaScript. From there, a cascade of effects through several rendering sub-systems eventually produces new pixels on the user’s screen.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">The main subsystems are:</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><ol style="margin-top:0pt;margin-bottom:0pt"><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Input handling [technically not related to graphics per se, but nevertheless critical for many interactions]</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Parsing, which turns a chunk of HTML into DOM nodes</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Style, which resolves CSS onto the DOM</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Layout, which figures out where DOM elements end up relative to one another</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Paint setup, sometimes referred to as recording, which converts styled DOM elements into a display list (SkPicture) of drawing commands to paint later, on a per-layer basis</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Painting, which converts the SkPicture of drawing commands into pixels in a bitmap somewhere (either in system memory or on the GPU if using Ganesh)</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">Compositing, which assembles all layers into a final screen image</font></span></p></li><li style="list-style-type:decimal;font-family:Arial;vertical-align:baseline;background-color:transparent"><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">and, less obviously, the presentation infrastructure responsible for actually pushing a new frame to the OS (i.e. the browser UI and its compositor, the GPU process which actually communicates with the GL driver, etc).</font></span></p></li></ol><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2">As an example, updating the innerHTML of a DOM element that’s visible on-screen will trigger work in every one of the systems above. In bad cases any one of them can cost tens of milliseconds (or more), meaning every one of them can be considered a liability for staying within frame budget -- that is, any one of these stages can be responsible for dropping frames and causing jank.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-Browser-Thread-Architecture"></a><font size="3">Browser Thread Architecture</font></h3><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">The browser has multiple threads, and because of the dependencies implied in the above pipeline which thread an operation runs on matters a lot when it comes to identifying performance bottlenecks. Style, layout, and some paint setup operations run on the renderer’s main thread, which is the same place that JavaScript runs. Parsing of new HTML from the network gets in own thread (in most cases), as does compositing and painting; however parsing of e.g. innerHTML is currently performed synchronously on the main thread.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent">Keep in mind that JavaScript is single threaded and does not yield by default, which means that JavaScript events, style, and layout operations will block one another. That means if e.g. the style system is running, Javascript can’t receive new events. More obviously, it also means that other JavaScript events (such as a timer firing, or an XHR success callback, etc) will block JS events that may be very timely -- like touch events. NB this essentially means </span><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap;background-color:transparent">applications responding to touch input must consider the JavaScript main thread the application’s UI thread, and not block it for more than a few milliseconds</span><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent">.</span></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2"><br /></font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">The ordering of these events is often unfortunate, since currently Blink has a simple FIFO queue for all event types. The <a href="https://docs.google.com/a/chromium.org/document/d/11N2WTV3M0IkZ-kQlKWlBcwkOkKTCuLXGVNylK5E2zvc/edit">Blink Scheduler project</a> is seeking to add a better notion of priorities to this event queue. The scheduler will never be able to actually shorten non-yielding events, though, so is only part of the solution.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br style="line-height:normal" /></font></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2">It's worth noting here that scrolling is “special” in that it happens outside of the main JavaScript context, and scroll positions are asynchronously reported back to the main thread and updated in the DOM. This prevents janky scrolling even if the page executes a lot of JavaScript, but it can get in the way if the page is well-behaved and wants to respond to scrolling.</font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent"><font size="2"><br /></font></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap;background-color:transparent">It's also worth noting that the pipeline above isn’t strictly hierarchically ordered -- that is, sometimes you can update style without needing to re-lay-out anything and without needing to repaint anything. A key example is CSS transforms, which don’t alter layout and hence can skip directly from style resolution (e.g. changing the transform offset) to compositing if the necessary content is already painted. The below sections note which stages are optional. </span><span style="line-height:1.15;background-color:transparent">Different types of screen updates require exercising different stages in the pipeline. </span><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent">One way to keep animations inexpensive is to avoid stages of this pipeline altogether. The following sections cover a few common examples.</span></font></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2"><br /></font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;line-height:17.25px;white-space:pre-wrap"><font size="2">Lastly, note that user interactions that the browser handles, rather than the application, are largely unexceptional: clicking a button changes its style (adding pseudo-classes) and those style changes need to be resolved and later stages of the pipeline run (e.g. the depressed button state needs to be painted, and then the page needs to be re-composited with that new painted content).</font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2"><br /></font></span></p><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-Scrolling"></a><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="3">Scrolling</font></span></h3><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2"><br /></font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2">Updating the viewport's scroll position has been designed to be as cheap as possible, relying heavily on the compositing step and its associated GPU machinery.</font></span></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2"><br /></font></span></p><p style="margin-top:0pt;margin-bottom:0pt"><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">In the simple case, when the user tries to scroll a page events flow through the browser as follows:</span></font></p><ol><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Input events are delivered to the browser process's UI thread</span></font></li><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">The browser's gesture detector processing the input stream decides that the user is attempting to scroll the page content</span></font></li><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Input events are sent directly from the browser UI thread to the compositor thread in the Renderer process (notably bypassing the Renderer's main thread, where JavaScript and Blink live)</span></font></li><ol><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Optionally, if there are touch event or mousewheel handlers registered on the part of the page being scrolled these events are added to Blink's event queue and the compositor will block further work on this frame until it receives an acknowledgment that those events have run and have not been preventDefault'd</span></font></li></ol><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">The compositor updates layer positions relative to the viewport</span></font></li><ol><li><span style="font-family:Arial;line-height:17.25px;white-space:pre-wrap;background-color:transparent"><font size="2">Optionally, if newly exposed parts of the page have not been painted in previous frames, the compositor paints them.</font></span></li><ol><li><span style="font-family:Arial;line-height:17.25px;white-space:pre-wrap;background-color:transparent"><font size="2">Optionally, if newly exposed parts of the page have not been <i>recorded </i>in previous frames, the compositor asks Blink to record new sections of DOM</font></span></li></ol></ol><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">The compositor issues GL commands to the GPU process to recomposite painted textures on the GPU with the updated layer positions in step 4</span></font></li><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">The compositor asynchronously sends a message to the Renderer's main thread with updated scroll position information.</span></font></li><ol><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Optionally at this point updated JavaScript onScroll events can be fired by Blink</span></font></li></ol></ol><p style="margin-top:0pt;margin-bottom:0pt"><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">This flow skips a lot of detail, which is covered in the <a href="design-documents/gpu-accelerated-compositing-in-chrome.html">Accelerated Compositing design doc</a> if you're curious.</span></font></p><p style="margin-top:0pt;margin-bottom:0pt"><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap"><br /></span></font></p><p style="margin-top:0pt;margin-bottom:0pt"><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Important notes:</span></font></p><ul><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">In the common case, only compositing and the GPU infrastructure are exercised in producing a new frame during scrolling; all other steps are skipped.</span></font></li><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Registering touch event handlers (see step 3.1) add those JavaScript touch event handlers as a synchronous step on the critical scrolling path.</span></font></li><li><font face="Arial" size="2"><span style="line-height:17.25px;white-space:pre-wrap">The compositor will almost always still produce frames even if its waiting on Blink for new content (e.g. for touch event handler acknowledgments in step 3.1, or for new recordings of DOM content in 4.1.1). Instead of the content it's trying to produce, it'll put up either old content that's already been painted in previous frames </span><i style="line-height:17.25px;white-space:pre-wrap">or</i><span style="line-height:17.25px;white-space:pre-wrap"> if there's no such content available it'll put up a checkerboard pattern.</span></font></li></ul><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-Modifying-Style-of-Existing-DOM"></a><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="3">Modifying Style of Existing DOM</font></span></h3><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="2"><br /></font></span></p><div><font face="arial, sans-serif" size="2"><span style="line-height:17.25px;white-space:pre-wrap">Modifying the style of existing DOM elements from JavaScript (whether in response to input or not) will exercise most of the rendering pipeline, although it'll skip parsing. Depending on the styles modified, it may also skip layout and painting. Paul Irish and Paul Lewis have written a </span><a href="http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/" style="line-height:17.25px;white-space:pre-wrap;background-color:transparent">good article on html5rocks</a><span style="line-height:17.25px;white-space:pre-wrap;background-color:transparent"> covering which styles affect which pipeline stages.</span></font></div><div><font face="arial, sans-serif" size="2"><br /></font></div><div><font face="arial, sans-serif" size="2">Here's an outline of how modifying style propagates through the browser:</font></div><div><ol><li><font face="arial, sans-serif" size="2">JavaScript runs, modifying some style (setting inline style, modifying a class list, etc). This may happen in a requestAnimationFrame callback, in an input event, in a timer callback, or anywhere else.</font></li><li><font face="arial, sans-serif" size="2">When the compositor next asks Blink to paint part of the document, Blink will optionally recalculate style on any part of the DOM that it may need to paint.</font></li><ul><li><span style="background-color:transparent"><font face="arial, sans-serif" size="2">This style recalculation is theoretically scoped to only the part of the DOM tree whose style is dirty, but in practice often includes the entire document (the Dev Tools timeline will show how many DOM nodes were operated on in each recalc style event).</font></span></li></ul><li><font face="arial, sans-serif" size="2">Optionally, if the style recalculation has dirtied the layout of any elements that may need to be painted, layout is run on the relevant DOM subtree(s).</font></li><ul><li><span style="background-color:transparent"><font face="arial, sans-serif" size="2">Notice the "may" in that sentence, since before layout is run and final element positions are known it isn't possible to tell what will be where. In practice, layouts often occur on the entire document. The Dev Tools timeline will show the root of the tree under operation for each layout event.</font></span></li></ul><li><font face="arial, sans-serif" size="2">Optionally, if any composited layer properties have changed (new composited layers, or new transforms or opacity of existing composited layers) the main-thread copy of the compositor layer tree is updated.</font></li><li><font face="arial, sans-serif" size="2">Now whatever part of the document the compositor requested be painted can actually be painted, but note that this doesn't actually fill in pixels -- Blink here paints into a display list (currently an SkPicture).</font></li><ul><li><span style="background-color:transparent"><font face="arial, sans-serif" size="2">This is step 6 in the overview of main subsystems above, often called SkPicture recording.</font></span></li></ul><li><font face="arial, sans-serif" size="2">New SkPictures and the updated compositor layer tree are transferred from the main thread to the compositor thread (the so-called "commit")</font></li><li><font face="arial, sans-serif" size="2">The compositor prioritizes all content tiles and decides if any tiles need to be re-rastered (i.e. actually painted) to put up this new content</font></li><li><font face="arial, sans-serif" size="2">The compositor then paints these tiles</font></li><ol><li><font face="arial, sans-serif" size="2">With software painting, this is done on a software raster worker thread</font></li><li><font face="arial, sans-serif" size="2">With Ganesh aka GPU rasterization, this is done on the compositor thread itself, converting the display list into GL commands</font></li></ol><li><font face="arial, sans-serif" size="2">The compositor then generates the GL commands to produce a new frame and hands this frame's information to its parent compositor in the browser</font></li><li><font face="arial, sans-serif" size="2">The browser compositor issues the GL commands for a new frame including the browser UI and the child compositor's content</font></li></ol></div><div><font face="arial, sans-serif" size="2">Important notes:</font></div><div><ul><li><font face="arial, sans-serif" size="2">It's possible to trigger style recalculation or layout outside of the rendering pipeline by reading back CSS properties that are lazily computed. In the worst case script can enter a write / read loop where it sets a style, reads a property that forces synchronous layout or style recalculation, and then repeats this process. We call this layout thrashing; Wilson Page has written a <a href="http://wilsonpage.co.uk/preventing-layout-thrashing/">good article on the subject</a>.</font></li></ul><div><font face="arial, sans-serif" size="2">This flow summarizes a lot of detail, again covered in the <a href="design-documents/gpu-accelerated-compositing-in-chrome.html">Accelerated Compositing design doc</a>.</font></div></div><div><font size="2"><br /></font></div><h3 style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><a name="TOC-Adding-new-DOM"></a><span style="font-family:Arial;white-space:pre-wrap;line-height:1.15;background-color:transparent"><font size="3">Adding new DOM</font></span></h3><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2"><br /></font></p><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2">Adding new DOM or replacing a DOM subtree requires parsing the new DOM. Whether this parsing happens synchronously on the main thread or asynchronously off-thread depends on how the DOM is inserted. An incomplete listing:</font></p><ul><li><span style="line-height:1.15;background-color:transparent"><font size="2">XHR responses are currently processed on the main thread; crbug.com/402261 tracks work to make it asynchronous</font></span></li><li><font size="2"><span style="line-height:1.15;background-color:transparent">Setting the srcdoc of an iframe is asynchronous, see crbug.com/</span><span style="line-height:15.3333320617676px">308321 for the work that made this possible</span></font></li><li><span style="line-height:15.3333320617676px"><font size="2">data: URLs are always asynchronously parsed; https://codereview.chromium.org/210253003 for the work that made this possible</font></span></li><li><span style="line-height:1.15;background-color:transparent"><font size="2">During page load, most parsing is done asynchronously using the threaded parser</font></span></li></ul><p style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><font size="2">After parsing, rendering proceeds roughly as above in "modifying style of existing DOM"</font></p></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/chromium.org/dev/developers/the-rendering-critical-path">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9tUty0ZFmhzYCCnlj4Qkzkq9ZLbcDiOJvesPS-1Rf4jl9n5faJupCEZ3BZp8K1SedNdC-ZazRB8ZFwnAmdUp3fjwLP_7DI6rQWOzLD5ukJHBa-nyZ/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
