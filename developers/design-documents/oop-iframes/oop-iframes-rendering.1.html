<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/oop-iframes","deleted":false,"title":"Design Plans for Out-of-Process iframes","dir":"ltr"},{"path":"/developers/design-documents/oop-iframes/oop-iframes-rendering","deleted":false,"title":"Rendering and compositing out of process iframes","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/oop-iframes/oop-iframes-rendering\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/oop-iframes","parentWuid":"wuid:gx:2595d8142f0e6966","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Rendering and compositing out of process iframes","locale":"en","wuid":"wuid:gx:de0ea326b8525e6","revision":7,"path":"/developers/design-documents/oop-iframes/oop-iframes-rendering","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"oop-iframes-rendering","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Rendering and compositing out of process iframes - The Chromium Projects" />
<meta itemprop="name" content="Rendering and compositing out of process iframes - The Chromium Projects" />
<meta property="og:title" content="Rendering and compositing out of process iframes - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Rendering and compositing out of process iframes - The Chromium Projects</title>
<meta itemprop="image" content="https://www.chromium.org/_/rsrc/1369666044574/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering%20design%20-%20rendering%20trees.png" />
<meta property="og:image" content="https://www.chromium.org/_/rsrc/1369666044574/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering%20design%20-%20rendering%20trees.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../design-documents.1.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../oop-iframes.1.html" dir="ltr">Design Plans for Out-of-Process iframes</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Rendering and compositing out of process iframes</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><span><h1 dir="ltr" style="text-align:left;line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Summary"></a><span style="background-color:transparent;color:rgb(74,134,232);font-family:Trebuchet MS;font-size:17px;white-space:pre-wrap;line-height:1.15;font-weight:normal">Summary</span></h1><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This document provides a design for rendering and compositing out-of-process iframe (OOPIF) elements.</span></p><h2 dir="ltr" style="line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Contents"></a><span style="font-size:17px;font-family:Trebuchet MS;color:rgb(74,134,232);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Contents</span></h2><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;margin-left:18pt"><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Summary"><strong>1 </strong>Summary</a><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Contents"><strong>1.1 </strong>Contents</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Background"><strong>1.2 </strong>Background</a><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Out-of-process-iframes"><strong>1.2.1 </strong>Out-of-process iframes</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-A-very-brief-primer-on-Blink-rendering-and-painting"><strong>1.2.2 </strong>A very brief primer on Blink rendering and painting</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-A-little-bit-about-compositing-and-the-GPU"><strong>1.2.3 </strong>A little bit about compositing and the GPU</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-The-bercompositor"><strong>1.2.4 </strong>The Übercompositor</a></li></ol></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Rendering-OOPIFs"><strong>1.3 </strong>Rendering OOPIFs</a><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Overview"><strong>1.3.1 </strong>Overview</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Browser-process-changes"><strong>1.3.2 </strong>Browser process changes</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Renderer-process-changes"><strong>1.3.3 </strong>Renderer process changes</a></li></ol></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Compositing"><strong>1.4 </strong>Compositing</a><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Cross-site-texture-stealing"><strong>1.4.1 </strong>Cross-site texture stealing</a></li></ol></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Constraints"><strong>1.5 </strong>Constraints</a><ol class="goog-toc"><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Software-path-rendering"><strong>1.5.1 </strong>Software path rendering</a></li><li class="goog-toc"><a href="oop-iframes-rendering.1.html#TOC-Compositor-availability"><strong>1.5.2 </strong>Compositor availability</a></li></ol></li></ol></li></ol></div></div></div></div></p><div><span><br /></span></div><br /><h2 dir="ltr" style="line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Background"></a><span style="font-size:17px;font-family:Trebuchet MS;color:rgb(74,134,232);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Background</span></h2><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Out-of-process-iframes"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Out-of-process iframes</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This is in support of the main OOPIF design work, for which a higher level description can be found at </span><a href="../oop-iframes.html" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">http://www.chromium.org/developers/design-documents/oop-iframes</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-A-very-brief-primer-on-Blink-rendering-and-painting"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">A very brief primer on Blink rendering and painting</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">When an HTML resource is loaded into Blink, the parser tokenizes the document and builds a DOM tree based on the elements it contains. The DOM tree is a WebCore data structure that consists of objects with types that inherit from </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/dom/Node.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">WebCore::Node</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">As each node is added to the DOM tree, the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">attach()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> method is called on it which creates an associated </span><span style="font-size:15px;font-family:Arial;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">renderer</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> (an object with a type that inherits from </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/rendering/RenderObject.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">WebCore::RenderObject</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">) and adds it to the render tree. Objects in the render tree roughly correspond to objects in the DOM tree, but there are many exceptions (some DOM nodes do not receive renderers, some will have more than one renderer, and many renderers are created that that do not have corresponding DOM nodes). The render tree is the primary data structure involved in the </span><span style="font-size:15px;font-family:Arial;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">layout</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> phase of rendering, during which size and position are computed for all rendered elements.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">During construction or modification of the render tree, some renderers will receive associated </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/rendering/RenderLayer.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">WebCore::RenderLayer</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> objects. Attaching a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderObject </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">indicates that the renderer has its own coordinate system, and therefore the content of the renderer and its descendants can (but won’t necessarily) be painted to a separate compositing layer. Each </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">is added to the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">tree, which has a sparse association with the render tree and is the primary data structure used for the painting phase of rendering.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The diagram below provides a basic illustration of the DOM tree, render tree, and </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">tree for the following HTML:</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">&lt;html&gt;</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">  &lt;body&gt;</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">    &lt;iframe src=”</span><a href="http://www.example.org" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">http://www.example.org</span></a><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">”&gt;&lt;/iframe&gt;</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">  &lt;/body&gt;</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">&lt;/html&gt;</span></p><div style="text-align:center"><img border="0" src="../../../_/rsrc/1369666044574/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering&#32;design&#32;-&#32;rendering&#32;trees.png" /></div><div style="display:block;text-align:left"></div><br /><div style="text-align:center"></div><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">More details on rendering, and in particular the layout phase, can be found at </span><a href="https://www.webkit.org/blog/114/webcore-rendering-i-the-basics/" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">https://www.webkit.org/blog/114/webcore-rendering-i-the-basics/</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The details of painting depend on whether accelerated compositing is used. This design uses the assumption that OOPIFs will always be rendered using GPU accelerated compositing in Chromium.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">When accelerated compositing is in use, some </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayers</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> receive separate compositing layers, or </span><span style="font-size:15px;font-family:Arial;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">backing surfaces</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, onto which their bitmaps will be painted. All compositing layers are provided to the compositor, where they are used to create the final rendered bitmap. In WebCore, compositing layers are represented and managed by the </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/rendering/RenderLayerBacking.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> class.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> in turn corresponds to a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">GraphicsLayer</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, the glue between WebCore rendering and platform compositing, instantiated in our case as </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/platform/graphics/chromium/GraphicsLayerChromium.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">GraphicsLayerChromium</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">GraphicsLayers</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> are positioned into yet another sparse tree, this one used by the compositor.</span></p><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-A-little-bit-about-compositing-and-the-GPU"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">A little bit about compositing and the GPU</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">A </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">GraphicsLayer</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> internally manages a </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/Platform/chromium/public/WebLayer.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">WebLayer</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, which is a compositor container for a shared memory buffer between a renderer process and the GPU process. During the painting phase, each </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">instructs all of its associated </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderObjects </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to paint into the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebLayer</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> buffer. The GPU process can output the bitmap texture to the screen.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Details of how the different processes synchronize buffer usage and throttle rendering vary significantly by platform. The GPU often uses a double buffering system, in which two buffers are shared so that one buffer is being output to the screen while the other is being painted. When a paint is complete, the renderer issues a swap buffer command to the GPU to cause it to swap which buffer is being displayed, and which is available for paint. The renderer sends an IPC to the browser when a new buffer is available and expects an ACK for every such message. This ACK contains a previously sent buffer to be reused by the GPU and a sync point (location in the GPU command buffer), or a NULL buffer, if nothing is available to be recycled. Sync points are used to make sure the same buffer isn’t being rendered into and drawn out of. When an embedding compositor issues the last draw call that uses the child renderer’s image data to the GPU command buffer, it also inserts a sync point into the command stream and sends an ACK to the renderer with that number. Rendering into the recycled buffer is only allowed after the GPU processed all commands up to the sync point. Rendering is suspended until that happens.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The compositor uses a </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/cc/layers/texture_layer.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">TextureLayer</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> to encapsulate textures that need to be shared between different processes. It also provides a management facility for </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureLayer</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> in </span><a href="https://code.google.com/p/chromium/codesearch#chromium/src/cc/resources/texture_mailbox.h" style="text-decoration:none"><span style="font-family:Courier New;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">TextureMailbox</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, which conveys ownership of the texture between processes. One process can make a texture available to another process by using the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">glProduceTextureCHROMIUM</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> GPU command buffer API for the appropriate mailbox, and then the next process takes ownership of the texture via the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">glConsumeTextureCHROMIUM</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> GPU command buffer API on the same mailbox.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Most of this information, and much much more, can be found at </span><a href="../gpu-accelerated-compositing-in-chrome.html" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-The-bercompositor"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The Übercompositor</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The </span><a href="https://docs.google.com/a/chromium.org/document/d/1ziMZtS5Hf8azogi2VjSE6XPaMwivZSyXAIIp0GgInNA/edit" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">ubercompositor</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is being developed to improve rendering performance on Aura, by integrating compositing of UI and web content in the browser process. Under the new architecture, child compositors in each rendering process supply </span><span style="font-size:15px;font-family:Arial;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">compositor frames</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> to the parent compositor which are then composited into the screen for display.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Each </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">CompositorFrame </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">contains a set of quads and associated texture references that are generated by a child compositor in a renderer process. Internally, </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureMailboxes</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> are used to transfer textures to the browser process.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Whereas in the existing hardware path compositing mode the renderer sends a SwapBuffer message to the GPU to instruct it to display its uploaded texture to screen, in the ubercompositor architecture the renderer sends an IPC message directly to the browser containing the compositor frame. The parent compositor then interacts with the GPU process via IPC in order to do the final compositing.</span></p><h2 dir="ltr" style="line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Rendering-OOPIFs"></a><span style="font-size:17px;font-family:Trebuchet MS;color:rgb(74,134,232);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Rendering OOPIFs</span></h2><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Overview"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Overview</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The full security advantage of OOPIFs is very difficult to achieve when the compositing of a browser tab’s contents is done by a renderer process, because the ability to use a texture in compositing implies read access to the pixels of that texture (see the Cross Site Texture Stealing section below). Therefore the primary design assumes the availability of ubercompositor. A prototype has been built using conventional hardware path compositing, and we are maintaining that parallel design with the expectation that we will want OOPIFs to be available on platforms without ubercompositor availability, despite the significantly reduced security properties.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The  following list enumerates the requirements for OOPIFs to paint:</span></p><ol style="margin-top:0pt;margin-bottom:0pt"><li dir="ltr" style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The browser must enable accelerated compositing whenever an OOPIF is being rendered.</span></p></li><li dir="ltr" style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">New browser process facilities must pass messages from the embedding renderer process to the iframe renderer process for sizing information, and from the iframe renderer process to the embedding renderer process with information on texture availability for compositing.</span></p></li><li dir="ltr" style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">New renderer process facilities must receive identifying texture information (i.e. a texture mailbox name or ubercompositor frame) and associate it with a </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebLayer</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> that is attached to the </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">FrameView</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> object associated with the OOPIF’s </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Frame</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> object.</span></p></li><li dir="ltr" style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderFrameBase</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, the WebCore renderer associated with frame and iframe elements, must be aware when it contains out-of-process rendered content and in that case receive its own </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> and </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p></li><li dir="ltr" style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">the </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">associated with </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderFrameBase </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">must set the contents of its graphics layer to the WebLayer.</span></p></li></ol><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">When using hardware path compositing without ubercompositor, the renderer process for the out-of-process frame creates a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureMailbox</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. A </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderWidgetHostViewSubframe </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">object in the browser process passes the mailbox name to the top-level frame renderer. This is illustrated in the diagram below. The right half of the diagram is mainly existing functionality that will require few changes. The left half contains some new and modified classes as well as new IPC messages.</span></p><div style="text-align:center;display:block"><a href="oop-iframes-rendering/rendering&#32;design&#32;-&#32;texture&#32;routing.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../../_/rsrc/1369666242373/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering&#32;design&#32;-&#32;texture&#32;routing.png" /></a></div><br /><div style="text-align:center"></div><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">When using the ubercompositor, the renderer process for the subframe creates a compositor frame (a concept entirely distinct from HTML frames), which can contain many texture mailboxes. It passes the compositor frame directly to the browser process, which then relays it to the top-level frame renderer. The top-level frame renderer cannot access the textures that are stored in GPU memory, but can pass all of its compositor frames, including those obtained from the subframe renderer process, back to the browser process for the ubercompositor to composite them.</span></p><div style="text-align:center;display:block"><a href="oop-iframes-rendering/rendering&#32;design&#32;-&#32;compositor&#32;frame&#32;routing.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../../_/rsrc/1369666382385/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering&#32;design&#32;-&#32;compositor&#32;frame&#32;routing.png" /></a></div><br /><div style="text-align:center"></div><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Browser-process-changes"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Browser process changes</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Relevant changes to the representation of pages and frames in the browser process are described at </span><a href="../oop-iframes.html" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">http://www.chromium.org/developers/design-documents/oop-iframes</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">IPC messages must be routed from the subframe renderer to the top-level frame renderer to notify it of changed texture buffers or compositor frames. Also, IPC messages must be routed from the top-level frame renderer to the subframe renderer with control information such as resizing.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Each </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ViewHost_*</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> message will be passed through the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderWidgetHostView </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">for its associated </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderFrame</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderWidgetHostView </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">will use the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebContents </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to send the message to the destination </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderFrame </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(for messages originating from a subframe renderer, this is the top-level </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderFrame</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">; for messages destined to a subframe renderer, this will use </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">GetRenderManager()-&gt;current_host()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">) and then dispatch the message to the proper recipient.</span></p><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Renderer-process-changes"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Renderer process changes</span></h3><p><span style="font-size:15px;font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;font-weight:normal;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">1. IPCs</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderView </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">registers handlers for the new </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ViewMsg_BuffersSwapped</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> IPC message (in hardware path compositing) and </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ViewMsg_CompositorFramesSwapped </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(for ubercompositor). This handlers lazily instantiate a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">SubframeCompositorHelper</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> object and proxies most of the handling to the helper. The new IPC messages convey information such as size, </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureMailbox</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> name, compositor frame data, and GPU routing information for the texture with the swapped out frame contents that was rendered by another process.</span></p><p><span style="font-size:15px;font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;font-weight:normal;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">2. SubframeCompositorHelper</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">SubframeCompositorHelper</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is a new class that is responsible for managing the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">and </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">DelegatedRendererLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">information associated with a swapped out frame. It is attached to the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebKit::RenderFrame</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> for an out-of-process frame, and is created upon receipt of a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ViewMsg_BuffersSwapped</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> or </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ViewMsg_CompositorFramesSwapped </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">IPC message. It performs the following tasks:</span></p><ul style="margin-top:0pt;margin-bottom:0pt"><li dir="ltr" style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Create a local </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureLayer </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">for a received </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureMailbox </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">name, or a </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">DelegatedRendererLayer </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">for a received compositor frame</span></p></li><li dir="ltr" style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Creates a </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebLayer </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">containing a </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureLayer</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> or </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">DelegatedRendererLayer, </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">and attaches the </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebLayer </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to the </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">FrameView </span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">for the swapped out subframe</span></p></li><li dir="ltr" style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Manages the lifetime of the </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureLayer</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> or </span><span style="font-size:13px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">DelegatedRendererLayer</span></p></li></ul><div style="text-align:center;display:block"><a href="oop-iframes-rendering/rendering&#32;design&#32;-&#32;ogres&#32;are&#32;like&#32;onions.png%3Fattredirects=0" imageanchor="1"><img border="0" src="../../../_/rsrc/1369666480704/developers/design-documents/oop-iframes/oop-iframes-rendering/rendering&#32;design&#32;-&#32;ogres&#32;are&#32;like&#32;onions.png" /></a></div><br /><br /><div style="text-align:center"></div><p><span style="font-size:15px;font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;font-weight:normal;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">3. FrameView and RenderIFrame</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebCore itself requires few modifications related to rendering. The main change is that for any cross-site iframe element, its associated </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderIFrame</span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">must always have a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayer</span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">and </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking</span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">created. This can be accomplished by modifying </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderPart::requiresAcceleratedCompositing()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> and </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderIFrame::requiresLayer()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> to return true. Additionally, </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderCompositor::requiresCompositingForFrame()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, which decides whether to create a new compositing layer for a frame renderer, must always return true for OOPIFs.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderIFrame</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, since it inherits from </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebCore::RenderWidget</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, contains a pointer to a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebCore::Widget</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. The </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">m_widget</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> on any </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderIFrame</span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">should always point to a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">FrameView</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">SubframeCompositorHelper</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> attaches the layer to the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">FrameView</span><span style="font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to make it accessible during rendering: </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderCompositor</span><span style="font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">accesses the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">WebLayer </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">via </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">FrameView::platformLayer()</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> and assigns it as the content for the frame’s </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">RenderLayerBacking</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. Once this is done, the compositor will display the frame texture in the correct position.</span></p><h2 dir="ltr" style="line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Compositing"></a><span style="font-size:17px;font-family:Trebuchet MS;color:rgb(74,134,232);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Compositing</span></h2><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Cross-site-texture-stealing"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Cross-site texture stealing</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">An important security requirement for OOPIFs is that even though cross-site frame contents are being composited with the content in the top-level frame, the top-level renderer process must not be able to read the pixels that are drawn within the frame. The ability to do this would allow a compromised renderer process access to cross-site content, which is contrary to </span><a href="../site-isolation.html" style="text-decoration:none"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">the goals of the site isolation project</span></a><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">We don’t believe this to be a feasible goal without the availability of ubercompositor. It would be very difficult, given the performance constraints of compositing,  to require that the top-level renderer process be able to composite using a given texture without being able to write that texture to an accessible memory buffer. In the ubercompositor model, compositing is done by the trusted browser process so this constraint no longer .</span></p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Access to the texture from a parent renderer process will be prevented by the GPU process, where a check will be added to the handler of the </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">glConsumeTextureCHROMIUM</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> command buffer API so that a </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">TextureMailbox</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> can be consumed only by the renderer process that initially created the texture, and by the browser process.</span></p><h2 dir="ltr" style="line-height:1.15;margin-top:10pt;margin-bottom:0pt"><a name="TOC-Constraints"></a><span style="font-size:17px;font-family:Trebuchet MS;color:rgb(74,134,232);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Constraints</span></h2><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Software-path-rendering"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Software path rendering</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">OOPIFs will not be supported when software path rendering is enabled. Software compositing, when it becomes available, will allow OOPIFs to function on systems with graphics driver that do not support hardware-based compositing, but this will have the same security limitations as OOPIFs rendered under current hardware path compositing, which does not prevent cross-site texture stealing.</span></p><h3 dir="ltr" style="line-height:1.15;margin-top:8pt;margin-bottom:0pt"><a name="TOC-Compositor-availability"></a><span style="font-family:Trebuchet MS;color:rgb(102,102,102);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Compositor availability</span></h3><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Ubercompositor is limited to running on Aura, which currently only runs on ChromeOS. We expect Aura to be running on Windows and Linux before OOPIFs are enabled on stable without a flag. Until Aura is also ported to OS X, our implementation will rely on the current hardware-accelerated compositor and the software compositor.</span></p><div><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><br /></span></div></span></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/oop-iframes/oop-iframes-rendering">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXukca4jaDOG9SuQz_G8t7HlWL2VFSaa6et3Yp2Bl7k6RGESk-ahM14RC8MeHh1j84vschwjGOMwFeIH6ar2gZJD52aMzfMKx4CN9B2z5tTnRwthO6ZhmhKnSTaEGtvqqcfpylHN/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
