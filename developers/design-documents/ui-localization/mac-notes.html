<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/ui-localization","deleted":false,"title":"UI Localization (aka Translations)","dir":"ltr"},{"path":"/developers/design-documents/ui-localization/mac-notes","deleted":false,"title":"Mac Notes","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/ui-localization/mac-notes\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/ui-localization","parentWuid":"wuid:gx:6a25a2a364eb9304","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Mac Notes","locale":"en","wuid":"wuid:gx:31eab843676abc7f","revision":19,"path":"/developers/design-documents/ui-localization/mac-notes","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"mac-notes","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Mac Notes - The Chromium Projects" />
<meta itemprop="name" content="Mac Notes - The Chromium Projects" />
<meta property="og:title" content="Mac Notes - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Mac Notes - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../design-documents.1.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../ui-localization.1.html" dir="ltr">UI Localization (aka Translations)</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Mac Notes</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="mac-notes.html#TOC-Mac-Chromium-UI-Localization"><strong>1 </strong>Mac Chromium UI Localization</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-String-Constants"><strong>2 </strong>String Constants</a><ol class="goog-toc"><li class="goog-toc"><a href="mac-notes.html#TOC-Context-of-the-String"><strong>2.1 </strong>Context of the String</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-New-Strings"><strong>2.2 </strong>New Strings</a></li></ol></li><li class="goog-toc"><a href="mac-notes.html#TOC-Building-Updating-UI-from-Code"><strong>3 </strong>Building/Updating UI from Code</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-UI-from-XIB-Files"><strong>4 </strong>UI from XIB Files</a><ol class="goog-toc"><li class="goog-toc"><a href="mac-notes.html#TOC-Menus-Only"><strong>4.1 </strong>Menus Only</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-Windows-and-Views"><strong>4.2 </strong>Windows and Views</a><ol class="goog-toc"><li class="goog-toc"><a href="mac-notes.html#TOC-Very-Simple-UIs"><strong>4.2.1 </strong>Very Simple UIs</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-Simple-Entry-UIs"><strong>4.2.2 </strong>Simple Entry UIs</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-Complex-UIs"><strong>4.2.3 </strong>Complex UIs</a></li><li class="goog-toc"><a href="mac-notes.html#TOC-Dynamic-UIs"><strong>4.2.4 </strong>Dynamic UIs</a></li></ol></li></ol></li></ol></div></div></div></div><br /><div><font size="1">keywords: i18n, internationalization, l10n, localization</font><h2><a name="TOC-Mac-Chromium-UI-Localization"></a>Mac Chromium UI Localization</h2><div>In a nutshell, Apple's model for localizing a UI is to use .lproj directories and localize your xib files for each language.  This way the UI can be tweaked for sizing to make sure everything fits, including changing layouts as needed for the locales where the normal layout just doesn't work (<a href="http://developer.apple.com/internationalization/localization/" rel="nofollow" style="color:rgb(71,18,100);outline-style:none;outline-width:initial;outline-color:initial" target="_blank">Apple's Localization Documentation</a>).  At the moment (August 2009), the tree has 21 xib files and the GRD files list 50 languages; that means maintaining and shipping over 1000 nib files!  A tool could be written to automate pulling the strings from the pak files and putting them into the xib files, but that still leaves the sizing/layout adjustments.  Within Google, there are projects that automate driving every part of a product's UI, in every language, and taking screen shots.  Someone could inspect all of these, tweak the layouts to get a working UI; but to keep the UI working, there would need to be automation to continually do this to detect when any UI changes, and manually re-inspect each time any part of the UI changes to catch new layout problems, but that means signing up for that work plus the shipping overhead of the nibs.</div><div><br /></div><div>Some of the cross platform model code already generates content for the UI out of pak files.  We're following that model with our xib based UI, and doing as much as possible at runtime.  The nibs compiled out of xibs are landing in the Resources directory of the app directly, ie-they aren't language specific.  The actual strings in them are markers so a helper can fetch the right strings from the pak files.  We've also got some helpers that will do their best to <i>tweak</i> the sizes of objects based on the new string values.  The good news is this looks like it is going to be able to cover a lot of the needs we have; but it also means, if we really have to, we can also fall back to creating a locale specific xib for any specific locales that need in (put it in the right .lproj subfolder and Cocoa will pick that up over the more generic one).</div><div><br /></div><div>These next sections cover some of what is available and how to use it for making sure any Mac UI being built is localized.</div><div><h2><a name="TOC-String-Constants"></a>String Constants</h2><h3><a name="TOC-Context-of-the-String"></a>Context of the String</h3><div><div>Since the UI is similar on all platforms there is a good chance the string you need already exists in the GRD files, but make sure you are using it from the right context.  Sometimes multiple <font face="'courier new', monospace">IDS_*</font> values have the same English text, in many cases these string values won't be the same in all languages.  To figure out the right one to use, read the description to see how they are intended to be used (e.g., one might be a menu item, and another a window title).  The differences are usually things like one use is as a Noun (a title, label) and the other is a Verb/Action (menu item, button)–so using the right one is important.</div><h3><a name="TOC-New-Strings"></a>New Strings</h3><div>If you do need to add new constants to generated_resources.grd, make sure both the <font face="'courier new', monospace">IDS_*</font> value and the description on it are clear.  When it reaches the Translation Console they will only have the description to understand what it is/how it's used; and if someone is looking at a code/XIB, they might only have the <font face="'courier new', monospace">IDS_*</font> value to go by.  Remember to put the new entry into a conditional block so it is only defined on the Mac, we don't want to cause other platforms to carry strings they don't actually need.  There doesn't appear to be a solid convention on the naming of the <font face="'courier new', monospace">IDS_*</font> constants, but TVL (following what Pinkerton did) has been putting <font face="'courier new', monospace">_MAC</font> at the end of the new ones he's created to help make it clear they are specific to one platform; it can't hurt to follow this convention.</div></div><h2><a name="TOC-Building-Updating-UI-from-Code"></a>Building/Updating UI from Code</h2><p><font face="'courier new', monospace"><span style="font-family:Arial,Verdana,sans-serif">Chrome already includes some helpers for fetching resource strings and assembling them (<span style="font-family:courier new,monospace">src/ui/base/l10n/l10n_util.h</span>).  There are some Mac additions (<span style="font-family:courier new,monospace">src/ui/base/l10n/l10n_util_mac.h)</span><font face="arial, sans-serif"> to help get things into the form needed for Cocoa UI:</font></span></font></p><div><ul><li>Fetch resource strings directly into <font face="'courier new', monospace">NSString</font>s via <font face="'courier new', monospace">l10n_util::GetNSString()</font> and <font face="'courier new', monospace">l10n_util::GetNSStringF()</font>.</li><li>Some of the resources strings include the Windows keyboard accelerator marker (<i>"&amp;Cut"</i>, Alt-C would jump the focus to that UI item), and they also tend to have three periods (...) instead of ellipses (…).  <font face="'courier new', monospace">l10n_util::FixUpWindowsStyleLabel()</font> will clean these up and return an <font face="'courier new', monospace">NSString</font>.</li><li>If you are fetching a resource string that is meant for the UI (i.e.-the combination of the two above), you can do it in one call with <font face="'courier new', monospace">l10n_util::GetNSStringWithFixup()</font> and <font face="'courier new', monospace">l10n_util::GetNSStringFWithFixup()<span style="font-family:Arial,Verdana,sans-serif">.</span></font></li></ul><div>The one to remember here is <span style="font-family:courier new,monospace">l10n_util::FixUpWindowsStyleLabel()</span>. If you are getting a list of menu items, button title, etc. from cross platform code, there is a good chance you will need to run it though there before putting it into Cocoa UI objects.</div><div><font face="'courier new', monospace"><br /></font></div><div><font face="'courier new', monospace"><span style="font-family:Arial,Verdana,sans-serif"><i>Example:</i> See </span>src/chrome/browser/tab_contents/render_view_context_menu_mac.mm</font>.</div></div><h2><a name="TOC-UI-from-XIB-Files"></a>UI from XIB Files</h2><div>The l10n support is built on GTM's <a href="http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/AppKit/GTMUILocalizer.h" target="_blank">UILocalizer</a> and <a href="http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/AppKit/GTMUILocalizerAndLayoutTweaker.h" target="_blank">UILocalizerAndLayoutTweaker</a>. For more detail than the steps below, please see <a href="http://code.google.com/p/google-toolbox-for-mac/wiki/UILocalization" target="_blank">GTM's docs</a> and source.</div><h3><a name="TOC-Menus-Only"></a>Menus Only</h3><div>For places where you need to manually load a menu from a XIB file (like the menubar or the menus for the bookmark bar), build the menus in the XIB file like normal, then once you have them wired up go back back and make it localizable as follows:</div><div><ol><li>Open <font face="'courier new', monospace">chrome_nibs.gypi</font> and add your XIB to the  <font face="'courier new', monospace">max_translated_xibs</font> list.</li><li>Update the titles to be <font face="'courier new', monospace">^IDS_CONSTANT_NAME</font> (yes, put a caret followed by the IDS constant name into the XIB).  You can even do things like <font face="'courier new', monospace">^IDS_CONSTANT$IDS_PRODUCT_NAME</font>, and use the <font face="'courier new', monospace">l10n_util::GetStringF</font> API to insert one string into another (say for "<i>About [product name]</i>").</li><li>In your XIB, and add an <font face="'courier new', monospace">NSObject</font>.</li><li>In the Inspector, change the class of this <font face="'courier new', monospace">NSObject</font> to the <font face="'courier new', monospace">ChromeUILocalizer</font> class.</li><li>Still in the Inspector, switch over to the outlets for this object, where you'll have three outlets.  Wire any of them to the different menus you need in your XIB file.  You don't need to wire <font face="'courier new', monospace">owner_</font> to the file owner; any menu will work here, and <font face="'courier new', monospace">owner_</font> can have extra meaning (see the UI section).</li></ol></div><div>That's it.  During the <font face="'courier new', monospace">awakeFromNib</font> the Localizer will run through any referenced object and change any strings that started with <font face="'courier new', monospace">^IDS_</font> to the values that are looked up.</div><div><br /></div><div><i>Examples:</i> See <font face="'courier new', monospace">src/chrome/app/nibs/BookmarkBar.xib</font>, <font face="'courier new', monospace">src/chrome/app/nibs/MainMenu.xib</font></div><h3><a name="TOC-Windows-and-Views"></a>Windows and Views</h3><div>Even for the most basic of UIs, like the bookmark editor or new bookmark folder, it can get complicated as the names of labels and button can change with different languages.  Just how much work you need to do depends on how complex your UI is.</div><h4><a name="TOC-Very-Simple-UIs"></a>Very Simple UIs</h4><div>If you are very lucky, you just need strings replaced and nothing will ever get clipped, then...</div><div><br /></div><div>Build your UI as you normally would and get things working, then (and these are very similar to what menu's listed):</div><div><ol><li>Open <font face="'courier new', monospace">chrome_nibs.gypi</font> and add your XIB to the  <font face="'courier new', monospace">max_translated_xibs</font> list.</li><li>Update the UI strings to be <font face="'courier new', monospace">^IDS_CONSTANT_NAME</font> (yes, put a caret followed by the IDS constant name into the XIB).  You can even do things like <font face="'courier new', monospace">^IDS_CONSTANT$IDS_PRODUCT_NAME</font>, and use the <font face="'courier new', monospace">l10n_util::GetStringF</font> API to insert one string into another (say for "<i>About [product name]</i>").</li><li>In your XIB, and add an <font face="'courier new', monospace">NSObject</font>.</li><li>In the Inspector, change the class of this <font face="'courier new', monospace">NSObject</font> to the <font face="'courier new', monospace">ChromeUILocalizer</font> class.</li><li>Still in the Inspector, switch over to the outlets for the Localizer object:</li><ul><li>If the owner for this XIB is a subclass of <font face="'courier new', monospace">NSViewController</font> or <font face="'courier new', monospace">NSWindowController</font>, you can just wire <font face="'courier new', monospace">owner_</font> to the XIB owner, and the Localizer will run through the controller's view/window (going into view, subviews, view's menus, etc.) processing all strings that start with <font face="'courier new', monospace">^IDS_*</font>.  This will not only handle titles, but also altTitles for VoiceOver, tooltips, etc.</li><li>If the owner of the XIB isn't one of these and/or you have another view/window in the XIB, you can use the <font face="'courier new', monospace">otherObjectToLocalize_</font> and <font face="'courier new', monospace">yetAnotherObjectToLocalize_</font> to wire those up also (if you have <font face="'courier new', monospace">NSMenu</font>s you don't need to directly wire them if they are wired into the view hierarchy that is already being walked).</li></ul></ol><div><i>Example:</i> See ???</div></div><h4><a name="TOC-Simple-Entry-UIs"></a>Simple Entry UIs</h4><div>If you have a UI with labeled text fields and/or checkboxes/radios, then odds are you need some of the object sizes to be tweaked so text isn't truncated and the clickable areas don't extend miles to the right.  GTM's <font face="'courier new', monospace">UILocalizerAndLayoutTweaker</font> can handle some of this for you.  The GTM docs include a page with examples showing some of what can be done, <a href="http://code.google.com/p/google-toolbox-for-mac/wiki/UILocalization" target="_blank">GTM's UILocalization docs</a>.</div><div><br /></div><div>Build your UI as normal, then:</div><div><ol><li>Do steps 1-4 of the Very Simple UI case (but do NOT wire up any outlets on the Localizer).</li><li>Go through your UI putting things that need alignment into CustomViews and change the view's class to be a <font face="'courier new', monospace">GTMWidthBasedTweaker</font>.  See the <a href="http://code.google.com/p/google-toolbox-for-mac/wiki/UILocalization" target="_blank">GTM docs</a> for some of what can be done.</li><li>Add an <font face="'courier new', monospace">NSObject</font> to your XIB file.</li><li>In the Inspector, change the class of the new object to be a <font face="'courier new', monospace">GTMUILocalizerAndLayoutTweaker</font>, and wire:</li><ol><li>The <font face="'courier new', monospace">localizer_</font> outlet to the Localizer you created before.</li><li>The <font face="'courier new', monospace">uiObject_</font> to the window/view you need fixed up.</li></ol></ol><div><i>Example:</i> See <font face="'courier new', monospace">src/chrome/app/nibs/BookmarkEditor.xib</font>.</div><div><br /></div><div>Notes for the curious:</div><div><ul><li>For anything in Chrome you wire up the LocalizerAndLayoutTweaker's <font face="'courier new', monospace">localizer_<span style="font-family:Arial,Verdana,sans-serif"> rather than the </span>owner_</font>, because we aren't using the stock GTM behavior of localizing via <font face="'courier new', monospace">.strings</font> files.</li><li>You don't wire any of the outlets on the Localizer because there is no defined order on when the two objects' <font face="'courier new', monospace">awakeFromNib</font> will be called, so the LocalizerAndTweaker drives the Localizer to define the order.</li></ul></div></div><h4><a name="TOC-Complex-UIs"></a>Complex UIs</h4><div>Preferences was sorta the best example of this, but that has since moved to domui, so the relevant info isn't in the tree any more.  If you are curious, you can look at the history to dig up the sources/xibs to see how it was done.</div><h4><a name="TOC-Dynamic-UIs"></a>Dynamic UIs</h4><div>There are cases where the data that ends up being displayed is dynamic, in that it includes data that comes from webpages, servers, etc.  For these, we will probably always need to do custom code to help with the layout.</div><div><br /></div><div><div><i>Examples:</i> See <font face="'courier new', monospace">src/chrome/browser/cocoa/infobar*</font>.</div><div><br /></div></div></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div id="sites-attachments-container">
</div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/ui-localization/mac-notes">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
