<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/extensions","deleted":false,"title":"Extensions","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes","deleted":false,"title":"Proposed \u0026 Proposing New Changes","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development","deleted":false,"title":"API Proposals (New APIs Start Here)","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api","deleted":false,"title":"Context Menu API Proposal","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/extensions/proposed-changes/apis-under-development","parentWuid":"wuid:gx:4a1283b73b239cf","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Context Menu API Proposal","locale":"en","wuid":"wuid:gx:148ac2791af64bf6","revision":23,"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"context-menu-api","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Context Menu API Proposal - The Chromium Projects" />
<meta itemprop="name" content="Context Menu API Proposal - The Chromium Projects" />
<meta property="og:title" content="Context Menu API Proposal - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Context Menu API Proposal - The Chromium Projects</title>
<meta itemprop="image" content="https://www.chromium.org/_/rsrc/1324342231865/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api/context_menu_api_4.png?height=200&amp;width=151" />
<meta property="og:image" content="https://www.chromium.org/_/rsrc/1324342231865/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api/context_menu_api_4.png?height=200&amp;width=151" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../../../design-documents.1.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../../../extensions.1.html" dir="ltr">Extensions</A>‎ &gt; ‎<A href="../../proposed-changes.1.html" dir="ltr">Proposed &amp; Proposing New Changes</A>‎ &gt; ‎<A href="../apis-under-development.1.html" dir="ltr">API Proposals (New APIs Start Here)</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Context Menu API Proposal</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><b><font face="arial, sans-serif"><div><b><font face="arial, sans-serif"><span style="background-color:rgb(255,0,0)"><br /></span></font></b></div><div><b><font face="arial, sans-serif"><span style="background-color:rgb(255,255,0)">NOTE: This document is now out of date.</span> The API evolved some while behind the experimental flag, and is becoming fully supported in chrome 6. For details on the current implementation you can see </font></b><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><div style="display:inline!important"><b><font face="arial, sans-serif"><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><div style="display:inline!important"><a href="http://code.google.com/chrome/extensions/trunk/contextMenus.html">http://code.google.com/chrome/extensions/trunk/contextMenus.html</a></div></font></b></span></font></b></div></font></b></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><div style="display:inline!important"><b><font face="arial, sans-serif"><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><br /></font></b></span></font></b></div></font></b></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><div style="display:inline!important"><b><font face="arial, sans-serif"><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><br /></font></b></span></font></b></div></font></b></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><div style="display:inline!important"><b><font face="arial, sans-serif"><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><b><font face="arial, sans-serif"><hr /></font></b></span></font></b></div></font></b></span></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><b><font face="arial, sans-serif">Status</font></b></div><div><font face="arial, sans-serif"><span style="font-weight:normal">Being implemented behind the --enable-experimental-extension-apis flag so we can collect developer feedback. Should be landing in the tree relatively soon.</span></font></div><div><b><font face="arial, sans-serif"><br /></font></b></div>Overview</font></b><div><font face="arial, sans-serif">Provide a way for extensions to add items to the context (aka "right click") menu for web pages. </font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">Use cases</font></b></div><div><font face="arial, sans-serif">Many features that extensions want to expose are only applicable to certain kinds of content. Some examples include saving selected text or link urls to a extension-local or web based notepad, removing particular images from a page, filling in form fields, and looking up words in an online dictionary.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">Could this API be part of the web platform?</font></b></div><div><font face="arial, sans-serif">Probably not, since many actions people would like to add are logically "browser-level" functionality.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">Do you expect this API to be fairly stable?</font></b></div><div><font face="arial, sans-serif">Yes, once we get some experience with an experimental version.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">What UI does this API expose?</font></b></div><div><font face="arial, sans-serif">New menu items &amp; submenus in context menus.</font></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><b><span style="font-weight:normal"><b><font face="arial, sans-serif">How could this API be abused?</font></b></span></b></div><div><font face="arial, sans-serif">Someone could create menu items with innocuous-sounding or misleading names (or even duplicates of built-in menu items) to trick users to click on them.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">How would you implement your desired features if this API didn't exist?</font></b></div><div><font face="arial, sans-serif">You could (and perhaps some extensions do?) inject script into all pages to intercept onmousedown and create your own custom html menu implementation. But that is a terrible user experience since it prevents the browser-native menu from appearing.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">Draft API spec</font></b></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><font face="arial, sans-serif">Initially these functions will only be callable from an extension's background page. This will likely not be sufficient, since a frequent use case for context menus is to operate on the specific link/image/etc. that the menu was activated on. See the "Future Improvements" section below for ideas about this.</font></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><b><font face="arial, sans-serif"><font color="#FF0000">Note</font>:<span style="font-weight:normal"> because this will be initially available as an experiment, the API methods will at first be chrome.experimental.contextMenu.methodname</span></font></b></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><b><font face="arial, sans-serif">chrome.contextMenu.create</font></b><font face="arial, sans-serif">(object properties, function onCreatedCallback);</font></div><div><font face="arial, sans-serif"><br /></font></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="arial, sans-serif">Creates a new context menu item. The onCreatedCallback function should have a signature like function(id) {}, and will be passed the integer id of the newly created menu item.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">The properties parameter can contain:</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">title </font></b><font face="arial, sans-serif">(optional string) - Text for this menu item. This is required for all types except 'SEPARATOR'. The special string %s in a title will be replaced with the currently selected text, if any.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">type </font></b><font face="arial, sans-serif">(optional string) - One of the strings 'NORMAL', 'CHECKBOX', 'RADIO', or 'SEPARATOR'. Defaults to 'NORMAL' if not specified.</font></div><div><font face="arial, sans-serif">* <b>checked </b>(optional boolean) - For items of type CHECKBOX or RADIO, should this be selected (RADIO) or checked (CHECKBOX)? Only one RADIO item can be selected at a time in a given group of RADIO items, with the last one to have checked == true winning.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">contexts </font></b><font face="arial, sans-serif">(string) - Which contexts should this menu item appear for? An array of one or more of the following strings: </font></div></blockquote><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="arial, sans-serif">'ALL', 'PAGE', 'SELECTION', 'LINK', 'EDITABLE', 'IMAGE', 'VIDEO', 'AUDIO'. </font></div></blockquote></blockquote></blockquote><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><span style="font-family:arial,sans-serif">Defaults to PAGE, which means "none of the rest" are selected (no link, no image, etc.). If 'ALL' is in the array, the item will appear in all contexts regardless of the rest of the items in the array.</span></blockquote></blockquote><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">enabledContexts </font></b><font face="arial, sans-serif">(string) - An array of strings similar to the contexts property. This serves to limit the contexts where this item will be enabled (ie not greyed out). If omitted, it defaults to the same set as the contexts property.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">parentId </font></b><font face="arial, sans-serif">(integer) - If this should be a child item of another item, this is the id</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">onclick </font></b><font face="arial, sans-serif">(function(object info, Tab tab)) - A function that will be called when this menu item is clicked on. The info parameter is an object containing the following properties:</font></div></blockquote><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">menuItemId </font></b><font face="arial, sans-serif">(integer) - The id of the menu item that was clicked.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">parentMenuItemId </font></b><font face="arial, sans-serif">(optional integer) - The parent id, if any, for the item clicked.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">mediaType </font></b><font face="arial, sans-serif">(optional string) - One of 'IMAGE', 'AUDIO', or 'VIDEO' if the context item was brought up on one of these types of elements.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">linkUrl </font></b><font face="arial, sans-serif">(optional string) - If the element is a link, the url it points to.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">srcUrl </font></b><font face="arial, sans-serif">(optional string) - Will be present for elements with a 'src' url.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">pageUrl </font></b><font face="arial, sans-serif">(optional string) - The url of the page where the context menu was clicked.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">frameUrl </font></b><font face="arial, sans-serif">(optional string) - The url of the frame of the element where the context menu was clicked.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">selectionText </font></b><font face="arial, sans-serif">(optional string) - The text for the context selection, if any.</font></div><div><font face="arial, sans-serif">* </font><b><font face="arial, sans-serif">editable </font></b><font face="arial, sans-serif">(boolean) - A flag indicating whether the element is editable (text input, textarea, etc.)</font></div><div><font face="arial, sans-serif"><br /></font></div></blockquote></blockquote><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><font face="arial, sans-serif">The tab parameter is the tab where the click happened, of the same form as that returned by chrome.tabs.get.<br /><br /></font></blockquote></blockquote><div><font face="arial, sans-serif"><br /></font></div><div><b><font face="arial, sans-serif">chrome.contextMenu.remove</font></b><font face="arial, sans-serif">(id);</font></div><div><font face="arial, sans-serif"><br /></font></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div><font face="arial, sans-serif">Removes an extension menu item with the given id.</font></div><div><font face="arial, sans-serif"><br /></font></div></blockquote><div><b><font face="arial, sans-serif"><br /></font></b></div><div><font face="arial, sans-serif"><b><br /></b></font></div><div></div><div><b><font face="arial, sans-serif">Examples</font></b></div><div><b><font face="arial, sans-serif"><br /></font></b></div><div><font face="arial, sans-serif">​<u>Define the currently selected word(s)</u></font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">​The following code would live in your background page, and you would need to have "tabs" specified in the permissions section of your manifest.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="Verdana, sans-serif"><div><font face="'courier new', monospace">​function getDefinition(info, tab) {</font></div><div><font face="'courier new', monospace"> if (!info.selectionText || info.selectionText.length == 0) {</font></div><div><font face="'courier new', monospace">   return;</font></div><div><font face="'courier new', monospace"> }</font></div><div><font face="'courier new', monospace"> var maxLength = 1024;</font></div><div><font face="'courier new', monospace"> var searchText = (info.selectionText.length &lt;= maxLength) ?</font></div><div><font face="'courier new', monospace">                  info.selectionText : info.selectionText.substr(0, maxLength);</font></div><div><font face="'courier new', monospace"> var url = "http://www.google.com/search?q=define:" + escape(searchText);</font></div><div><font face="'courier new', monospace"> chrome.tabs.create({"url": url});</font></div><div><font face="'courier new', monospace">}</font></div><div><font face="'courier new', monospace"><br /></font></div><div><font face="'courier new', monospace">chrome.contextMenu.create({"title": "Define '%s'", "onclick": getDefinition,</font></div><div><font face="'courier new', monospace">                          "contexts":["SELECTION"]});</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">​<u>Remove an image from a page</u></font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">The following code would live in your background page, and you would need to have an entry in the permissions section of your manifest which allowed you to run chrome.tabs.executeScript on the page where the image had its context menu activated. This example highlights one of the limitations of the initial proposal, which is that you don't have any way to determine the actual unique node that was clicked on, so it removes any instances of the image from the page.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif"><div><font face="'courier new', monospace">chrome.contextMenu.create({"title": "Remove This Image", "contexts": ["IMAGE"],</font></div><div><font face="'courier new', monospace">                           "onclick": function(info, tab) {</font></div><div><font face="'courier new', monospace">  var frameUrl = info.frameUrl ? info.frameUrl : "";</font></div><div><font face="'courier new', monospace">  var code = </font></div><div><font face="'courier new', monospace">      "var imgs = document.getElementsByTagName('img');" +</font></div><div><font face="'courier new', monospace">      "var srcUrl = unescape('" + escape(info.srcUrl) + "');" +</font></div><div><font face="'courier new', monospace">      "for (var i in imgs) {" + </font></div><div><font face="'courier new', monospace">      "  var img = imgs[i];" +</font></div><div><font face="'courier new', monospace">      "  if (img.src == srcUrl) {" +</font></div><div><font face="'courier new', monospace">      "    img.parentNode.removeChild(img);" +</font></div><div><font face="'courier new', monospace">      "  }" +</font></div><div><font face="'courier new', monospace">      "}";</font></div><div><font face="'courier new', monospace">  chrome.tabs.executeScript(tab.id, {"allFrames": true, "code": code});</font></div><div><font face="'courier new', monospace">}});</font></div><div><br /></div></font></div><div><font face="arial, sans-serif"><b><br /></b></font></div><div><font face="arial, sans-serif"><b><span style="font-family:Arial,Verdana,sans-serif;font-weight:normal"><div><b><font face="arial, sans-serif">UI Design</font></b></div><div><font face="arial, sans-serif">-Extension items appear towards the bottom of the context menu, above "Inspect element", sorted by extension name.</font></div><div><font face="arial, sans-serif">-We will show at most one top-level menu item per extension. If an extension adds more than 1 item, we automatically push the items into a submenu, with the extension name as the top-level item.</font></div><div><font face="arial, sans-serif">-The extension's icon will appear to the left of the top-level item to help the user understand which extension added what items, and help to mitigate the spoofing concerns raised above.</font></div><div><font face="arial, sans-serif"><br /></font></div><div></div></span></b></font></div><div><font face="arial, sans-serif"><b><div style="display:block;text-align:left"><a href="context-menu-api/context_menu_api_4.png%3Fattredirects=0" imageanchor="1"><img border="0" height="200" src="../../../../../_/rsrc/1324342231865/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api/context_menu_api_4.png%3Fheight=200&amp;width=151" width="151" /></a></div><br /></b></font></div><div><font face="arial, sans-serif"><b><br /></b></font></div><div><font face="arial, sans-serif"><b>Future Improvements</b></font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">- Provide a mechanism for getting a handle to the precise node in the DOM where the menu was activated. This could mean one of the following ideas:</font></div><div><ul><li><font face="arial, sans-serif">Allow registration of context menus from content scripts, with a callback function that receives a handle to the node.</font></li><li><font face="arial, sans-serif">Pass the id of the node in the callback to the background page, and if the node didn't have an id we synthesize one.</font></li><li><font face="arial, sans-serif">Provide something like chrome.tabs.executeScript, where you can pass a file or string of code to execute but also specify a function that will be called with the node</font></li></ul><font face="arial, sans-serif">- Add an update(int id, object properties) method so you can change your menu items in place.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">- Add a removeAll() method so you don't have to keep track of id's if you don't want to.</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">-Add a way to limit your menu items to specific tabs or frame urls (by a given match pattern, or perhaps automatically limit to only sites you have content script permissions for)</font></div><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif">-Some people have asked for a onBeforeShow() event to fire before the menu items are displayed, but this may be infeasible given chrome's multiprocess architecture and desire to keep the UI very responsive.</font></div></font></div><div><font face="Verdana, sans-serif"><div><font face="arial, sans-serif"><br /></font></div><div><font face="arial, sans-serif"><br /></font></div></font></div><div><span style="font-family:Verdana,sans-serif"><b><br /></b></span></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/context-menu-api">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9FYdIEgpWjnznBdaUkc2bFEQYU5aIO7cvwx_1muBuV5JfK695QXIKMWqIhR10wW-HqWrhwL3S0Z8hnwWmsa1zaDdBL7GHi6J4v62Yzhk0CNN2CnoO/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
