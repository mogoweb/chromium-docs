<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/extensions","deleted":false,"title":"Extensions","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes","deleted":false,"title":"Proposed \u0026 Proposing New Changes","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development","deleted":false,"title":"API Proposals (New APIs Start Here)","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/desktop-notification-api","deleted":false,"title":"Desktop Notification API","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/desktop-notification-api\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/extensions/proposed-changes/apis-under-development","parentWuid":"wuid:gx:4a1283b73b239cf","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Desktop Notification API","locale":"en","wuid":"wuid:gx:2bbcdee1b17db9e0","revision":13,"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/desktop-notification-api","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"desktop-notification-api","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/config/pagetemplates/extension-api-proposal-template","title":"API Proposal Template"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Desktop Notification API - The Chromium Projects" />
<meta itemprop="name" content="Desktop Notification API - The Chromium Projects" />
<meta property="og:title" content="Desktop Notification API - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Desktop Notification API - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../../../design-documents.1.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../../../extensions.1.html" dir="ltr">Extensions</A>‎ &gt; ‎<A href="../../proposed-changes.1.html" dir="ltr">Proposed &amp; Proposing New Changes</A>‎ &gt; ‎<A href="../apis-under-development.1.html" dir="ltr">API Proposals (New APIs Start Here)</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Desktop Notification API</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div style="margin-top:0px;margin-bottom:0px">
<div style="margin-top:0px;margin-bottom:0px"><span style="font-family:Arial;font-weight:bold;white-space:pre-wrap;background-color:transparent;font-size:10pt">Proposal Date</span></div>
<div style="margin-top:0px;margin-bottom:0px">
<div style="background-color:transparent"><br />
<font face="Arial"><span style="white-space:pre-wrap">January 2013.</span></font><br />
<br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Who is the primary contact for this API?</span></div>
<div style="background-color:transparent"><br />
</div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">Justin DeWitt (dewittj)</span></font></div>
<div style="background-color:transparent"><br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Who will be responsible for this API? (Team please, not an individual)</span><p dir="ltr" style="font-weight:bold;font-family:Verdana,sans-serif;margin-right:12pt;margin-top:0pt;margin-bottom:0pt"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">
</span></p>
<p dir="ltr" style="margin-right:12pt;margin-top:0pt;margin-bottom:0pt"><font face="Arial"><span style="white-space:pre-wrap">The Extensions team will own the API, but the Notifications Frontend team will own the implementation (i.e., the actual desktop notification code) behind it.</span></font></p>
<br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Overview</span><span style="font-weight:normal;font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br />
</span></div>
<div style="background-color:transparent"><span style="font-weight:normal;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">This API provides rich desktop notifications to Chrome apps and extensions.</span></div><div style="background-color:transparent"><span style="font-weight:normal;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">
</span></div>
<div style="background-color:transparent"><span style="font-weight:normal;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Today, Chrome implements an <a href="http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification">outdated version of the W3C spec for HTML5 desktop notifications</a>. The functionality proposed here is generally similar, but significantly more powerful. We have yet addressed the question whether this API will replace, enhance, or remain entirely independent of any Chrome implementation of the W3C spec.</span></div>
<div style="background-color:transparent"><br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Use cases</span><span style="font-weight:normal;font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br />
</span></div>
<div style="background-color:transparent"><span style="vertical-align:baseline"><font face="Arial"><span style="white-space:pre-wrap">Desktop notifications provide a convenient, non-intrusive method of notifying users of events, particularly when those events originate from a background web app. Today, a web app has unsatisfactory options to notify a user of important information:</span></font></span></div>
<div style="background-color:transparent">
<ol><li><font face="Arial"><span style="white-space:pre-wrap">Raise a JavaScript alert, which might or might not bring a backgrounded window to the foreground. In the best case, where the user does see the alert, the result is text-only and modal.</span></font></li>
<li><font face="Arial"><span style="white-space:pre-wrap">Change the window title and hope that enough of the window (typically the tab) is prominent. An example is Gmail's "Inbox (1)" title, originally designed to exploit the real estate available on a background tab in a tabbed browser.</span></font></li>
<li><font face="Arial"><span style="white-space:pre-wrap">Try to play a sound.</span></font></li>
<li><font face="Arial"><span style="white-space:pre-wrap">Develop and support a native notifier application that sits in the taskbar.</span></font></li>
</ol>
</div>
<div style="background-color:transparent"><span style="white-space:pre-wrap;font-family:Arial;background-color:transparent;font-size:10pt">An enumeration of specific use cases isn't needed. Today's web apps are likely to be one of many of a user's open browser tabs, only one of which is active at a time, any of which might have legitimate reasons to present urgent information to the user (new mail, new instant message, completion or failure of long-running process, scheduled reminders).</span></div>
<div style="background-color:transparent"><br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Do you know anyone else, internal or external, that is also interested in this API?</span></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">
</span></font></div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">Yes.</span></font><br />
<br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Could this API be part of the web platform?</span></div><div style="background-color:transparent"><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">
</span></div>
<div style="background-color:transparent"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Yes.</span></div>
<div style="background-color:transparent"><br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Do you expect this API to be fairly stable?  How might it be extended or changed in the future?</span></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">
</span></font></div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">We expect many more notification layouts in the near future, as well as more structured data supporting those layouts. Our hope is to design a flexible API that will accommodate those changes without breaking the API or substantially altering its shape.</span></font></div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i>
</i></span></font></div>
<div style="background-color:transparent"><b><font><span style="font-size:small;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">If multiple extensions used this API at the same time, could they conflict with each other? If so, how do you propose to mitigate this problem?</span></font></b><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><br />
Our "message center," which is the container that will display notifications, will intelligently manage the stream of notifications produced by API consumers. It will also give control to users in the form of per-app mute, a global on/off switch, and quiet hours. As no app or extension should be able to control these settings, they won't be part of the API.<br />
<br />
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">List every UI surface belonging to or potentially affected by your API:</span><br /><span style="font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap">
</span></div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">We'll separately mail out our message-center mocks. For purposes of this document, a notification area or taskbar item in the host OS will expand to display a rectangular message center. We don't expect the UI of Chrome proper to change.</span></font><br />
<br />
<b><font><span style="font-size:small;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Actions taken with extension APIs should be obviously attributable to an extension. Will users be able to tell when this new API is being used? How?</span></font></b></div>
<div style="background-color:transparent"><br />
</div>
<div style="background-color:transparent"><font face="Arial" size="2"><span style="white-space:pre-wrap">Users can currently attribute a notification to a particular extension by right-clicking on it.  This names the extension and gives the user the ability to disable notifications from the extension.</span></font></div>
<div style="background-color:transparent"><br />
</div>
<div style="background-color:transparent"><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">How could this API be abused?</span><br />
<ul><li>Idle detection. Raise a notification and see whether the user dismisses it.</li>
<li>Create a large number of notifications in a short period of time.</li>
<li>Create a large number of notifications over a long period of time.</li>
<li>Raise a notification scaring the user ("Warning, system compromised, unplug from wall immediately").</li>
<li>Raise a notification embarrassing the user during a presentation ("Test results received from Fungus-B-Gone Clinic").  We have implemented a mode "Quiet Mode" that prevents new notifications from being displayed on screen to mitigate this.</li>
<li>Raise a notification demanding credentials, then steal them. Because the notification appears to originate outside Chrome, it might carry more clout than a typical evil website's phishing plea.</li>
<li>Impersonate another app or extension.</li></ul>
<span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Imagine you’re Dr. Evil Extension Writer, list the three worst evil deeds you could commit with your API (if you’ve got good ones, feel free to add more):</span></div>
<div style="background-color:transparent">
<ol><li>Pretend to be Gmail. Use the Gmail icon. Put up a notification that sends the user to a malware site that steals Gmail credentials.</li>
<li>Send just enough inane notifications that the user gives up and disables notifications entirely. The user is known to be an oncall ops person at a targeted company. Destroy the company's servers and use the delay caused by the lost notifications to escape the country.</li>
<li>Pretend to be an instant-message service. Send "Becky: what's our bank account #? I don't have it handy. [Reply]" All you need is one husband in a hurry whose wife is named Becky for this attack to be profitable. (This is really the same as #1; I'm out of ideas.)</li>
</ol>
<font size="2"><span style="font-family:Arial;font-weight:bold;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">What security UI or other mitigations do you propose to limit evilness made possible by this new API?</span><br />
<br />
<font face="Arial"><span style="white-space:pre-wrap">For the impersonation case, see answer to the "obviously attributable" question. For local DOSing, see answer to the conflicting extensions question.</span></font><br />
</font><b><br />
<span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Alright Doctor, one last challenge:  </span><br />
<span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Could a consumer of your API cause any permanent change to the user’s system using your API that would not be reversed when that consumer is removed from the system?</span></b><font face="Arial"><span style="white-space:pre-wrap"><br />
</span></font></div>
<div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap">No.</span></font><br /><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">
</span></div>
<div style="background-color:transparent"><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">How would you implement your desired features if this API didn't exist?</span><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br />
</span></div>
<div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;vertical-align:baseline;white-space:pre-wrap">We'd use the existing desktop notification API, which unfortunately is reducing its feature set (no HTML layout option). Or we'd advise applications to use something like Growl, which wouldn't work on ChromeOS.</span><span style="font-family:Arial;font-weight:normal;vertical-align:baseline;white-space:pre-wrap"> </span><br />
<br />
<div style="background-color:transparent"><b><font face="arial, sans-serif">Draft Manifest Changes</font></b></div>
<div style="background-color:transparent"><b><font face="arial, sans-serif"><br />
</font></b></div>
<div style="background-color:transparent"><font face="arial, sans-serif">A "notifications" permission, which is merged with the <a href="http://developer.chrome.com/extensions/declare_permissions.html">existing <b>notifications</b> permission</a> that enables HTML5 desktop notifications without a runtime permissions check.</font></div>
<div style="background-color:transparent"><br />
</div>
<b style="font-family:Verdana,sans-serif"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Draft API spec</span><br />
<span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br />Note that this API approximately matches what's in the <a href="https://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/common/extensions/api/experimental_notification.idl&amp;exact_package=chromium&amp;l=5" target="_blank">Chromium repository</a>. The source code is authoritative.<br />
</span></b></div>
<div style="background-color:transparent"></div>
<div class="sites-codeblock sites-codesnippet-block"><pre>namespace notifications {</pre><pre>  enum TemplateType {
    // icon, title, message
    simple,

    // icon, title, message, expandedMessage, up to two buttons
    basic,

    // icon, title, message, expandedMessage, image, up to two buttons
    image,

    // icon, title, message, items, up to two buttons
    list
  };</pre><pre>  dictionary NotificationItem {
    // Title of one item of a list notification.
    DOMString title;

    // Additional details about this item.
    DOMString message;
  };

  dictionary NotificationButton {
    DOMString title;
    DOMString? iconUrl;
  };

  dictionary NotificationOptions {
    // Which type of notification to display.
    TemplateType type;

    // Sender's avatar, app icon, or a thumbnail for image notifications.
    DOMString iconUrl;

    // Title of the notification (e.g. sender name for email).
    DOMString title;

    // Main notification content.
    DOMString message;

    // Priority ranges from -2 to 2. -2 is lowest priority. 2 is highest. Zero
    // is default.
    long? priority;

    // A timestamp associated with the notification, in milliseconds past the
<span style="line-height:1;font-size:10pt">    // epoch (e.g. Date.now() + n).  Currently unimplemented, but planned for
    // a forthcoming release.
    double? eventTime;</span></pre><pre>    // Text and icons of the notification action button.
    NotificationButton[]? buttons;

    // Image thumbnail for image-type notifications
    DOMString? imageUrl;

    // Items for multi-item notifications.
    NotificationItem[]? items;
  };

  callback CreateCallback = void (DOMString notificationId);

  callback UpdateCallback = void (boolean wasUpdated);

  callback DeleteCallback = void (boolean wasDeleted);

  interface Functions {
    // Creates and displays a notification having the contents in |options|,
    // identified by the id |notificationId|. If |notificationId| is empty,
    // |create| generates an id. If |notificationId| matches an existing
    // notification, |create| first deletes that notification before proceeding
    // with the create operation. |callback| returns the notification id (either
    // supplied or generated) that represents the created notification.
    static void create(DOMString notificationId,
                       NotificationOptions options,
                       CreateCallback callback);

    // Updates an existing notification having the id |notificationId| and the
    // options |options|. |callback| indicates whether a matching notification
    // existed.
    static void update(DOMString notificationId,
                       NotificationOptions options,
                       UpdateCallback callback);

    // Given a |notificationId| returned by the |create| method, clears the
    // corresponding notification. |callback| indicates whether a matching
    // notification existed.
    static void clear(DOMString notificationId, DeleteCallback callback);
  };

  interface Events {
    // The notification closed, either by the system or by user action.
    static void onClosed(DOMString notificationId, boolean byUser);

    // The user clicked in a non-button area of the notification.
    static void onClicked(DOMString notificationId);

    // The user pressed a button in the notification.
    static void onButtonClicked(DOMString notificationId, long buttonIndex);
  };
};  </pre>
</div>
<span style="font-family:Verdana,sans-serif"><br /><br /></span></div><div style="margin-top:0px;margin-bottom:0px">
</div>
</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/desktop-notification-api">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9XtX81Vmhl9RyDRAzrP9x0_yOAykwecWQi4vJ1PITnDO6lmN4GjoNK_zeslpss_Up5soNyTe73WJSbjgw_Zv63S26zYpdUbS8UEaVtw6CMt0E3zAJ/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
