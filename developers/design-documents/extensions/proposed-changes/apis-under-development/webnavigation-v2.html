<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="../../../../../_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/extensions","deleted":false,"title":"Extensions","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes","deleted":false,"title":"Proposed \u0026 Proposing New Changes","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development","deleted":false,"title":"API Proposals (New APIs Start Here)","dir":"ltr"},{"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/webnavigation-v2","deleted":false,"title":"webNavigation v2","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/webnavigation-v2\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/extensions/proposed-changes/apis-under-development","parentWuid":"wuid:gx:4a1283b73b239cf","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"webNavigation v2","locale":"en","wuid":"wuid:gx:285620f655fe233","revision":3,"path":"/developers/design-documents/extensions/proposed-changes/apis-under-development/webnavigation-v2","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"webnavigation-v2","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/config/pagetemplates/extension-api-proposal-template","title":"API Proposal Template"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="webNavigation v2 - The Chromium Projects" />
<meta itemprop="name" content="webNavigation v2 - The Chromium Projects" />
<meta property="og:title" content="webNavigation v2 - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/overlay.css%3Fcb=beigeandblueundefineda100%2525%2525150goog-ws-leftthemedefaultstandard.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>webNavigation v2 - The Chromium Projects</title>
<meta itemprop="image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<meta property="og:image" content="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="../../../../../index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="../../../../../_/rsrc/1438879449147/config/customLogo.gif%3Frevision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="../../../../../index.html" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-projects.html" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../Home.1.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../chromium-os.1.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../../../system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../../../developers.1.html" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../../../design-documents.1.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../../../extensions.1.html" dir="ltr">Extensions</A>‎ &gt; ‎<A href="../../proposed-changes.1.html" dir="ltr">Proposed &amp; Proposing New Changes</A>‎ &gt; ‎<A href="../apis-under-development.1.html" dir="ltr">API Proposals (New APIs Start Here)</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">webNavigation v2</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div style="margin-top:0px;margin-bottom:0px"><div style="margin-top:0px;margin-bottom:0px"><b style="background-color:transparent"><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Proposal Date</span></b></div><div style="margin-top:0px;margin-bottom:0px"><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i>2012-06-14</i></span></font></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Who is the primary contact for this API?</span><br /><font face="Arial"><span style="white-space:pre-wrap"><i>jochen@</i></span></font></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Who will be responsible for this API? (Team please, not an individual)</span><br /><p dir="ltr" style="margin-right:12pt;margin-top:0pt;margin-bottom:0pt"><font face="Arial"><span style="white-space:pre-wrap"><i>jochen@, mpcomplete@</i></span></font></p><p dir="ltr" style="margin-right:12pt;margin-top:0pt;margin-bottom:0pt"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font></p><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Overview</span><br /><font face="Arial"><span style="white-space:pre-wrap"><i>Now that the webNavigation API is released for a while, I learned about certain short-comings I'd like to fix. This proposal captures the required additions / changes to the current webNavigation API. </i></span></font></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font></div><div style="background-color:transparent"><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Use cases</span><br /><ul><li><span style="font-family:Arial;font-style:italic;white-space:pre-wrap;background-color:transparent">Currently, if a page is pre-rendered, and you navigate to that page, the navigation is aborted, and the page magically is there (without further visible webNavigation events). The next version of the webNavigation API should indicate when a prerendered page is swapped in.</span></li><li><span style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i>If a navigation crosses a process boundary, the tuple (tab ID, frame ID) is no longer unique, but there might be two frames with the same ID navigating for the same tab, but in two different processes. Also, the frame ID of the main frame might change during a provisional load. It seems that we can't hide these details of our process model (without considerable effort). The next version should allow for updating frame IDs during provisional loads, and have a truly unique identifier for frames. </i></span></font></span></li></ul><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Do you know anyone else, internal or external, that is also interested in this API?</span><span style="font-weight:normal;font-family:Arial;vertical-align:baseline;white-space:pre-wrap"> </span><br /><font face="Arial"><span style="white-space:pre-wrap"><i>There were bug reports filed about this: <a href="http://crbug.com/116643">http://crbug.com/116643</a> <a href="http://crbug.com/117043">http://crbug.com/117043</a> </i></span></font></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Could this API be part of the web platform?</span><br /><font face="Arial"><span style="white-space:pre-wrap"><i>No, it's just an extension of an existing API</i></span></font></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Do you expect this API to be fairly stable?  How might it be extended or changed in the future?</span><br /><span style="font-weight:normal;font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap">When we add new fancy navigation features (e.g. similar to prerendering), the API might need to be extended again.</span></div><div style="background-color:transparent"><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font></div><div style="background-color:transparent"><b><font><span style="font-size:small;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">If multiple extensions used this API at the same time, could they conflict with each others? If so, how do you propose to mitigate this problem?</span></font></b><font face="Arial"><span style="white-space:pre-wrap"><i><br /></i></span></font><i>No</i><br /><br /><span style="font-weight:bold;font-family:Arial;vertical-align:baseline;white-space:pre-wrap">List every UI surface belonging to or potentially affected by your API:</span><br /><span style="font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap">None</span><br /><br /><b><font><span style="font-size:small;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Actions taken with extension APIs should be obviously attributable to an extension. Will users be able to tell when this new API is being used? How?</span></font></b></div><div style="background-color:transparent"><i>The API is only observing events, there should be no observable impact.</i></div><div style="background-color:transparent"><b><br /><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">How could this API be abused?</span><br /><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">The API can be used to monitor each and every navigation, but that's already possible with v1.</span><br /><br /><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Imagine you’re Dr. Evil Extension Writer, list the three worst evil deeds you could commit with your API (if you’ve got good ones, feel free to add more):</span><br /><span style="font-family:Arial;font-weight:normal;vertical-align:baseline;white-space:pre-wrap">1) observe each and every navigation, send it to some 3rd-party server</span><br /><span style="font-family:Arial;font-weight:normal;vertical-align:baseline;white-space:pre-wrap">2) ...</span><br /><span style="font-family:Arial;font-weight:normal;vertical-align:baseline;white-space:pre-wrap">3) profit</span><br /></b><b style="font-family:Verdana,sans-serif"><br /></b><b style="font-family:Times"><font size="2"><span style="font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">What security UI or other mitigations do you propose to limit evilness made possible by this new API?</span><i><br /><span style="font-family:Arial;background-color:transparent;font-weight:normal;vertical-align:baseline;white-space:pre-wrap">The webNavigation API already triggers a warning at install time.</span></i></font></b><b><br /><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Alright Doctor, one last challenge:  </span><br /><span style="font-family:Arial;vertical-align:baseline;white-space:pre-wrap">Could a consumer of your API cause any permanent change to the user’s system using your API that would not be reversed when that consumer is removed from the system?</span><br /><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">No</span></b><b><font><font face="Arial" size="2"><span style="white-space:pre-wrap"><br /></span></font></font></b><br /><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">How would you implement your desired features if this API didn't exist?</span><br /><font face="Arial"><span style="white-space:pre-wrap"><i>You could guess that a page is being prerendered, or try to work around duplicate frame IDs.</i></span></font><br /><br /><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Draft API spec</span><br /><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">All existing events and methods that take or return a frame ID will in addition take a process ID. A frame is then uniquely identified by the tripple (tab id, process id, frame id). </span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">The onCommitted signal's documentation is updated to state that the frame ID and process ID might have changed since the onBeforeNavigate signal.</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">Furthermore, this new event is introduced. :</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><b>onReplacedTab</b></span></div><div style="background-color:transparent"><span style="font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><font face="courier new, monospace">chrome.webNavigation.onReplacedTab.addListener(function (object details) { ... });</font></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">Fired when a navigation is aborted, and instead a prerendered tab is swapped in.</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">Listener parameters</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">details (object)</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">  sourceTabId (integer)</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">      The ID of the tab being replaced</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">  tabId (integer)</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">      The ID of the tab replacing the sourceTabId</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap"><br /></span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">  timeStamp (number)</span></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">      The time when the browser was about to replace the tab in milliseconds since the epoch.</span></div><div style="background-color:transparent"><br /></div><div style="background-color:transparent"><span style="font-family:Arial;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Open questions</span><br /><span style="font-family:Arial;font-weight:normal;font-style:italic;vertical-align:baseline;white-space:pre-wrap">The proposed changes are "breaking changes" as an extension using v1 of the API will still experience the above referenced bugs. Is that ok?</span></div></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/extensions/proposed-changes/apis-under-development/webnavigation-v2">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXukca4jaDOG9SuQz_G8t7HlHBO6E_Rd3NAY4Hqau4w9qoowYkWr5_d9OM9qHEocmVkfnbOTUNGRCwwmWDtlq7QKjpw4dtauy6wTp02ne2RCKB28hOMVBbVFJE898udVXHcj10Hf/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
