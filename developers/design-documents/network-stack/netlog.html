<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="http://www.chromium.org/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/network-stack","deleted":false,"title":"Network Stack","dir":"ltr"},{"path":"/developers/design-documents/network-stack/netlog","deleted":false,"title":"NetLog: Chrome\u2019s network logging system","dir":"ltr"}];
  var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttp://sites.google.com/a/chromium.org/dev/developers/design-documents/network-stack/netlog\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"http://csi.gstatic.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["http://www.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["http://www.gstatic.com/sites/p/56e332/system/js/codemirror.js","http://www.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","http://www.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","http://www.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","http://www.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents/network-stack","parentWuid":"wuid:gx:1e5bf38b977efb4d","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"NetLog: Chrome\u2019s network logging system","locale":"en","wuid":"wuid:gx:167a0e69e435a742","revision":8,"path":"/developers/design-documents/network-stack/netlog","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"netlog","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="NetLog: Chrome’s network logging system - The Chromium Projects" />
<meta itemprop="name" content="NetLog: Chrome’s network logging system - The Chromium Projects" />
<meta property="og:title" content="NetLog: Chrome’s network logging system - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="http://www.chromium.org/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>NetLog: Chrome’s network logging system - The Chromium Projects</title>
<meta itemprop="image" content="http://www.chromium.org/_/rsrc/1339521674917/developers/design-documents/network-stack/netlog/NetLog1.png" />
<meta property="og:image" content="http://www.chromium.org/_/rsrc/1339521674917/developers/design-documents/network-stack/netlog/NetLog1.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="http://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="http://www.chromium.org/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="http://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="http://www.chromium.org/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../Home.html" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../../chromium-os.html" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="../../../for-testers/bug-reporting-guidelines.html" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="../../discussion-groups.html" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:fe204a485666144" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="http://www.chromium.org/developers" dir="ltr">For Developers</A>‎ &gt; ‎<A href="../../design-documents.html" dir="ltr">Design Documents</A>‎ &gt; ‎<A href="../network-stack.html" dir="ltr">Network Stack</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">NetLog: Chrome’s network logging system</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><b style="font-size:medium;font-weight:normal"><p dir="ltr" style="font-family:Times New Roman;text-align:right;margin-top:0pt;margin-bottom:0pt"><span style="font-size:16px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Eric Roman</span></p><p dir="ltr" style="font-family:Times New Roman;text-align:right;margin-top:0pt;margin-bottom:0pt"><span style="font-size:16px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Matt Menke</span></p><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Overview</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">NetLog is an event logging mechanism for Chrome’s network stack to help debug problems and analyze performance. It enables a “capture → dump → analyze”  style of workflow similar to tools like tcpdump.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Here is a typical use case:</span><br /><ol style="font-family:Times New Roman;margin-top:0pt;margin-bottom:0pt"><li style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">User enables network logging</span></li><li style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">User reproduces a problem</span></li><li style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">User uploads the log file to a bug report</span></li><li style="list-style-type:decimal;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Developer analyzes the log file to see what happened</span></li></ol><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Under the hood Chrome’s network stack has been instrumented to emit events at various interesting trace points. This event stream can be watched by observers to do interesting things with the data. Some of Chrome’s NetLog observers are:</span><br /><br /><ul style="font-family:Times New Roman;margin-top:0pt;margin-bottom:0pt"><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(net_log_logger.cc) Serializes the event stream to a file</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(net_internals_ui.cc) Forwards events to the JavaScript application chrome://net-internals. This app can visualize the data and also export it to a file</span></li></ul><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Goals of NetLog</span><br /><br /><ul style="font-family:Times New Roman;margin-top:0pt;margin-bottom:0pt"><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Net Logging is off by default</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Net Logging does not affect performance when off</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Net Logging support ships with official builds of Chrome</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Events are easily serialized/deserialized to disk</span></li></ul><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Non-Goals</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">NetLog is intended </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">solely </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">for logging.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Features needing reliable network information should never be built on top of NetLog. It may be tempting to add an observer of NetLog as a quick hack to glean some internal state (since you circumvent having to create a proper interface and plumb it deep into the network stack). But that is wrong, and it will break. Instead, you should add an interface to </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">NetworkDelegate</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, complete with regression tests and documentation.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Think of NetLog as a fancy way of writing:</span><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">  LOG(INFO) &lt;&lt; “Some network event; bla bla bla”</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">;</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">It would be silly if a feature broke simply because you moved around such a logging statement or changed its format slightly!</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Similarly, we want net logging to be easy to add/edit so developers can instrument problem areas as needed.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Terminology</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">There are a couple of terms Chrome engineers use when talking about this domain. They sound similar but have slightly different meanings!</span><br /><br /><ul style="margin-top:0pt;margin-bottom:0pt"><li style="font-family:Arial;list-style-type:disc;font-size:15px;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">“</span><span style="background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">netlog</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">”: The C++ mechanism that exposes the network event stream (in particular, </span><span style="font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">).</span></li><li style="font-family:Arial;list-style-type:disc;font-size:15px;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">“</span><span style="background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">net internals</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">”: This refers specifically to the chrome://net-internals application. It is a visualizer for the network event stream. This is also called “</span><span style="background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">about net-internals</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">” verbally (in reference to the URL about:net-internals).</span></li><li style="list-style-type:disc;font-size:15px;background-color:transparent;vertical-align:baseline"><span style="font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">“</span><span style="font-family:Arial;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">netinternals dump</span><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><font face="Arial">”, or <i>"netlog dump"</i>: A file containing a serialized event stream, that can be loaded by chrome://net-internals. The usual way to create these dumps is using the export functionality on chrome://net-internals#export. However dumps can also be generated by launching Chrome with the command line flag </font><font face="courier new, monospace">--log-net-log=<i>FILENAME</i></font><font face="Arial">.</font></span></li></ul><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Structure of a NetLog event</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">On the C++ side of things, events are represented by a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog::Entry</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. This in-memory representation is intended to be easily serialized to JSON.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">We try not to serialize events to JSON until it is absolutely necessary (most of the time there are no consumers of the events so we don't have to). When we do need to serialize the events, this is the JSON format that we use:</span></b><div><div><div><b style="font-weight:normal"><font face="Arial"><span style="font-size:15px;white-space:pre-wrap"><br /></span></font><div dir="ltr" style="font-family:Times New Roman;font-size:medium"><table style="border:none;border-collapse:collapse"><colgroup><col width="97" /><col width="106" /><col width="421" /></colgroup><tbody><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Field</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Type</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">Description</span></td></tr><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">time</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">string</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The time in milliseconds when the event occurred.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This is a time tick count and not a unix timestamp. However it is easily convertible given the time tick offset (time ticks are independent of system clock adjustments, guaranteeing that our timestamps don't go backwards)</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Another oddity is that despite being a numeric quantity, we encode time as a string. This is to avoid precision loss due to Chrome’s JSON stringifier.</span></td></tr><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">type</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">number</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The ID of the event type. These are enumerated in </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/net/base/net_log_event_type_list.h?view=markup"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net_log_event_type_list.h</span></a></td></tr><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">source</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">object</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This field identifies which entity emitted the event. For instance this might identify a particular URLRequest.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The event stream is a flat sequence of events, which has intermixed starts and completions for all sorts of asynchronous events (potentially happening across multiple threads).</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The usefulness of </span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">source </span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">is to be able to group these events into logical blocks with a serial control flow.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The </span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">source</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> object itself is comprised of two sub-fields “id” and “type”. The “id” is unique across all types. The type field is included as a convenience so that processing the event stream can be done in a stateless manner.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The list of possible source types is enumerated in </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/net/base/net_log_source_type_list.h?view=markup"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net_log_source_type_list.h</span></a></td></tr><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">phase</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">number</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This enumeration can be one of BEGIN, END, NONE.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Let's say you wanted to log the duration of a URL request by logging the start and then the end:</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">One way to do that would be to define two event types: URL_REQUEST_BEGIN and URL_REQUEST_END. This certainly works, however it is inconvenient when doing automated analysis or hierarchical grouping, since it requires knowing which event pairs complement each other.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">To address this, we prefer to define a single event type, say URL_REQUEST, and emit the starting event with phase=BEGIN, and the terminating event with phase=END</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(phase=END events are assumed to terminate the most recent phase=BEGIN of the same type, within the same </span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">source</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.)</span></td></tr><tr style="height:0px"><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">params</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">object</span></td><td style="border:1px solid rgb(153,153,153);padding:7px"><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This is an optional field.</span><br /><br /><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">When provided, it represents event-specific parameters. For example, when starting a URL request, we smuggle the load flags, URL and priority of the request into the </span><span style="font-size:15px;font-family:Courier New;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">params</span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> structure. The visualizer on about:net-internals knows how to pretty print the parameters for certain event types. For everything else it just dumps the JSON in a readable fashion.</span></td></tr></tbody></table></div><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">How network events are emitted</span><br /><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is the interface for emitting NetLog events.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Code throughout src/net/* that needs to emit network events must be passed a pointer to a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> to send the events to.</span></b><div><b style="font-weight:normal"><font face="Arial"><span style="font-size:15px;white-space:pre-wrap"><br /></span></font></b></div><div><b style="font-weight:normal"><font face="Arial"><span style="font-size:15px;white-space:pre-wrap"><div style="display:block;text-align:left"><a href="http://www.chromium.org/developers/design-documents/network-stack/netlog/NetLog1.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.chromium.org/_/rsrc/1339521674917/developers/design-documents/network-stack/netlog/NetLog1.png" /></a></div></span></font><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Most commonly, this </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> dependency is passed via a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::BoundNetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> parameter rather than directly as a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. This is a wrapper to “bind” the same </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">source</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> parameter to each event output to the stream. You can think of it like creating a private event stream for a single entity. Read more about this in </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/net/base/net_log.h?view=markup" style="font-family:Times New Roman;font-size:medium"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net_log.h</span></a><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Ultimately though, </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is just a boring interface and doesn’t actually do anything.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">In the Chrome browser, the concrete implementation of </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net::NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> used is </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/net/chrome_net_log.h?view=markup" style="font-family:Times New Roman;font-size:medium"><span style="font-size:15px;font-family:Courier New;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ChromeNetLog</span></a><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. We configure things so that all network logging events for all browser profiles flow through a single instance of </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ChromeNetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ChromeNetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is responsible for forwarding this event stream on to other interested parties via an observer mechanism.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">As was alluded to earlier in the overview, about:net-internals is implemented as one such observer (which forwards the network events to a webapp).</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">How custom parameters are attached to events</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Custom parameters are specified by a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">base::Value*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> is used to represent a hierarchy of nodes, that maps directly into JSON; it has all the expected building blocks -- dictionaries, strings, numbers, arrays. See </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/base/values.h?view=markup" style="font-family:Times New Roman;font-size:medium"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">values.h</span></a><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> for more details.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">For the sake of efficiency, you do not directly create a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">base::Value*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> when emitting events. Rather, you pass in a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Callback </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">which knows how to build the </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, in case one is needed.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">This decoupling allows deferring the creation of </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Values</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> until it is really necessary. This is good since in the common case when about:net-internals is not open, we simply don’t need that data. Creating the custom </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">parameters is not free after-all, since it involves copying internal state into a new </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> hierarchy.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">You are </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">guaranteed </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">that the parameter callback will only be invoked synchronously </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">before </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">the return of the logging function. We use  a</span></b>
<b style="font-weight:normal"><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Callback</span></b><b style="font-weight:normal"><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> for convenience, since </span></b>
<b style="font-weight:normal"><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Bind</span></b><b style="font-weight:normal"><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> makes it easy to piece things together without needing to define helper structures!</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Here is an example of how to emit an event with custom parameters:</span><br /><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net_log_.BeginEvent(</span><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">    NetLog::TYPE_URL_REQUEST_START_JOB,</span><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">    base::Bind(&amp;NetLogURLRequestStartCallback,</span><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">               &amp;url(), &amp;method_, load_flags_, priority_));</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">By the time </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">BeginEvent </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">returns, </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">NetLogURLRequestStartCallback() </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">will have been invoked if and only if the </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value*</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> parameter was needed. That is why it is safe for the callback to take pointers to </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">url()</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> and </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">method_</span><span style="font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"><font face="Arial"> (pointers are preferred in this case to avoid making unnecessary copies).</font></span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Here is what the bound function might look like:</span><br /><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Value* NetLogURLRequestStartCallback(const GURL* url,<br />                                     const std::string* method,<br />                                     int load_flags,<br />                                     RequestPriority priority,<br />                                     NetLog::LogLevel) {<br />  DictionaryValue* dict = new DictionaryValue();<br />  dict-&gt;SetString("url", url-&gt;possibly_invalid_spec());<br />  dict-&gt;SetString("method", *method);<br />  dict-&gt;SetInteger("load_flags", load_flags);<br />  dict-&gt;SetInteger("priority", static_cast&lt;int&gt;(priority));<br />  return dict;<br />}</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">What does NetLog actually log?</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The logging is subject to change, but in general we try to log whatever is useful for debugging.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Admittedly that description isn’t very helpful.</span><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">… let me give some examples of what we currently log:</span><br /><ul style="font-family:Times New Roman;font-size:medium;margin-top:0pt;margin-bottom:0pt"><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Queueing delay to schedule DNS resolves to threads</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Stalls due to exceeding socket pool limits</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Attempts to do a TCP connect to an IP address</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Speculative DNS resolves</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Proxy resolution</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Cache hits for DNS resolves</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Reads/writes from disk cache</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Network change events</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Proxy configuration change events</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Stalls due to chrome extensions pausing requests</span></li><li style="list-style-type:disc;font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline"><span style="background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Errors</span></li></ul><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The sorts of events emitted are </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">application </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">specific. NetLog does not aim to replace lower level network tools like packet captures (i.e. tcpdump). Rather it focuses on application level logic and caches which cannot possibly be known at the lower layers. There is some overlap though, since NetLog can optionally capture bytes sent/received over sockets, as well as the decrypted bytes for secure channels.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;font-weight:bold;vertical-align:baseline;white-space:pre-wrap">chrome://net-internals (aka about:net-internals)</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">net-internals is visualizer for the NetLog event stream. It can be used both in real-time, and also to load up post-mortem NetLog dumps.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Most of the data displayed by net-internals comes from the NetLog event stream. When you load about:net-internals it installs an observer into </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">ChromeNetLog </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">(inside the browser process) which serializes network events to JSON and sends them over IPC to the renderer running about:net-internals application.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">about:net-internals is itself a JavaScript application, whose code lives under </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/resources/net_internals/" style="font-family:Times New Roman;font-size:medium"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">src/chrome/browser/resources/net_internals/</span></a><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Some of the other data displayed by net-internals comes by polling other state functions. For instance the “DNS cache” listed on about:net-internals is obtained by polling the browser for the full list, rather than by an event-based mechanism.</span><br /><br /><p dir="ltr" style="font-family:Times New Roman;font-size:medium"><span style="font-size:32px;font-family:Georgia;color:rgb(102,102,102);background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">History: the evolution of NetLog/NetInternals</span></p><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">version 1: LoadLog</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">In the beginning, there was </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. This was basically a small per-request log buffer. Each </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">URLRequest </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">had its own </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">member field, which was essentially a </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">std::vector</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> of events and their timings. These events got accumulated directly in the browser process. In other words, it was a form of always-on passive logging. </span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">My original use case for </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">was to diagnose performance problems.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">At the time, internal users were complaining to me (eroman) about sporadic performance issues. But </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">of course </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">they would never reproduce them when I was around! I wanted a system that could dump the relevant information reliably AFTER the problem had already happened.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">To capture the information I added </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLogs </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">to </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">URLRequests</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> to track the performance of core operations like DNS resolving and proxy resolution. This structure was really just a small set of event timings.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">To expose the data, I created a very simple webapp at “about:net-internals”. This page was entirely generated by C++, and believe me when I say it was basic!</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Since </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLogs </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">were attached to particular </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">URLRequests</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">, the visualizer would work by traversing the list of in-progress requests and subsequently printing its logs. I also kept a “graveyard” of recently finished requests in the browser so we would have some data on recently finished requests, (which ultimately was my original objective). Since about:net-internals was a static page, you would have to reload it to view new data. You would reload at the risk of losing the data it was currently displaying, since the data was backed by the browser process and might have already been evicted from the circular graveyard buffer.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The exchange format for users to send me their logs was ad-hoc. Essentially they would save the HTML page, often by using the “save webpage as” feature, or simply copy-pasting. (Some users would even print-to-pdf and attach that).</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Due to the limitations of the C++ generated HTML formatting, this first version of “about:net-internals” used a fixed-width text format for visualizing logs. This is in fact the </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">same</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> cryptic display (with few changes) that is used today. (When I ported that code from C++ to Javascript I left a TODO to improve it later...)</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">You might be wandering about the URL... why not simply call it “about:net”? Well, at the time there was already a page running at “about:net”! So I added the suffix “-internals” to distinguish them. Moreover, at the time I just wanted to build something quick and dirty and did not want to go through any UI reviews. By calling it “-internals” I was assuring people that it was just a janky developer page that didn’t need to meet our higher standards for end-user content.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Interestingly “about:net” got deprecated when porting Chrome to Mac/Linux (since it relied on native UI which no-one wanted to port). We eventually deleted it, but by the time that happened about:net-internals was already a well established URL so I saw no point in changing it. Today, ChromeOS has re-appropriated the url about:net.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">version 2: NetLog</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">I wanted to do more with about:net-internals. However the fact that it was entirely generated via C++ made it very difficult to work with. Formatting HTML from C++ is no fun, and the code quickly devolves into something terrifying. That last thing I wanted to be adding to Chrome was a pile of ugly C++ code. Since webui pages were all the rage at the time (this was around the time of </span><span style="font-family:Arial;font-size:15px;background-color:transparent;font-style:italic;vertical-align:baseline;white-space:pre-wrap">one </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">of the “new tab page” rewrites), my solution was to re-write about:net-internals in JavaScript.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">I started doing this, and created the experimental page “about:net2” for my in-progress work. These two pages coexisted for a while since it was just a side project for me. But eventually when it was good-enough I would rename about:net2 to about:net-internals.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The requirement to use JavaScript motivated the evolution of </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">into </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">NetLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The problem with </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">was the data was siloed by request. This meant my webapp couldn’t receive real-time updates. Rather it would have to do gnarly polling to see what had changed (and suck down all the data each time). Another issue that scared me was the browser-side accumulation of data being done with LoadLogs. When tracing I wanted to turn on higher logging granularity, but this came at the risk of using up lots of browser memory, which at the extreme might kill the process.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">To address this, I decided to generalize the mechanism of a per-request events into a single flat event stream. This gave me a nice choke point for transferring updates to the net-internals app. It also meant that the accumulation of data was done in a renderer process, so at worst a memory exhaustion would kill just that single tab.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">However this new approach also created some new problems. First of all, having a flat event stream meant needing to re-build the structure within each consumer of the NetLog. This is why the “source” parameter exists in events today. Since this is inefficient, I tried to keep browser-side interpretation of NetLog events to a minimum, and leaving this task to the visualizer.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The second issue was how to maintain feature parity with </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">LoadLog</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">’s ability to do “passive logging”. To support passive logging (i.e. “always on logging”) I introduced the </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector</span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap"> observer.</span><br /><br /><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">was an observer that would watch the event stream and save recent events into a circular buffer (using a variety of heuristics to try and keep the most relevant information, clustered by request). That way if something went wrong, we would have a partial log showing what happened most recently. Getting the heuristics for </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">good-enough was non-trivial, since it required re-building and tracking the structure for the events.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Initially </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">worked as promised. But it didn’t scale well over time, and has since been removed.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The problem is that over time the amount of net logging grew substantially (success!), and also the event stream became more fragmented into sources (due to more overlapping async stuff). The tension with </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">was wanting to collect enough useful information to be able to debug problems, while at the same time not having fragile heuristics which could break at any moment leading to browser memory bloat. Ultimately I wasn’t comfortable with the risk of bad heuristics leading to bloat, and how it complicated adding new logging, and hence removed it.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Some of the gaps left by the removal of </span><span style="font-family:Courier New;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">PassiveLogCollector </span><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">can be addressed by issue </span><a href="http://code.google.com/p/chromium/issues/detail?id=117026" style="font-family:Times New Roman;font-size:medium"><span style="font-size:15px;font-family:Arial;color:rgb(17,85,204);background-color:transparent;vertical-align:baseline;white-space:pre-wrap">117026</span></a><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">. </span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">version 3: The age of mmenke</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">The current evolution of about:net-internals is what I would call v3. It starts when Matt Menke teamed up with me to work on net-internals.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Prior to the golden age of menke, exchanging NetLogs involved copy-pasting the webpage! This was a hassle, since invariably users would paste the useless parts of the log and not the whole thing, or provide screenshots rather than text... It was downright embarrassing.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Matt added the ability to save logs to a JSON file, and to import them back again into about:net-internals, which was a huge step forward.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">Other core features of v3 were unittests for the JavaScript frontend, and a timeline visualization to plot network metrics both in real-time and from postmortem dump files.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">v3 also got custom views for Sockets, SPDY sessions, Winsock LSPs (SPIs), a slew of other functionality and increased logging sprinkled throughout the network stack.</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap">version 4: ???</span><br /><br /><span style="font-family:Arial;font-size:15px;background-color:transparent;vertical-align:baseline;white-space:pre-wrap">… patches welcome!</span></b>
</div></div></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-attachments">
<div class="sites-attachments-row"><div class="sites-attachments-icon" style="left:0px;"><span aria-label="Attachments" title="Attachments"><div class="sites-translucent sites-symbol" aria-hidden="true">Č</div></span></div><div id="sites-attachments-update-div" class="sites-attachments-inner-div" style="display:none;"><span class="sites-attachments-update-icon"><img src="http://www.gstatic.com/sites/p/56e332/system/app/images/spinner.gif" /></span><div class="sites-attachments-update-text">Updating...</div></div></div><div class="sites-attachments-separator"></div>
<div id="attachment-wuid:gx:4ba9185de7734e2b"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="Image" title="Image">ą</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name"><a href="http://www.chromium.org/developers/design-documents/network-stack/netlog/NetLog1.png?attredirects=0">NetLog1.png</a> <div class="sites-translucent">(6k)</div></div><div class="sites-attachments-author">Eric Roman, <div class="sites-translucent">Jun 12, 2012, 10:21 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="http://www.chromium.org/system/app/pages/admin/revisions?wuid=wuid:gx:4ba9185de7734e2b">v.1</a></div><div id="attachment-download-wuid:gx:4ba9185de7734e2b" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="http://www.chromium.org/developers/design-documents/network-stack/netlog/NetLog1.png?attredirects=0&amp;d=1" aria-label="Download NetLog1.png" title="Download" role="button"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div style="height: 10px"></div>
</div>
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/chromium.org/dev/developers/design-documents/network-stack/netlog">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="http://www.chromium.org/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9OWC96Awx7voLOn0174jUfdkCFCP5xkTXFRFRXuzb_0MVBh2wGVjLqktgKiF_V_QDN2zDHMVi8e9DV_dNEDWyfN8qvBvTo77_relbLT73o5ilAzVO/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
