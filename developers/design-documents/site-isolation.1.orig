<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/site-isolation","deleted":false,"title":"Site Isolation","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/site-isolation\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents","parentWuid":"wuid:gx:359ef223e0fb14ac","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Site Isolation","locale":"en","wuid":"wuid:gx:3a0046f200c39b7c","revision":32,"path":"/developers/design-documents/site-isolation","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"site-isolation","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Site Isolation - The Chromium Projects" />
<meta itemprop="name" content="Site Isolation - The Chromium Projects" />
<meta property="og:title" content="Site Isolation - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Site Isolation - The Chromium Projects</title>
<meta itemprop="image" content="https://www.chromium.org/_/rsrc/1332384354611/developers/design-documents/site-isolation/ChromeSiteIsolationProject-arch.png?height=137&amp;width=320" />
<meta property="og:image" content="https://www.chromium.org/_/rsrc/1332384354611/developers/design-documents/site-isolation/ChromeSiteIsolationProject-arch.png?height=137&amp;width=320" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/developers" dir="ltr">For Developers</A>‎ &gt; ‎<A href="/developers/design-documents" dir="ltr">Design Documents</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Site Isolation</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div></div><h2><a name="TOC-Motivation"></a>Motivation</h2>
<div>Chrome's <a href="https://www.chromium.org/developers/design-documents/multi-process-architecture">multi-process architecture</a> provides many benefits for speed, stability, and security.  It allows web pages in unrelated tabs to run in parallel, and it allows users to continue using the browser and other tabs when a renderer process crashes.  Because the renderer processes don't require direct access to disk, network, or devices, Chrome can also run them inside a restricted <a href="https://www.chromium.org/developers/design-documents/sandbox">sandbox</a>.  This <a href="http://crypto.stanford.edu/websec/chromium/">limits the damage</a> that an attacker can cause if he exploits a vulnerability in the renderer, including making it difficult for the attacker to access the user's filesystem or devices, as well as privileged pages (e.g., settings or extensions) and pages in other profiles (e.g., Incognito mode).</div>
<div>
<div style="display:inline;float:right;margin-top:5px;margin-right:10px;margin-bottom:5px;margin-left:10px"><a href="https://www.chromium.org/developers/design-documents/site-isolation/ChromeSiteIsolationProject-arch.png?attredirects=0" imageanchor="1"><img border="0" height="137" src="https://www.chromium.org/_/rsrc/1332384354611/developers/design-documents/site-isolation/ChromeSiteIsolationProject-arch.png?height=137&amp;width=320" width="320" /></a></div>
<br />
</div>
<div>However, there is still a large opportunity to use Chrome's sandbox for greater security benefits: isolating web sites from each other.  Chrome currently makes an effort to place pages from different web sites in different renderer processes when possible, but due to compatibility constraints, there are many cases in which pages from different sites share a process (e.g., cross-site iframes).  In these cases, we rely on the renderer process to enforce the Same Origin Policy and keep web sites isolated from each other.</div>
<div><br />
</div>
<div>This page describes our "site isolation" efforts to improve Chrome to use renderer processes as a security boundary between web sites, even in the presence of Blink vulnerabilities.  Our goal is to add support for a "<b>site-per-process</b>" policy that ensures certain renderer processes contains pages from at most one web site.  The browser process can then give renderer processes limited access to cookies and other resources, based on which web sites have dedicated processes.</div>
<div><br />
</div><div><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Motivation"><strong>1 </strong>Motivation</a></li><li class="goog-toc"><a href="#TOC-Threat-Model"><strong>2 </strong>Threat Model</a></li><li class="goog-toc"><a href="#TOC-Requirements"><strong>3 </strong>Requirements</a></li><li class="goog-toc"><a href="#TOC-Chrome-s-Current-Status"><strong>4 </strong>Chrome's Current Status</a></li><li class="goog-toc"><a href="#TOC-Project-Tasks"><strong>5 </strong>Project Tasks</a></li><li class="goog-toc"><a href="#TOC-Performance"><strong>6 </strong>Performance</a></li><li class="goog-toc"><a href="#TOC-Experimental-Support"><strong>7 </strong>Experimental Support</a></li><li class="goog-toc"><a href="#TOC-Development-Resources"><strong>8 </strong>Development Resources</a></li><li class="goog-toc"><a href="#TOC-2015-Site-Isolation-Summit-Talks"><strong>9 </strong>2015 Site Isolation Summit Talks</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Site-Isolation-Overview"><strong>9.1 </strong>Site Isolation Overview</a></li><li class="goog-toc"><a href="#TOC-Chromium-Changes-for-OOPIF-"><strong>9.2 </strong>Chromium Changes for OOPIF </a></li><li class="goog-toc"><a href="#TOC-Blink-Changes-for-OOPIF-"><strong>9.3 </strong>Blink Changes for OOPIF </a></li></ol></li><li class="goog-toc"><a href="#TOC-Discussions-Questions"><strong>10 </strong>Discussions/Questions</a></li></ol></div></div></div></div></div><br /></div>
<h2><a name="TOC-Threat-Model"></a><b><font size="4">Threat Model</font></b></h2>
<div>For the "site-per-process" security policy, we assume that an attacker can convince the user to visit a page that exploits a vulnerability in the renderer process, allowing the attacker to run arbitrary code within the sandbox.  We consider attackers that want to steal information or abuse privileges granted to other web sites.</div>
<div><br />
</div>
<div>Here, we use a precise definition for a <b>site</b> that we use as a principal: a page's site includes the scheme and registered domain name, including the public suffix, but ignoring subdomains, port, or path.  We use sites instead of origins to avoid breaking compatibility with existing web pages that might modify their document.domain to communicate across subdomains.</div>
<div><br />
</div>
<div>We consider the following threats in scope for the proposed policy:</div>
<div>
<ul><li><b>Stealing cross-site cookies and HTML5 stored data.</b>  We can prevent a renderer process from receiving cookies or stored data from sites other than its own.</li>
<li><b>Stealing cross-site HTML, XML, and JSON documents.</b>  Using MIME type and content sniffing, we can prevent a renderer process from loading cross-site documents.  We cannot block all cross-site resources, however, because images, scripts, and other opaque files are permitted across sites.</li>
<li><b>Stealing saved passwords.</b>  We can prevent a renderer process from receiving saved passwords from sites other than its own.</li>
<li><b>Abusing permissions granted to another site.</b>  We can prevent a renderer process from using permissions such as geolocation that the user has granted to other sites.</li>
<li><b>Compromising X-Frame-Options.</b>  We can prevent a renderer process from loading cross-site pages in iframes.  This allows the browser process to decide if a given site can be loaded in an iframe or not based on X-Frame-Options headers.</li><li><b>Accessing cross-site DOM elements via UXSS bugs.</b>  An attacker exploiting a universal cross-site scripting bug in the renderer process will not be able to access DOM elements of cross-site pages, which will not live in the same renderer process.</li></ul>
<div>We do not expect this policy to mitigate traditional cross-site attacks or attacks that occur within the page of a victim site, such as XSS, CSRF, XSSI, or clickjacking.</div>
</div>
<div><br />
</div>
<div>
<h2><a name="TOC-Requirements"></a>Requirements</h2>
<div>To support a site-per-process policy in a multi-process web browser, we need to identify the smallest unit that cannot be split across renderer processes.  This is not actually a single page, but rather a group of documents from the same web site that have references to each other.  Such documents have full script access to each other's content, and they must run on a single thread, not concurrently.  This group may span multiple frames or tabs, and they may come from multiple sub-domains of the same site.</div>
</div>
<div><br />
</div>
<div>
<div style="display:inline;float:left;margin-top:5px;margin-right:10px;margin-bottom:0px;margin-left:0px"><a href="https://www.chromium.org/developers/design-documents/site-isolation/ChromeSiteIsolationProject-siteinstances.png?attredirects=0" imageanchor="1"><img border="0" height="150" src="https://www.chromium.org/_/rsrc/1332384488023/developers/design-documents/site-isolation/ChromeSiteIsolationProject-siteinstances.png?height=150&amp;width=400" width="400" /></a></div>
<br />
</div>
<div>The HTML spec refers to this group as a "<a href="http://dev.w3.org/html5/spec/single-page.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a>."  In Chrome, we refer to this as a <b>SiteInstance</b>.  All of the documents within a SiteInstance are allowed to script each other, and we must thus render them in the same process.</div>
<div>
<div><br />
</div>
<div>Note that a single tab might be navigated from one web site to another, and thus it may show different SiteInstances at different times.  To support a site-per-process policy, a browser must be able to swap between renderer processes for these navigations.</div>
<div><br />
</div>
<div>There are also certain JavaScript interactions, such as postMessage() or close(), that are allowed between windows or frames even when they are showing documents from different sites.  It is necessary to support these limited interactions between renderer processes.</div>
<div><br />
</div>
<div><span style="font-size:10pt">In addition, top-level documents may contain iframes from different web sites.  These iframes have their own security context and must be rendered in a process based on their own site, not the site of their parent frame.</span></div>
</div>
<div><br />
</div>
<div>
<h2><a name="TOC-Chrome-s-Current-Status"></a>Chrome's Current Status</h2>
<div>As described on our <a href="https://www.chromium.org/developers/design-documents/process-models">Process Models</a> page, there are currently several cases in which Chrome will place documents from different sites in the same renderer process.  This keeps Chrome compatible with documents that make script calls across windows, at least until the project tasks described below are completed.  Some examples of cross-site pages that may share a process:</div>
<div>
<ul><li>Cross-site iframes are currently hosted in the same process as their parent document, because we don't yet have support for hosting them in a different process.</li>
<li>Most renderer-initiated navigations (including link clicks, form submissions, and scripted navigations) are kept within the current process even if they cross a site boundary.  This is because other windows in the same process may attempt to use postMessage or similar calls to interact with them.</li>
<li>If too many renderer processes have been created, Chrome starts to reuse existing processes rather than creating new ones.  This reduces memory overhead and avoid OS-specific limitations.</li></ul>
</div>
<div>However, Chrome already takes many large steps towards site isolation.  For example, it swaps renderer processes for cross-site navigations that are initiated in the browser process (such as omnibox navigations or bookmarks).  Many cross-origin JavaScript interactions are now supported across processes, such as postMessage() and navigating another window.</div>
<div><br />
</div>
<div>As a result of this progress, we have adopted a stricter security policy for certain types of pages, such privileged WebUI pages (like the Settings page).  These pages are never allowed to share a process with regular web pages, even when navigating in a single tab.  This is generally acceptable from a compatibility perspective because no scripting is expected between normal pages and WebUI pages, and because these can never be loaded in subframes of unprivileged pages.</div>
</div>
<div><br />
</div>
<div>
<h2><a name="TOC-Project-Tasks"></a>Project Tasks</h2>
<div>To support a site-per-process policy in Chrome, we need to complete the tasks outlined below.  These will ensure that cross-site navigations and script interactions will not break, despite having all pages from different sites in different processes.  The master tracking bug is <a href="https://crbug.com/467770">https://crbug.com/467770</a>.</div>
<div>
<ul><li><b>Cross-Process Navigations</b><br />
Any navigation to a different web site requires a process swap in the current tab.<br />
<i>Status: </i>This is in place for browser-initiated navigations, such as the Omnibox.  It also works for renderer-initiated navigations between pages of different types, such as normal web pages, WebUI pages (e.g., settings), and app pages.  With --site-per-process, we support cross-process navigations in all frames.</li>
<li><b>Cross-Process JavaScript</b><br />
As mentioned above, some window and frame level interactions are allowed between pages from different sites.  Common examples are postMessage, close, focus, blur, and assignments to window.location, notably excluding any access to page content.  These interactions can generally be made asynchronous and can be implemented by passing messages to the appropriate renderer process.<br />
<i>Status:</i> We currently support postMessage, close, focus, blur, and assignments to window.location between top-level windows in different processes.  With --site-per-process, we have frame placeholders and are still adding support for these script calls.  Remaining work tracked at <a href="https://crbug.com/128768">https://crbug.com/128768</a>.</li>
<li><b>Out-of-Process iframes</b><br />
Iframes have separate security contexts from their parent document, so cross-site iframes should be rendered in a different process from their parent.  It is also important that an iframe that is from the same origin as a popup window shares a process with the popup window and not its own parent page.  Our current plan is to render iframes in a separate RenderFrame composited into the correct visual location, much like plugins.  This is the largest requirement for supporting site-per-process, as it involves a major architecture change to the Chrome and Blink codebases.<br />
<i>Status:</i> We are currently implementing our <a href="https://www.chromium.org/developers/design-documents/oop-iframes">Design Plans for Out-of-Process iframes</a>.  Tracked at <a href="https://crbug.com/99379">https://crbug.com/99379</a>.</li>
<li><b>Improved Renderer Process Limit Policy</b><br />
How to handle Chrome's renderer process limit remains an open question.  Pending study of the performance implications, we have several options:</li>
<ul><li><i>[Current plan] </i>We could choose to protect only a set of sensitive web sites, perhaps including those the user has logged into, or all HTTPS sites.  These sites would never share a process with others, while other sites would be allowed to share with each other when the process limit is reached.  (Caveat: isolating an HTTPS site without isolating its HTTP version would allow renderer exploits to view non-secure cookies for the site, as well as set secure cookies for the site, per <a href="http://tools.ietf.org/html/rfc6265#section-4.1.2.5">RFC 6265</a>.)</li>
<li>We could repeal the process limit, particularly on clients with sufficient memory.  This may cause OS-specific issues as resources are depleted, such as the inability to fork new processes.</li>
<li>We could re-use processes according to some heuristics, allowing the security benefits of site isolation to degrade as more and more tabs are opened.  This is less than ideal because the situation may not be evident or predictable to the user.</li>
<li>When the limit is reached, other renderer processes may be killed and then restored when the user returns.  This approach is already taken on many mobile devices, but it is less satisfactory on desktops, where there is more potential for data loss or visibly killed tabs.</li>
<li>We could prevent the creation of new tabs until existing ones are closed.  This limit is likely to annoy users without immediate benefits.</li>
<li><i>Status:</i> We are planning to initially protect only a set of opt-in, high-value sites.  We will expand this set as resource usage permits.</li></ul>
<li><b>Browser Enforced Navigation Policy</b><br />
Some of Chrome's policy logic for deciding when to perform a cross-process navigation currently runs in the renderer process.  Since we assume renderer processes may be exploited, we need to move this logic to the browser process.  Similarly, any attempt or report of a navigation to a cross-site page within a renderer should cause the browser to kill the renderer, under the assumption it has been exploited.  It is worth noting that renderers are allowed to request many cross-site resources (such as scripts and images), but we can prevent them from receiving cross-site HTML, XML, and JSON documents (based on a combination of MIME type and content sniffing).<br />
<i>Status:</i> Our <a href="https://www.chromium.org/developers/design-documents/blocking-cross-site-documents">Cross-Site Document Blocking Policy</a> is posted and tracked at <a href="https://crbug.com/268640">https://crbug.com/268640</a>.</li>
<li><b>Security Principal Refactoring</b><br />
Any actions that the browser process takes on behalf of a renderer process should be associated with a security principal.  This will allow the browser to enforce access control based on the principal, rather than a potentially inaccurate guess about the tab's current contents.  This will help govern access to cookies or other data, as well as special APIs for extensions, apps, and WebUI pages.<br />
<i>Status:</i> Proposed in <a href="https://crbug.com/109792">https://crbug.com/109792</a>, but on hold until a clearer need arises.</li>
<li><b>Support for Cross-Process POST submissions</b><br />
Chrome does not yet have support for cross-process navigations with POST submissions.<br />
<i>Status:</i> Being tracked at <a href="https://crbug.com/101395">https://crbug.com/101395</a>.</li></ul><div><br /></div></div><h2><a name="TOC-Performance"></a>Performance</h2><div>Monitoring the performance impact of Site Isolation on Chrome is a critical part of this effort.  Site Isolation may affect performance in several ways, both positive and negative: some frames may render faster by running in parallel with the rest of the page, but creating additional renderer processes also increases memory requirements and may introduce latency on cross-process navigations.  We are taking several steps to minimize the costs incurred, and we will use performance monitoring infrastructure to measure these costs.</div><div><br /></div><div>As mentioned above under "Renderer Process Limit Policy," one of the primary tradeoffs we are making is that we will isolate only a subset of web sites.  Most web sites will continue to use Chrome's current process model, while web sites that users are likely to log into will be isolated.  This means that the vast majority of iframes will not require separate renderer processes.  We also plan to reuse renderer processes for a given site across many iframes, reducing the number of processes required.</div><div><br /></div><div>For monitoring our performance impact, we are using the <a href="https://www.chromium.org/developers/speed-infra/telemetry">Telemetry</a> framework for Chrome.  We are running existing benchmarks over new (and eventually existing) page sets, with and without the <font face="courier new, monospace">--site-per-process</font> flag.  This allows us to compare metrics like page load time and memory usage with and without out-of-process iframes.</div><div><i>Status:</i> We currently run the "<font face="courier new, monospace">basic_oopif</font>" page set (containing a handful of real sites with cross-site iframes) with and without --site-per-process in "<font face="courier new, monospace">page_cycler.basic_oopif</font>" and "<font face="courier new, monospace">page_cycler_site_isolation.basic_oopif</font>."  Examples of page load time and memory usage benchmarks can be seen on the <a href="https://chromeperf.appspot.com/report?sid=74ebe5d13c09e34915152f51ee178f77421b1703d2bf26a7a586375f2c5e2cc7">Chrome Performance Dashboard</a>.</div><div><br /></div>
<h2><a name="TOC-Experimental-Support"></a>Experimental Support</h2>
<div>For users eager to try site isolation before it is enabled by default, we have added an experimental command-line flag.  T<span style="font-size:10pt;background-color:transparent">he </span><font face="courier new, monospace" style="font-size:10pt;background-color:transparent">--site-per-process</font><span style="font-size:10pt;background-color:transparent"> flag starts to enforce the security policy described in this document.  With this flag, Chrome 41 supports painting and simple input events for out-of-process iframes (such as this test page: </span><a href="http://csreis.github.io/tests/cross-site-iframe.html" style="font-size:10pt;background-color:transparent">http://csreis.github.io/tests/cross-site-iframe.html</a><span style="font-size:10pt;background-color:transparent">).  This mode should only be used for experimentation and not normal browsing, as crashes are highly likely.</span></div></div>
<div style="font-size:13.3333330154419px"><br />
</div>
<h2><a name="TOC-Development-Resources"></a><b>Development Resources</b></h2><div>Updating Chrome Features:</div><div><ul><li><a href="https://docs.google.com/document/d/1Iqe_CzFVA6hyxe7h2bUKusxsjB6frXfdAYLerM3JjPo/edit?usp=sharing">Feature Update FAQ for Out-of-Process iframes</a></li>
<li><a href="https://docs.google.com/document/d/1dCR2aEoBJj_Yqcs6GuM7lUPr0gag77L5OSgDa8bebsI/edit?usp=sharing">Features to Update for Out-of-Process iframes</a></li></ul><div>Build Status:</div><div><ul><li><span style="font-size:10pt;background-color:transparent">Site Isolation FYI bots: <a href="http://build.chromium.org/p/chromium.fyi/builders/Site%20Isolation%20Linux">Linux</a> and <a href="http://build.chromium.org/p/chromium.fyi/builders/Site%20Isolation%20Win">Windows</a></span></li><li><span style="font-size:10pt;background-color:transparent">Site Isolation try bot: <a href="http://build.chromium.org/p/tryserver.chromium.linux/builders/linux_site_isolation">linux_site_isolation</a></span></li><li>Performance dashboard: <a href="https://chromeperf.appspot.com/report?sid=74ebe5d13c09e34915152f51ee178f77421b1703d2bf26a7a586375f2c5e2cc7">page_cycler_site_isolation.basic_oopif</a></li></ul></div><div><br /></div>
<h2><a name="TOC-2015-Site-Isolation-Summit-Talks"></a>2015 Site Isolation Summit Talks</h2><div>Talks and discussion from January 2015.</div>
</div>
<div>
<h3><a name="TOC-Site-Isolation-Overview"></a>Site Isolation Overview</h3><p><a href="https://docs.google.com/presentation/d/10HTTK4dsxO5p6FcpEOq8EkuV4yiBx2n6dBki8cqDWyo/edit?usp=sharing" style="font-size:13.3333330154419px;font-weight:normal;background-color:transparent">Slides</a></p>
<div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:480px;"><h4 class="sites-embed-title">Site Isolation Overview</h4><div class="sites-embed-content sites-embed-type-youtube"><iframe title="YouTube video player" class="youtube-player" type="text/html" src="//www.youtube.com/embed/3fdbC3DE0YQ?rel=0&amp;wmode=opaque" frameborder="0" allowFullScreen="true" width="480" height="270"></iframe></div></div></div></div>
<br /><h3><a name="TOC-Chromium-Changes-for-OOPIF-"></a><span style="font-size:10pt;background-color:transparent">Chromium Changes for OOPIF </span></h3><p><a href="https://docs.google.com/presentation/d/1e25K7BW3etNDm1-lkMltMcCcRDeVwLibBcbACRhqZ1k/edit?usp=sharing" style="font-size:10pt;font-weight:normal;color:rgb(85,26,139);background-color:transparent">Slides</a></p></div><div><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:480px;"><h4 class="sites-embed-title">Chromium Changes for OOPIF</h4><div class="sites-embed-content sites-embed-type-youtube"><iframe title="YouTube video player" class="youtube-player" type="text/html" src="//www.youtube.com/embed/gkrKtVkJNPM?rel=0&amp;wmode=opaque" frameborder="0" allowFullScreen="true" width="480" height="270"></iframe></div></div></div><br /></div><br /></div><div><br /><h3><a name="TOC-Blink-Changes-for-OOPIF-"></a><span style="font-size:10pt;background-color:transparent">Blink Changes for OOPIF </span></h3><p><a href="https://docs.google.com/presentation/d/11nrXiuXBTC72E5l_MUtu2eJN6rcW9PtBewDOPPTk9Bc/edit?usp=sharing" style="font-size:10pt;font-weight:normal;background-color:transparent">Slides</a></p></div><div><div><div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:480px;"><h4 class="sites-embed-title">Blink Changes for OOPIF</h4><div class="sites-embed-content sites-embed-type-youtube"><iframe title="YouTube video player" class="youtube-player" type="text/html" src="//www.youtube.com/embed/fQf8SPMA-Xk?rel=0&amp;wmode=opaque" frameborder="0" allowFullScreen="true" width="480" height="270"></iframe></div></div></div></div><br /></div><div><br /></div>
<div><br />
</div>
<h2><a name="TOC-Discussions-Questions"></a>Discussions/Questions</h2>
<div>The mailing list for technical discussions on Site Isolation is <a href="mailto:site-isolation-dev@chromium.org" style="color:rgb(17,85,204);font-family:arial,sans-serif;line-height:21px" target="_blank">site-isolation-dev@chromium.org</a>.</div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/site-isolation">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9w8LviqDaeNYbGjF36a_Wxt3gHbTvtB0UiXJrvTTvY4BajO488BgMVW_Y6kBHeur_YuUB2OIankqwtpFxkBLPNsoeoDoClM0rWsX2zKcVEc0Qy_J4/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
