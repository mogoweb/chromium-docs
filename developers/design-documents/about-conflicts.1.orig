<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var e="wtsrt_",g="tbsd_",h="tbnd_",k="start",l="_wtsrt",m="_tbnd",n="CSI/";(function(){function f(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp(n+a)}catch(d){}};this.tick(k,null,a)}var a;window.performance&&(a=window.performance.timing);var p=a?new f(a.responseStart):new f;window.jstiming={Timer:f,load:p};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick(l,void 0,c),b.tick(e,l,d),b.tick(g,e))}try{a=null,
window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick(m,void 0,window.chrome.csi().startE),b.tick(h,m,c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick(m,void 0,window.external.startE),b.tick(h,m,c))),a&&(window.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="/_/rsrc/1354323194313/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/56e332/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d="",g="__duration__",h="function";function k(c){return document.getElementById(c)}window.byId=k;function l(c){return c.replace(/^\s+|\s+$/g,d)}window.trim=l;var m=[],n=0;window.JOT_addListener=function(c,a,b){var e=new String(n++);c={eventName:c,handler:a,compId:b,key:e};m.push(c);return e};window.JOT_removeListenerByKey=function(c){for(var a=0;a<m.length;a++)if(m[a].key==c){m.splice(a,1);break}};
window.JOT_removeAllListenersForName=function(c){for(var a=0;a<m.length;a++)m[a].eventName==c&&m.splice(a,1)};window.JOT_postEvent=function(c,a,b){var e={eventName:c,eventSrc:a||{},payload:b||{}};if(window.JOT_fullyLoaded)for(a=m.length,b=0;b<a&&b<m.length;b++){var f=m[b];f&&f.eventName==c&&(e.listenerCompId=f.compId||d,(f=typeof f.handler==h?f.handler:window[f.handler])&&f(e))}else window.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};window.JOT_delayedEvents=[];
window.JOT_fullyLoaded=!1;window.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var e=0;60<=b&&(b/=60,e=2);2<=b&&e++;return a?window.JOT_siteRelTimeStrs[e].replace(g,Math.floor(b)):window.JOT_userRelTimeStrs[e].replace(g,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/developers","deleted":false,"title":"For Developers","dir":"ltr"},{"path":"/developers/design-documents","deleted":false,"title":"Design Documents","dir":"ltr"},{"path":"/developers/design-documents/about-conflicts","deleted":false,"title":"Design document for about:conflicts","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/56e332/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":true,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"The Chromium Projects","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"validateClientGvizDataSourceUrls":true,"moreMobileStyleImprovements":true,"newInsertMenuIcons":true,"accessibleSortingButtons":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/chromium.org/dev/developers/design-documents/about-conflicts\u0026service\u003djotspot","analyticsAccountId":"UA-5484340-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/56e332/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/56e332/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/56e332/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/56e332/system/app/css/trogedit.css","/_/rsrc/1441580320000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/56e332/system/app/css/codeeditor.css","/_/rsrc/1441580320000/system/app/css/camelot/editor-jfk-wlb.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"chromium.org","baseUri":"","name":"dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/developers/design-documents","parentWuid":"wuid:gx:359ef223e0fb14ac","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Design document for about:conflicts","locale":"en","wuid":"wuid:gx:52bc3753bd116c11","revision":5,"path":"/developers/design-documents/about-conflicts","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"about-conflicts","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Design document for about:conflicts - The Chromium Projects" />
<meta itemprop="name" content="Design document for about:conflicts - The Chromium Projects" />
<meta property="og:title" content="Design document for about:conflicts - The Chromium Projects" />
<meta name="description" content="Home of the Chromium Open Source Project" />
<meta itemprop="description" content="Home of the Chromium Open Source Project" />
<meta id="meta-tag-description" property="og:description" content="Home of the Chromium Open Source Project" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/56e332/system/app/themes/beigeandblue/standard-css-beigeandblue-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/overlay.css?cb=beigeandblueundefineda100%25%25150goog-ws-leftthemedefaultstandard" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1441580320000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Design document for about:conflicts - The Chromium Projects</title>
<meta itemprop="image" content="https://www.chromium.org/_/rsrc/1294410055387/developers/design-documents/about-conflicts/incompatibility_thumb.png" />
<meta property="og:image" content="https://www.chromium.org/_/rsrc/1294410055387/developers/design-documents/about-conflicts/incompatibility_thumb.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="https://www.chromium.org/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1438879449147/config/customLogo.gif?revision=3" alt="The Chromium Projects" class="sites-logo  " /></a><h2><a href="https://www.chromium.org/" dir="ltr" id="sites-chrome-userheader-title">The Chromium Projects</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_7648876402527094" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-projects" jotId="wuid:gx:10ae433dadbbab13" class="sites-navigation-link">Home</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/Home" jotId="wuid:gx:43582b9d2029d3af" class="sites-navigation-link">Chromium</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/chromium-os" jotId="wuid:gx:83df2ab1f8880ba" class="sites-navigation-link">Chromium OS</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_14720868319272995" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Quick links</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/for-testers/bug-reporting-guidelines" class="sites-navigation-link">Report bugs</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.chromium.org/developers/discussion-groups" class="sites-navigation-link">Discuss</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:4b58a9a350ad12f" class="sites-navigation-link">网站地图</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19690813310444355" class="sites-embed" role="navigation"><h4 class="sites-embed-title">Other sites</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://blog.chromium.org/" class="sites-navigation-link">Chromium Blog</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://code.google.com/chrome/extensions/" class="sites-navigation-link">Google Chrome Extensions</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://developers.google.com/chrome/chrome-frame/" class="sites-navigation-link">Google Chrome Frame</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_19695218559354544" class="sites-embed" role="complementary"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><span style="font-size:x-small">Except as otherwise </span><a href="http://developers.google.com/site-policies.html#restrictions"><span style="font-size:x-small">noted</span></a><span style="font-size:x-small">, the content of this page is licensed under a </span><a href="http://creativecommons.org/licenses/by/2.5/"><span style="font-size:x-small">Creative Commons Attribution 2.5 license</span></a><span style="font-size:x-small">, and examples are licensed under the </span><a href="http://src.chromium.org/viewvc/chrome/trunk/src/LICENSE" target="_blank"><span style="font-size:x-small">BSD License</span></a><span style="font-size:x-small">.<br /></span></div></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/developers" dir="ltr">For Developers</A>‎ &gt; ‎<A href="/developers/design-documents" dir="ltr">Design Documents</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Design document for about:conflicts</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-family:arial,sans-serif;white-space:pre-wrap"><h3 style="font-family:arial,sans-serif"><a name="TOC-Objective"></a><span style="font-weight:bold"><font size="3">Objective</font></span></h3><font size="2">This feature is intended to provide the user with a good overview of what 3rd party modules (ie. DLLs on Windows) get loaded into their Google Chrome installation and to call out suspected and known bad modules. Hopefully this will lead to increased awareness of the adverse effect that 3rd party modules can have on the stability of Google Chrome and make troubleshooting easier. In turn, this should have a positive effect on Google Chrome stability.</font></ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><span style="font-weight:bold"><br /></span></ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-family:arial,sans-serif;white-space:pre-wrap"><span style="font-weight:bold"><font size="3">Background</font></span><font size="2"><br /><br />Windows provides developers with an array of options for hooking into both the operating system as well as other applications on the system. Windows provides APIs to, for example, extend the functions of the shell, context menus and to hook into the network stack, not to mention methods to simply inject DLLs into random processes and start executing. There is even a registry key that lists DLLs to get automatically injected into all processes.<br /><br />These techniques are often used for legitimate purposes, such as security software (VPN, firewalls, anti-virus, anti-spyware), accessibility (IME) or for general utilities (download managers). Of course this can also be used by malware (viruses, spyware, trojans, etc). To facilitate discussion, we'll refer to the functions these modules provide as 'extensions' (not to be confused with Chrome Extensions).<br /><br />Unfortunately, most software vendors don't have the resources to test their extension for compatibility problems with all the applications in use in the wild (and most malware writers wouldn't even if they had the resources). Therefore, the code injected in this way often causes major stability problems for the target applications. Chromium developer Eric Roman analyzed all crash reports for a particular version of Google Chrome and found that over 1 in 4 crashes reported had 3rd party code on the call stack at the time of the crash. It's hard to tell whether the 3rd-party code is directly to blame, but conversely if the extension module causes memory corruption, the crash will often happen when the extension module is no longer on the stack, leaving a weird crash in some code that can be entirely unrelated to the task at hand. <br /><br />As far as the user is concerned, there is hardly any correlation between the application crash and the extensions installed, so users have little means to differentiate between a buggy application and a buggy extension. Naturally, the tendency is to blame the application developers and if they can't pinpoint the extension that caused the problem the crashes will simply go unnoticed by the extension developers.<br /></font><h3 style="font-family:arial,sans-serif"><a name="TOC-Goals"></a><span style="font-weight:bold"><font size="3">Goals</font></span></h3><div><font size="2">The goals of this feature are to:</font></div><div><font size="2"><br /></font></div><ul style="font-size:small"><li>Identify all modules running inside Google Chrome.</li><li>Call out suspected and known bad 3rd party modules (using a list provided by Support).</li><li><span>Introduce a flag that allows the user to opt-in to a background thread check for known bad modules and show an indicator on the wrench menu when incompatibilities are detected.<span> </span></span></li></ul></ul><div style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><br /></div><div style="font-family:arial,sans-serif;white-space:pre-wrap"><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:small">Possible goals for future versions:<br /><br /><ul><li>Port the feature to non-Windows platforms.</li><ul><li>Historical note: The name of this feature got changed from about:dlls to about:conflicts (to be platform neutral).</li></ul><li>Provide backend support for a safe-browsing type of database that can be auto-updated in the background.</li><ul><li><span style="font-style:italic">To keep things simple for </span><span style="font-style:italic">v1</span><span style="font-style:italic"> and to test the concept the module blacklist will be baked into Chrome.</span></li></ul><li>Provide functionality for the user to block certain modules.</li><ul><li><span style="font-style:italic">This is non-essential for </span><span style="font-style:italic">v1</span><span style="font-style:italic"> but might be implemented later.</span></li></ul><li>Integrate with --diagnostics to list bad modules.<span> <i>[Done: Implemented for v10]</i></span></li></ul></ul><div><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px"><h3 style="font-family:arial,sans-serif"><a name="TOC-Non-goals"></a><span style="font-weight:bold"><font size="3">Non-goals</font></span></h3><ul style="font-size:small"><li>Identify modules that actively try to hide their existence or for some reason or other won't show up in the module list for the running process.</li><li>Ensure access to about:conflicts even in the event of a module that crashes Chrome at every startup (except maybe in conjunction with --diagnostics).<span> </span></li></ul></ul><div style="font-size:small"><span style="font-weight:bold"><br /></span></div><div><span style="font-weight:bold"><font size="3">Use Cases</font></span></div></div></div><div><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><br />The main use case of this feature is simply <span style="font-style:italic">the user typing in about:conflicts into the Omnibox</span>. This will show a simple web page, similar to about:version, except that the page will enumerate all modules loaded into the browser process and cross-reference each module with a list of known or suspected bad actors. It should also enumerate modules that have not loaded yet, but are likely to (ie. shell extension registrations and Winsock LSPs).<br /><br />The other use case would be for <span style="font-style:italic">the user to opt-in to </span>have the modules periodically enumerated and, on finding known bad actors, show a red dot (see below) over the wrench menu that promotes the about:conflicts page.</ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><span style="font-weight:bold"><br /></span></ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-family:arial,sans-serif;white-space:pre-wrap"><span style="font-weight:bold"><font size="3">Detailed Design</font></span><font size="2"><br /><br /></font><span style="font-weight:bold;font-size:small">The about:conflicts page</span><font size="2"><br /><br />about:conflicts is simply an HTML resource, much like about:version, loaded from the resource bundle and populated with the needed data at runtime. See </font><span style="font-style:italic;font-size:small">The detection mechanism</span><font size="2"> below.<br /><br />For a proposed screenshot of the page see comment 5 of issue 51105:<br /></font><a href="http://code.google.com/p/chromium/issues/detail?id=51105#c5" style="font-family:arial,sans-serif;color:rgb(0,62,168);font-size:small" target="_blank">http://code.google.com/p/chromium/issues/detail?id=51105#c5</a><font size="2"><br /><i>[Update: The look of the about:conflicts page no longer resembles the image in the bug]</i></font></ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px"><font size="2" style="font-family:arial,sans-serif;white-space:pre-wrap"><br /></font><span style="font-weight:bold;font-size:small;font-family:arial,sans-serif;white-space:pre-wrap">The red dot</span><font size="2" style="font-family:arial,sans-serif;white-space:pre-wrap"><br /><br /></font><font size="2"><span style="font-family:Arial,Verdana,sans-serif;font-size:13px;white-space:normal"><div style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><i>[Update: The wrench image has since changed and the badging as well -- now it is a 'hotdog' menu that changes colors (instead of being badged)</i><i>. This doc will still refer to the original design, though: the red dot on the wrench menu.]</i></div><div><br /></div></span><font face="arial, sans-serif"><span style="white-space:pre-wrap">The red dot is the equivalent to the badge we show when there is an update for Chrome available, except that instead it notifies you of confirmed incompatibilities (not suspected ones). It might look something like this:</span></font></font><span style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"> </span></ul></div><div style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><br /></div><div style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><a href="https://www.chromium.org/developers/design-documents/about-conflicts/incompatibility_thumb.png?attredirects=0" imageanchor="1"><img border="0" src="https://www.chromium.org/_/rsrc/1294410055387/developers/design-documents/about-conflicts/incompatibility_thumb.png" /></a></div><div style="font-size:small;font-family:arial,sans-serif;white-space:pre-wrap"><br /></div><div><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Similarly, the wrench menu that pops up will have a menu item 'View incompatibilities', which, when clicked, will take the user to the about:conflicts page.<br /><br />If both an incompatibility and a new version are detected, the update dot will show on the Wrench icon (not the red dot) but both menu items will appear in the Wrench menu (both the 'update available' menu item and the 'incompatibility detected' menu item).<br /><br /><span style="white-space:normal"><div style="font-family:arial,sans-serif;font-size:small;display:inline-block"></div></span><span style="font-weight:bold">The list of bad actors</span><br /><br />A given module has many properties that can be used to try to uniquely identify it. The intent is not to get into the pattern matching business but to use some of the properties that we can extract at run time to try to identify modules. The information that is readily available is the module file name, a location (path) and its file size. Modules often (but not always) contain version information, a description, information about the product it belongs to (name and version) and it may also be digitally signed).<br /><br />To start with, we'll use the normalized path (described below) + filename, the description (if any) and a version range (if version is available to us and we need to match a certain version only).<br /><br />Paths need to be normalized to account for differences in OS installation and profile location. This means that we'll need to convert local paths from c:\user\foo\bar to %USERPROFILE%\foo and from short names to long names before we use them for comparison. Furthermore, we should also lower-case all the strings before converting them to hashes (SHA-256?) and use only the hashes to match modules on the client. This will prevent the list from overly increasing the size of the compiled Google Chrome binary.<br /><br />Every entry in the list of bad actors will have an associated bitmask of help tips to display along with a confirmed/suspected match.<br /><br />Possible bitmasks:<br /><br />NONE -- This means we have no help tip. Shows: "We are currently investigating this issue"<br />UNINSTALL -- We know uninstall is possible and has resolved the issue for some: "You may try uninstalling this product to see if it resolves the issue".<br />DISABLE -- Same as uninstall except "uninstalling" -&gt; "disabling".<br />UPDATE -- Same as uninstall except "uninstalling" -&gt; "updating".<br />SEE_LINK -- If this is provided, we'll append the link "Learn more" to the end.<br /><br />The goal here is to avoid having to ship the help strings down to the client. Also to be generic enough to be included in the resource files, localized to each language we support and reused whenever we find a match. If more details are required, such as a link to a hotfix, we'll need to provide this in the help center article.<span> </span></ul><div style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"><br /></div><div><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px"><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">If uninstall, disable and/or update appear together, we'll collapse the string into one, such as: "You may try uninstalling, updating or disabling this product to see if it resolves the issue". 'None' can not be used if Uninstall, Disable and Update is specified.</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">If SEE_LINK is provided, we'll use the hashes to construct a link to a help center article passing as parameters the hashes we constructed for the list, so we can customize the help messages shown to the user.</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">The list would be constructed as follows:</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Filename  |  location  | Signer (if available, otherwise module Description) | version lower | version upper | help tip</span></font><br /> <br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">An example hypothetical entry in the list:</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">mshtml.dll  |  %windir%\system32  |  Microsoft (R) HTML Viewer  |  1.0  |  1.1  |  UPGRADE or SEE_LINK</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">This would translate into:</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">32bithash1 | 32bithash2 | 32bithash3 | string | string | bitmask</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">If the link is clicked, it would (hypothetically) navigate to something like:</span></font><br /></ul><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px"><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">http://www.google.com/support/chrome/bin/answer.py?answer=&lt;someid&gt;&amp;topic=&lt;sometopic&gt;&amp;hl=&lt;language&gt;&amp;n=</span></font><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">&lt;hash1&gt;</span><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">&amp;l=&lt;hash2&gt;</span><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">&amp;d=&lt;hash3&gt;</span><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">&amp;s=</span><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">&lt;hash3&gt;</span></ul><div><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"><br /></span></font></div><div><ul style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px"><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">The detection mechanism</span><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"><br /></span></font><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">The client code will enumerate all modules loaded into the browser process and all registered modules of interest (ie. shell extensions). We'll need to enumerate the registered modules as well because some modules load on-demand only (and might even crash the browser while doing so).</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">A module is considered a </span></font><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">suspected match</span><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"> if its file name matches a file name on the list. If either an Authenticode signature </span></font><span style="font-style:italic;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">signer</span><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"> or </span></font><i style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">description</i><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"> is provided in the blacklist, then we can possibly upgrade the status to </span></font><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">confirmed match</span><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">. Specifically, a module is considered a </span></font><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">confirmed match</span><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap"> if (in addition to the file name):</span></font><br /><br /><ul><li style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">The module (DLL) is Authenticode signed and the digital signature <span style="font-style:italic">signer</span> matches the signer in the blacklist.</li><ul style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"><li>_or_</li></ul><li style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Both the location of the module and the description matches the information provided in the list of bad actors.</li><ul style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"><li>_or_</li></ul><li><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">The <i>description</i> field and the <i>signer</i> field in the blacklist is left blank.</span></font></li></ul><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Note: If a version range is provided in the list, it must match for the module to be considered either a suspected/confirmed match. The same applies to location.</span></font><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">To begin with, at least, the red dot will only show for confirmed bad modules (for those opting in). We can later experiment on the Dev channel with showing it also for suspected bad modules.</span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Data collection</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">For those users who opt-in to data collection (UMA) we'd want to know...</span></font><br /><br /><ul style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"><li>How many bad modules did we detect?</li><li>How often are we displaying the red dot on the Wrench menu?</li><li>How long does it take to go through the list of all modules?</li></ul><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">F</span><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">AQ</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Most of this is constructed from discussions among various Chromium members regarding this feature/different approaches.</span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Why not block all 3rd </span><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">party</span><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"> modules in the browser process?</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Because that penalizes the good extension developers that provide properly written useful extension functionality.</span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">How about introducing a whitelist of allowed modules?</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Such a whitelists would likely be too hard/time consuming to construct and maintain due to the number of items that users would want to be whitelisted. </span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">How about automatically blacklisting all known bad modules?</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">Concerns have been raised that automatically blocking modules introduces code that adversely affects startup time for people who have no bad modules installed. In the future we might look into the possibility of checking on a background thread for known bad modules and set a flag for next startup to eject that module. That's beyond the scope of this feature though (at least the first version).</span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Where does the blacklist come from?</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">The blacklist is constructed by a collaboration between Support and people working on browser stability.</span></font><br /><br /><span style="font-weight:bold;font-family:arial,sans-serif;white-space:pre-wrap;font-size:small">Won't the red dot on the Wrench menu be annoying for false positives (ie. if just names of modules matching)?</span><br /><br /><font face="arial, sans-serif" size="2"><span style="white-space:pre-wrap">The red dot notification is opt-in by a flag, but it won't in any case be shown for suspected matches where only the names matches. It has to be a confirmed match (where either the Authenticode signer matches or the location and description match).</span></font><span style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"> </span></ul></div></div><div style="font-family:arial,sans-serif;white-space:pre-wrap;font-size:small"><br /></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/chromium.org/dev/developers/design-documents/about-conflicts">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/56e332/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("7648876402527094", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_7648876402527094');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("14720868319272995", "Quick links", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_14720868319272995');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("19690813310444355", "Other sites", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_19690813310444355');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXvrAwjAfmld0ObrebBiGRq9rp30wGuMKMbky6I9rtqh7kdBnoAfuHU8iuY8aJqMCE9FaJAGSqPDwJKeY6rEF676sYlpf16ceodPQtbFxfYix7__FrHRUbPbzoYceyJGCGNw0VKT/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('https://www.chromium.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
